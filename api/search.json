[{"id":"b183580f01b4c460a08090715fbc01f0","title":"pythonæ•°æ®åˆ†æï¼šxlwingsæ“ä½œexcel","content":"xlwingsæ˜¯Pythonä¸­æ“ä½œExcelçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œæ”¯æŒ.xlsè¯»å†™ï¼Œ.xlsxè¯»å†™ï¼Œæ“ä½œéå¸¸ç®€å•ï¼ŒåŠŸèƒ½ä¹Ÿå¾ˆå¼ºå¤§xlwingsä¸VBAçš„é…åˆéå¸¸å®Œç¾ï¼Œä½ å¯ä»¥åœ¨pythonä¸­è°ƒç”¨VBAï¼Œä¹Ÿå¯ä»¥åœ¨VBAä¸­ä½¿ç”¨pythonç¼–ç¨‹ï¼Œè¿™äº›é€šè¿‡xlwingséƒ½å¯ä»¥å·§å¦™å®ç°ã€‚å…ˆè¯´è£…è¿™ä¸ªxlwingsç¢°åˆ°ä¸ªç¥å‘ï¼š\nç”¨pip install pywin32è£…å®Œä¹‹åé”™è¯¯å°±æ¥äº†\nDLL load failed while importing win32api: æ‰¾ä¸åˆ°æŒ‡å®šçš„ç¨‹åºã€‚mdææ­»æˆ‘äº†\næŸ¥ä¸åˆ°ï¼Œå†æŸ¥ï¼Œå†æŸ¥ï¼Œå†æŸ¥ã€‚ã€‚ã€‚\nè§£å†³æ–¹æ³•ï¼šhttps://www.cnblogs.com/Swalllow/p/11711750.htmlæ‰¾åˆ°æ–‡ä»¶pywin32_postinstall.pyçš„è·¯å¾„ï¼Œ\nç”±äºå®‰è£…è·¯å¾„ä¸åŒï¼Œå¯èƒ½ä½ç½®ä¸ä¸€æ ·ï¼Œå¯ä»¥åœ¨ä½ å®‰è£…pythonçš„æ–‡ä»¶å¤¹æœç´¢è¿™ä¸ªæ–‡ä»¶ï¼Œ\nä¸€èˆ¬åœ¨å®‰è£…æ–‡ä»¶ä¸‹çš„Scriptsæ–‡ä»¶é‡Œï¼Œç”¨cmdè¿›å…¥è¿™ä¸ªScriptsæ–‡ä»¶å¤¹\nå¦‚cd/d D:\\install\\python3.8\\Scripts\nåœ¨è·¯å¾„ä¸‹è¿è¡Œpython pywin32_postinstall.py -install\nå†æ£€æŸ¥ä¸€æ¬¡æ˜¯å¦æˆåŠŸ\nèŠœæ¹–~ï¼Œå±…ç„¶å¥½äº†\nå­¦ä¹ xlwingsçœ‹è¿™é‡Œï¼š\nhttps://www.kancloud.cn/gnefnuy/xlwings-docs/1127455https://www.cnblogs.com/Renyi-Fan/p/13244027.html\nimport pandas as pd\nimport xlwings as xw\n\n\n# å»ºç«‹excelè¡¨è¿æ¥\nwb &#x3D; xw.Book(&quot;out.xlsx&quot;)\n#     å®ä¾‹åŒ–å·¥ä½œè¡¨å¯¹è±¡\nsht &#x3D; wb.sheets[&quot;æºæ•°æ®&quot;]\nsht\n\n\n&lt;Sheet [out.xlsx]æºæ•°æ®&gt;\n\n#     è¿”å›å·¥ä½œè¡¨ç»å¯¹è·¯å¾„\nwb.fullname\n\n\n&#39;C:\\\\Users\\\\supermanzwg\\\\workspace\\\\3Data_Processing(è‡ªåŠ¨åŒ–)\\\\out.xlsx&#39;\n\n#     è¿”å›å·¥ä½œç°¿çš„åå­—\n\nsht.name\n\n\n&#39;æºæ•°æ®&#39;\n\n#     åœ¨å•å…ƒæ ¼ä¸­å†™å…¥æ•°æ®\nsht.range(&#39;A1&#39;).value &#x3D; &quot;xlwingç‰›é€¼å•Š&quot;\nsht\n\n\n&lt;Sheet [out.xlsx]æºæ•°æ®&gt;\n\n#     è¯»å–å•å…ƒæ ¼å†…å®¹\nsht.range(&#39;A1&#39;).value\n\n\n&#39;xlwingç‰›é€¼å•Š&#39;\n\n#     æ¸…é™¤å•å…ƒæ ¼å†…å®¹å’Œæ ¼å¼\nsht.range(&#39;A1&#39;).clear()\n\n\n#     è·å–å•å…ƒæ ¼çš„åˆ—æ ‡\nsht.range(&#39;A1&#39;).column\n\n\n1\n\n#     è·å–å•å…ƒæ ¼çš„è¡Œæ ‡\nsht.range(&#39;A1&#39;).row\n\n1\n\n#     è·å–å•å…ƒæ ¼çš„è¡Œé«˜\nsht.range(&#39;A1&#39;).row_height\n\n13.2\n\n#     è·å–å•å…ƒæ ¼çš„åˆ—å®½\nsht.range(&#39;A1&#39;).column_width\n\n8.47\n\n#     åˆ—å®½è‡ªé€‚åº”\nsht.range(&#39;A1:A99&#39;).columns.autofit()\nsht\n\n&lt;Sheet [out.xlsx]æºæ•°æ®&gt;\n\n#     è¡Œé«˜è‡ªé€‚åº”\nsht.range(&#39;A1:M1&#39;).rows.autofit()\n\n#     ç»™å•å…ƒæ ¼ä¸ŠèƒŒæ™¯è‰²ï¼Œä¼ å…¥RGBå€¼\nsht.range(&#39;A1&#39;).color &#x3D; (34,139,34)\n\n#     è·å–å•å…ƒæ ¼é¢œè‰²ï¼ŒRGBå€¼\nsht.range(&#39;A1&#39;).color\n\n(34, 139, 34)\n\n#     æ¸…é™¤å•å…ƒæ ¼é¢œè‰²\nsht.range(&#39;A1&#39;).color &#x3D; None\n\n#     è¾“å…¥å…¬å¼ï¼Œç›¸åº”å•å…ƒæ ¼ä¼šå‡ºç°è®¡ç®—ç»“æœ\nsht.range(&#39;A1&#39;).formula&#x3D;&#39;&#x3D;SUM(H6:H7)&#39;\n\n#     è·å–å•å…ƒæ ¼å…¬å¼\nsht.range(&#39;A1&#39;).formula_array\n\n&#39;=SUM(H6:H7)&#39;\n\n#     åœ¨å•å…ƒæ ¼ä¸­å†™å…¥æ‰¹é‡æ•°æ®ï¼Œåªéœ€è¦æŒ‡å®šå…¶å®å•å…ƒæ ¼ä½ç½®å³å¯\nsht.range(&#39;A2&#39;).value &#x3D; [[&#39;Foo 1&#39;, &#39;Foo 2&#39;, &#39;Foo 3&#39;], [10.0, 20.0, 30.0]]\n\n\n#     è¯»å–è¡¨ä¸­æ‰¹é‡æ•°æ®ï¼Œä½¿ç”¨expand()æ–¹æ³•\nsht.range(&#39;A2&#39;).expand().value\n\n\n#     å…¶å®ä½ ä¹Ÿå¯ä»¥ä¸æŒ‡å®šå·¥ä½œè¡¨çš„åœ°å€ï¼Œç›´æ¥ä¸ç”µè„‘é‡Œçš„æ´»åŠ¨è¡¨æ ¼è¿›è¡Œäº¤äº’\n# å†™å…¥\nxw.Range(&quot;E1&quot;).value &#x3D; &quot;xlwings&quot;# è¯»å–\nxw.Range(&quot;E1&quot;).value\n\n&#39;xlwings&#39;\n\nxw.range(&quot;E2&quot;).value &#x3D; &quot;xlwings&quot;\n\n---------------------------------------------------------------------------\n\nAttributeError                            Traceback (most recent call last)\n\nC:\\Users\\SUPERM~1\\AppData\\Local\\Temp/ipykernel_10040/191138757.py in &lt;module&gt;\n----&gt; 1 xw.range(&quot;E2&quot;).value = &quot;xlwings&quot;\n\nAttributeError: module &#39;xlwings&#39; has no attribute &#39;range&#39;\n\n# xlwingsä¸numpyã€pandasã€matplotlibäº’åŠ¨\n#     æ”¯æŒå†™å…¥numpy arrayæ•°æ®ç±»å‹\n\nimport numpy as np\nnp_data &#x3D; np.array((1,2,3))\nsht.range(&#39;F1&#39;).value &#x3D; np_data\n\n#     æ”¯æŒå°†pandas DataFrameæ•°æ®ç±»å‹å†™å…¥excel\n\nimport pandas as pd\ndf &#x3D; pd.DataFrame([[1,2], [3,4]], columns&#x3D;[&#39;a&#39;, &#39;b&#39;])\nsht.range(&#39;A5&#39;).value &#x3D; df\n\n#     å°†æ•°æ®è¯»å–ï¼Œè¾“å‡ºç±»å‹ä¸ºDataFrame\n\nsht.range(&#39;A5&#39;).options(pd.DataFrame,expand&#x3D;&#39;table&#39;).value\n\n#     å°†matplotlibå›¾è¡¨å†™å…¥åˆ°excelè¡¨æ ¼é‡Œ\n\nimport matplotlib.pyplot as plt\n%matplotlib inline\nfig &#x3D; plt.figure()\nplt.plot([1, 2, 3, 4, 5])\nsht.pictures.add(fig, name&#x3D;&#39;MyPlot&#39;, update&#x3D;True)\n\n# xlwingsä¸VBAäº’ç›¸è°ƒç”¨\n\n\n&lt;Picture &#39;MyPlot&#39; in &lt;Sheet [out.xlsx]æºæ•°æ®&gt;&gt;\n\n","slug":"pythonæ•°æ®åˆ†æï¼šxlwingsæ“ä½œexcel","date":"2022-01-16T11:16:09.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"68c9396da13a152d585d7816d6c82312","title":"sqlæ’åå‡½æ•°","content":"\nrank()æ’åæ˜¯ä¸è¿ç»­çš„ï¼Œå‡ºç°åŒåçš„æ’åºåºå·ä¼šç›¸åŒ(æ¯”è¾ƒå¸¸è§„çš„æ’åº)ï¼Œå­˜åœ¨å¹¶åˆ—ï¼Œä¸”åºå·ä¼šè·³è·ƒ\né€‚åˆæ±‚ç¬¬ä¸€åï¼Œåæ¬¡è¿™ç±»\n\n\nselect \nemployee_id\n,last_name\n,department_id\n,salary\n,rank() over(partition by department_id order by salary desc) \nfrom employees\n\nrow_number()æ’åæ˜¯è¿ç»­çš„,å‡ºç°åŒåçš„åºå·ä»ç„¶ä¼šè¿ç»­ï¼Œä¸å­˜åœ¨å¹¶åˆ—å’Œè·³è·ƒ\né€‚åˆè®¡ç®—ä¸ªæ•°ï¼Œä½ç½®ï¼Œè¿ç»­è´­ä¹°åœºæ™¯\n\n\nselect \nemployee_id \n,last_name \n,department_id \n,salary \n,row_number() over(partition by department_id order by salary desc) \nfrom employees \n\ndense_rank()æ’åæ˜¯è¿ç»­çš„ï¼Œå‡ºç°åŒåçš„åºå·ä¼šç›¸åŒï¼Œå­˜åœ¨å¹¶åˆ—ï¼Œä¸”åºå·ä¸ä¼šè·³è·ƒ\nï¼ˆç”¨çš„æ¯”è¾ƒå°‘çš„ï¼Œå•çº¯éœ€è¦æ’åä¸”å­˜åœ¨å¹¶åˆ—ä¹Ÿä¸è·³è·ƒï¼‰\n\n\nselect \nemployee_id \n,last_name \n,department_id \n,salary \n,dense_rank() over(partition by department_id order by salary desc) \nfrom employees \nâ€“ ntile()æ ¹æ®æ’åºæŒ‡å®šæ•°é‡è¿›è¡Œåˆ†åŒºç¼–å·ï¼ˆåˆ†åŒºç¼–å·æ’åºï¼‰\nselect \nemployee_id \n,last_name \n,department_id \n,salary \n,ntile(3) over(partition by department_id order by salary desc) \nfrom employees ","slug":"sqlæ’åå‡½æ•°","date":"2021-12-23T03:14:23.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"1a3e4bd78f5e4ca42de4b5c02b9d4f86","title":"sqlæŸ¥è¯¢è¿ç»­ç­¾åˆ°å¤©æ•°","content":"å…ˆå»ºè¡¨\ncreate table user_attendence(\nuser_id bigint comment &#39;ç”¨æˆ·å&#39;, \ndate TIMESTAMP comment &#39;æ—¥æœŸ&#39; ,\nis_sign bigint comment &#39;æ˜¯å¦ç™»å½•ï¼Œ0ä¸ºå¦ï¼Œ1ä¸ºæ˜¯&#39;);\n-- delete from user_attendence;\næ¥ä¸‹æ¥ç”¨pythonè‡ªå·±å¯¼å…¥éšæœºæ•°æ®,500ä¸ªç”¨æˆ·ã€æ—¶é—´2021-1-1~2021-5-5ã€‚\nimport pymysql\nimport pandas as pd\nfrom sqlalchemy import create_engine\nimport numpy as np\ndf &#x3D; pd.DataFrame()\ndate &#x3D; pd.date_range(&#39;2021-1-1&#39;,&#39;2021-5-5&#39;).strftime(&#39;%Y-%m-%d&#39;)\ndf[&quot;user_id&quot;]&#x3D;[i for i in np.arange(1,500)]*len(date)\ndf[&#39;date&#39;] &#x3D; [i for i in date]*len(np.arange(1,500))\ndf[&quot;is_sign&quot;] &#x3D; [np.random.choice([0,1]) for i in range(len(df))]\ndf &#x3D; df.sort_values(by&#x3D;[&#39;user_id&#39;,&#39;date&#39;],na_position&#x3D;&#39;first&#39;)\n#å†™å…¥æ•°æ®åº“\ncon &#x3D; &#39;mysql+pymysql:&#x2F;&#x2F;root:3333@localhost:3306&#x2F;supermanzwg?charset&#x3D;utf8&#39;\n#å¦‚æœå‡ºç°å­—ç¬¦ä¸²ç¼–ç é”™è¯¯è®°å¾—åœ¨Navicatè¿è¡Œalter table è¡¨å convert to character set utf8mb4;\ndf.to_sql(name&#x3D;&#39;user_attendence&#39;,con&#x3D;con,if_exists&#x3D;&#39;append&#39;,index &#x3D; False)\n#æˆªè‡³å½“å‰ï¼Œæ¯ä¸ªç”¨æˆ·å·²ç»è¿ç»­ç­¾åˆ°çš„å¤©æ•°æŸ¥å‡ºæœ€åä¸€æ¬¡ä¸ç™»å½•çš„æ—¥æœŸï¼Œä¸å½“å‰æ—¥æœŸè¿›è¡Œæ¯”è¾ƒï¼ŒäºŒè€…å·®å€¼ä¸ºå‡ å°±æ˜¯è¿ç»­ç™»å½•å‡ å¤©\nselect max(date) from user_attendence;\nselect \nuser_id ,\nmax(date),\nDATEDIFF(&#39;2021-02-19&#39;,max(date)) as max_con_days\nfrom user_attendence \nwhere is_sign &#x3D; 0 \ngroup by user_id;\n#è®¡ç®—æœ‰å²ä»¥æ¥ç”¨æˆ·æœ€å¤§è¿ç»­ç­¾åˆ°å¤©æ•°ï¼›å¯¹ç”¨æˆ·åˆ†ç»„ï¼ŒæŒ‰æ—¥æœŸè¿›è¡Œæ’åºï¼Œæ’åºåºå·ä¸ºrank;å¦‚æœæ—¥æœŸä¸åºå·çš„å·®å€¼ä¸ºç›¸ç­‰ï¼ŒæŒ‰è¿™ä¸ªå·®å€¼è¿›è¡Œåˆ†ç»„å¹¶è®¡æ•°ï¼Œå–æœ€å¤§å€¼\nselect \nuser_id\n,max(&#96;æ¬¡æ•°&#96;)  &#96;æœ€å¤§è¿ç»­ç™»é™†å¤©æ•°&#96;\nfrom \n    (select user_id\n    ,date\n    ,a.date-a.rn diff\n    ,count(*) &#96;æ¬¡æ•°&#96;\n    from \n        (select \n        user_id\n        ,date,\n        row_number() over(partition by user_id order by date asc) rn\n        from user_attendence  \n        where is_sign &#x3D; 1\n        ) a \n    group by user_id,diff\n    ) b \ngroup by user_id order by max(&#96;æ¬¡æ•°&#96;) desc;","slug":"sqlæŸ¥è¯¢è¿ç»­ç­¾åˆ°å¤©æ•°","date":"2021-12-20T08:23:46.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"a556aaed3b3be5cc651b39ff50e6148d","title":"mysql_tips","content":"\nå››ä¸ªåœ¨å·¥ä½œåæ‰çŸ¥é“çš„SQLå¯†æŠ€\nhttps://zhuanlan.zhihu.com/p/412878736\n\nmysqlåŸºç¡€https://blog.csdn.net/weixin_45108087/article/details/102766281\n\nMYSQLä¸­çš„COLLATEæ˜¯ä»€ä¹ˆï¼Ÿhttps://blog.csdn.net/weixin_34194317/article/details/92720517\n\nmysqlä¸­key ã€primary key ã€unique key ä¸indexåŒºåˆ«https://blog.csdn.net/nanaMasuda/article/details/52543177\n\nMySQLä¸­REGEXPæ­£åˆ™è¡¨è¾¾å¼https://blog.csdn.net/u011271894/article/details/79705869\n\nmysqlä¸­distinctåé¢ä¸¤ä¸ªå­—æ®µ: åŒæ—¶ä½œç”¨äº†ä¸¤ä¸ªå­—æ®µï¼Œä¹Ÿå°±æ˜¯å¿…é¡»å¾—è¿™ä¸¤ä¸ªå­—æ®µéƒ½ç›¸åŒçš„æ‰ä¼šè¢«æ’é™¤\n\nMySqlä¸­æŠŠä¸€ä¸ªè¡¨çš„æ•°æ®æ’å…¥åˆ°å¦ä¸€ä¸ªè¡¨ä¸­https://www.cnblogs.com/jiangxiaobo/p/7722691.html\n\nMysql æ ¹æ®ä¸€ä¸ªè¡¨æ•°æ®æ›´æ–°å¦å¤–ä¸€ä¸ªè¡¨https://www.cnblogs.com/wu628/p/4948833.html\ninsert into table_2 (promotion_price,promotion) SELECT å­—æ®µ1ï¼Œå­—æ®µ2ï¼Œ...  FROM table_1 where table_1.id is not in (\nselect id from  table_2 );\nconcatä»¥åŠgroup_concatçš„ç”¨æ³•https://baijiahao.baidu.com/s?id=1595349117525189591&amp;wfr=spider&amp;for=pc\n\nå­—ç¬¦ä¸²æˆªå–æ€»ç»“ï¼šleft()ã€right()ã€substring()ã€substring_index()https://blog.csdn.net/wolinxuebin/article/details/7845917\n\nreplaceçš„ç”¨æ³•https://www.cnblogs.com/to-creat/p/6516375.html\n\nmysqlä¸­joinçš„ç”¨æ³•https://www.cnblogs.com/beili/p/9140019.html\n\nMySQLè®¡ç®—æ—¥æœŸçš„å‡½æ•°DATE_SUB(d,INTERVAL expr type)https://blog.csdn.net/sinat_34979528/article/details/54571316\n\nMySQL DATE_ADD() å‡½æ•°https://www.w3school.com.cn/sql/func_date_add.asp\n\nsqlä¸­intervalç”¨æ³•æ€»ç»“https://blog.csdn.net/weixin_42586373/article/details/107467914\n\nSQLä¸­çš„cast()å‡½æ•°https://www.jianshu.com/p/e8ed290426b6\n\nMySQL UNION æ“ä½œç¬¦https://www.runoob.com/mysql/mysql-union-operation.html\n\nROW_NUMBER() OVER()å‡½æ•°ç”¨æ³•è¯¦è§£ ï¼ˆåˆ†ç»„æ’åº ä¾‹å­å¤šï¼‰https://blog.csdn.net/qq_25221835/article/details/82762416\n\nhiveä¸­regexp_extractçš„ç”¨æ³•æ€»ç»“https://blog.csdn.net/jv_rookie/article/details/55211955\n\n\n","slug":"mysql-tips","date":"2021-12-13T08:35:58.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"7df2c9f61f81e14813ba612502b886c1","title":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼šæ“ä½œexcel","content":"#python ä½¿ç”¨ openpyxl æ“ä½œ excel\n\nopenpyxl æœ€å¥½ç”¨çš„ python æ“ä½œ excel è¡¨æ ¼åº“ï¼Œä¸æ¥å—åé©³ï¼ˆæƒ³åé©³è‡ªå·±å»å­¦å…¶ä»–çš„ï¼‰ \n\nopenpyxl å®˜ç½‘é“¾æ¥ï¼šhttps://openpyxl.readthedocs.io/en/stable/\n\nhttps://www.zhihu.com/column/c_1261255815367487488\n\nopenpyxl åªæ”¯æŒã€.xlsx / .xlsm / .xltx / .xltmã€‘æ ¼å¼çš„æ–‡ä»¶\n\nå»ºè®®åœ¨jupyter-notebooké‡Œé¢æ“ä½œ\næ‰“å¼€ Excel è¡¨æ ¼å¹¶è·å–è¡¨æ ¼åç§°ï¼›é€šè¿‡ sheet åç§°è·å–è¡¨æ ¼from openpyxl import load_workbook \nworkbook &#x3D; load_workbook(filename &#x3D; &quot;test.xlsx&quot;) \nworkbook.sheetnames #æ‰“å¼€ Excel è¡¨æ ¼å¹¶è·å–è¡¨æ ¼åç§°\nsheet &#x3D; workbook[&quot;Sheet1&quot;] #é€šè¿‡ sheet åç§°è·å–è¡¨æ ¼\nsheet.dimensions # è·å–è¡¨æ ¼çš„å°ºå¯¸å¤§å°(å‡ è¡Œå‡ åˆ—æ•°æ®)\nè·å–è¡¨æ ¼å†…æŸä¸ªæ ¼å­çš„æ•°æ®workbook &#x3D; load_workbook(filename &#x3D; &quot;test.xlsx&quot;) \nsheet &#x3D; workbook.active #æ‰“å¼€æ¿€æ´»çš„è¡¨æ ¼\nprint(sheet) \ncell1 &#x3D; sheet[&quot;A1&quot;] #è·å– A1 æ ¼å­çš„æ•°æ®\ncell2 &#x3D; sheet[&quot;C11&quot;] \ncell3 &#x3D; sheet.cell(row &#x3D; 1,column &#x3D; 1) #é€šè¿‡æŒ‡å®šè¡Œåˆ—å·è·å–æ ¼å­æ•°æ®\ncell4 &#x3D; sheet.cell(row &#x3D; 11,column &#x3D; 3)\nprint(cell1.value, cell1.row, cell1.column, cell1.coordinate) \n#è·å–æ ¼å­ä¸­çš„å€¼ã€è¡Œæ•°ã€åˆ—æ•°ã€åæ ‡ï¼›\nsheet[&quot;A&quot;] --- è·å– A åˆ—çš„æ•°æ®\nsheet[&quot;A:C&quot;] --- è·å– A,B,C ä¸‰åˆ—çš„æ•°æ®\nsheet[5] --- åªè·å–ç¬¬ 5 è¡Œçš„æ•°æ®\n# è·å– A1:C2 åŒºåŸŸçš„å€¼\ncell &#x3D; sheet[&quot;A1:C2&quot;] \nprint(cell) \nfor i in cell: \n  for j in i: \n    print(j.value)\n.iter_rows()æ–¹å¼ï¼ˆç±»ä¼¼pandasé‡Œé¢çš„iterrowsï¼‰æœ‰.iter_rows()æ–¹å¼ï¼Œè‚¯å®šä¹Ÿä¼šæœ‰.iter_cols()æ–¹å¼ï¼Œåªä¸è¿‡ä¸€ä¸ªæ˜¯æŒ‰è¡Œè¯»å–ï¼Œä¸€ä¸ªæ˜¯æŒ‰åˆ—è¯»å–ã€‚\nworkbook &#x3D; load_workbook(filename &#x3D; &quot;test.xlsx&quot;) \nsheet &#x3D; workbook.active \nprint(sheet) \n# æŒ‰è¡Œè·å–å€¼\nfor i in sheet.iter_rows(min_row&#x3D;2, max_row&#x3D;5, min_col&#x3D;1, max_col&#x3D;2): #æŒ‰è¡Œè¯»å–\n  for j in i: \n    print(j.value)\n# æŒ‰åˆ—è·å–å€¼\nfor i in sheet.iter_cols(min_row&#x3D;2, max_row&#x3D;5, min_col&#x3D;1, max_col&#x3D;2): #æŒ‰åˆ—è¯»å–\n  for j in i: \n    print(j.value)\nfor i in sheet.rows: #è·å–æ‰€æœ‰è¡Œ\n  print(i)\nä¿®æ”¹è¡¨æ ¼ä¸­çš„å†…å®¹: å‘æŸä¸ªæ ¼å­ä¸­å†™å…¥å†…å®¹å¹¶ä¿å­˜workbook &#x3D; load_workbook(filename &#x3D; &quot;test.xlsx&quot;) \nsheet &#x3D; workbook.active \nprint(sheet)\nsheet[&quot;A1&quot;] &#x3D; &quot;å“ˆå–½&quot; \n# è¿™å¥ä»£ç ä¹Ÿå¯ä»¥æ”¹ä¸º cell &#x3D; sheet[&quot;A1&quot;] cell.value &#x3D; &quot;å“ˆå–½&quot; \nworkbook.save(filename &#x3D; &quot;å“ˆå–½.xlsx&quot;) \n&quot;&quot;&quot; \næ³¨æ„ï¼šæˆ‘ä»¬å°†â€œA1â€å•å…ƒæ ¼çš„æ•°æ®æ”¹ä¸ºäº†â€œå“ˆå–½â€ï¼Œå¹¶å¦å­˜ä¸ºäº†â€œå“ˆå–½.xlsxâ€æ–‡\nä»¶ã€‚ å¦‚æœæˆ‘ä»¬ä¿å­˜çš„æ—¶å€™ï¼Œä¸ä¿®æ”¹è¡¨åï¼Œç›¸å½“äºç›´æ¥ä¿®æ”¹æºæ–‡ä»¶ï¼›\n&quot;&quot;&quot;\n.append()æ–¹å¼ï¼šä¼šåœ¨è¡¨æ ¼å·²æœ‰çš„æ•°æ®åé¢ï¼ŒæŒ‰è¡Œæ’å…¥æ•°æ®(å¾ˆæœ‰ç”¨)ï¼›\nworkbook &#x3D; load_workbook(filename &#x3D; &quot;test.xlsx&quot;) \nsheet &#x3D; workbook.active\nprint(sheet) \ndata &#x3D; [ \n[&quot;å”åƒ§&quot;,&quot;ç”·&quot;,&quot;180cm&quot;], \n[&quot;å­™æ‚Ÿç©º&quot;,&quot;ç”·&quot;,&quot;188cm&quot;], \n[&quot;çŒªå…«æˆ’&quot;,&quot;ç”·&quot;,&quot;175cm&quot;], \n[&quot;æ²™åƒ§&quot;,&quot;ç”·&quot;,&quot;176cm&quot;], \n] \nfor row in data: \n  sheet.append(row) \nworkbook.save(filename &#x3D; &quot;test.xlsx&quot;)\nä½¿ç”¨ excel å‡½æ•°å…¬å¼(å¾ˆæœ‰ç”¨)import openpyxl\nfrom openpyxl.utils import FORMULAE \nprint(FORMULAE)#python æ”¯æŒå†™å“ªäº›â€œexcel å‡½æ•°å…¬å¼â€\n# è¿™æ˜¯æˆ‘ä»¬åœ¨ excel ä¸­è¾“å…¥çš„å…¬å¼\n&#x3D;IF(RIGHT(C2,2)&#x3D;&quot;cm&quot;,C2,SUBSTITUTE(C2,&quot;m&quot;,&quot;&quot;)*100&amp;&quot;cm&quot;) \n# é‚£ä¹ˆï¼Œåœ¨ python ä¸­æ€ä¹ˆæ’å…¥ excel å…¬å¼å‘¢ï¼Ÿ\nworkbook &#x3D; load_workbook(filename &#x3D; &quot;test.xlsx&quot;) \nsheet &#x3D; workbook.active \nprint(sheet) \nsheet[&quot;D1&quot;] &#x3D; &quot;æ ‡å‡†èº«é«˜&quot; \nfor i in range(2,16): \n  sheet[&quot;D&#123;&#125;&quot;.format(i)] &#x3D; \n  &#39;&#x3D;IF(RIGHT(C&#123;&#125;,2)&#x3D;&quot;cm&quot;,C&#123;&#125;,SUBSTITUTE(C&#123;&#125;,&quot;m&quot;,&quot;&quot;)*100&amp;&quot;cm&quot;)&#39;.format(i,i,i) \nworkbook.save(filename &#x3D; &quot;test.xlsx&quot;)\n.insert_cols()å’Œ.insert_rows()ï¼šæ’å…¥ç©ºè¡Œå’Œç©ºåˆ—\n.insert_cols(idx=æ•°å­—ç¼–å·, amount=è¦æ’å…¥çš„åˆ—æ•°)ï¼Œæ’å…¥çš„ä½ç½®æ˜¯åœ¨ idx åˆ—æ•°çš„å·¦ä¾§æ’å…¥ï¼›\n\n.insert_rows(idx=æ•°å­—ç¼–å·, amount=è¦æ’å…¥çš„è¡Œæ•°)ï¼Œæ’å…¥çš„è¡Œæ•°æ˜¯åœ¨ idx è¡Œæ•°çš„ä¸‹æ–¹æ’å…¥ï¼›\nworkbook &#x3D; load_workbook(filename &#x3D; &quot;test.xlsx&quot;) \nsheet &#x3D; workbook.active \nprint(sheet) \nsheet.insert_cols(idx&#x3D;4,amount&#x3D;2) #ä»ç¬¬4åˆ—å¼€å§‹æ’å…¥2åˆ—\nsheet.insert_rows(idx&#x3D;5,amount&#x3D;4) #ç¬¬5è¡Œå¼€å§‹æ’å…¥2è¡Œ\nworkbook.save(filename &#x3D; &quot;test.xlsx&quot;)\n\n.delete_rows()å’Œ.delete_cols()ï¼šåˆ é™¤è¡Œå’Œåˆ—\n.delete_rows(idx=æ•°å­—ç¼–å·, amount=è¦åˆ é™¤çš„è¡Œæ•°)\n.delete_cols(idx=æ•°å­—ç¼–å·, amount=è¦åˆ é™¤çš„åˆ—æ•°)workbook &#x3D; load_workbook(filename &#x3D; &quot;test.xlsx&quot;) \nsheet &#x3D; workbook.active print(sheet) \n# åˆ é™¤ç¬¬ä¸€åˆ—ï¼Œç¬¬ä¸€è¡Œ\nsheet.delete_cols(idx&#x3D;1) \nsheet.delete_rows(idx&#x3D;1) \nworkbook.save(filename &#x3D; &quot;test.xlsx&quot;)\n.move_range()ï¼šç§»åŠ¨æ ¼å­\n.move_range(â€œæ•°æ®åŒºåŸŸâ€,rows=,cols=)ï¼šrowæ­£æ•´æ•°è¡¨ç¤ºå‘ä¸‹ã€è´Ÿæ•´æ•°è¡¨ç¤ºå‘ä¸Šç§»åŠ¨ï¼›colsæ­£æ•´æ•°è¡¨ç¤ºå‘å³ã€è´Ÿæ•´æ•°è¡¨ç¤ºå‘å·¦ç§»åŠ¨ã€‚\n\nsheet.move_range(&quot;C1:D4&quot;,rows&#x3D;2,cols&#x3D;-1)# å‘å·¦ç§»åŠ¨ä¸¤åˆ—ï¼Œå‘ä¸‹ç§»åŠ¨ä¸¤è¡Œ\n.create_sheet()ï¼šåˆ›å»ºæ–°çš„ sheet è¡¨æ ¼\n.create_sheet(â€œæ–°çš„ sheet åâ€)ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ sheet è¡¨ï¼›workbook &#x3D; load_workbook(filename &#x3D; &quot;test.xlsx&quot;) \nsheet &#x3D; workbook.active \nprint(sheet) \nworkbook.create_sheet(&quot;æˆ‘æ˜¯ä¸€ä¸ªæ–°çš„ sheet&quot;) \nprint(workbook.sheetnames) \nworkbook.save(filename &#x3D; &quot;test.xlsx&quot;)\n\n.remove()ï¼šåˆ é™¤æŸä¸ª sheet è¡¨\n.remove(â€œsheet åâ€)ï¼šåˆ é™¤æŸä¸ª sheet è¡¨ï¼›workbook &#x3D; load_workbook(filename &#x3D; &quot;test.xlsx&quot;) \nsheet &#x3D; workbook.active \nprint(workbook.sheetnames) \n# è¿™ä¸ªç›¸å½“äºæ¿€æ´»çš„è¿™ä¸ª sheet è¡¨ï¼Œæ¿€æ´»çŠ¶æ€ä¸‹ï¼Œæ‰å¯ä»¥æ“ä½œï¼›\nsheet &#x3D; workbook[&#39;æˆ‘æ˜¯ä¸€ä¸ªæ–°çš„ sheet&#39;] \nprint(sheet) \nworkbook.remove(sheet) \nprint(workbook.sheetnames) \nworkbook.save(filename &#x3D; &quot;test.xlsx&quot;)\n\n.copy_worksheet()ï¼šå¤åˆ¶ä¸€ä¸ª sheet è¡¨åˆ°å¦å¤–ä¸€å¼  excel è¡¨\nè¿™ä¸ªæ“ä½œçš„å®è´¨ï¼Œå°±æ˜¯å¤åˆ¶æŸä¸ª excel è¡¨ä¸­çš„ sheet è¡¨ï¼Œç„¶åå°†æ–‡ä»¶å­˜å‚¨åˆ°å¦å¤–ä¸€å¼ excel è¡¨ä¸­workbook &#x3D; load_workbook(filename &#x3D; &quot;a.xlsx&quot;) \nsheet &#x3D; workbook.active \nprint(&quot;a.xlsx ä¸­æœ‰è¿™å‡ ä¸ª sheet è¡¨&quot;,workbook.sheetnames) \nsheet &#x3D; workbook[&#39;å§“å&#39;] \nworkbook.copy_worksheet(sheet) \nworkbook.save(filename &#x3D; &quot;test.xlsx&quot;)\n\nsheet.titleï¼šä¿®æ”¹ sheet è¡¨çš„åç§°workbook &#x3D; load_workbook(filename &#x3D; &quot;a.xlsx&quot;) \nsheet &#x3D; workbook.active \nprint(sheet) \nsheet.title &#x3D; &quot;æˆ‘æ˜¯ä¿®æ”¹åçš„ sheet å&quot; \nprint(sheet)\n\nåˆ›å»ºæ–°çš„ excel è¡¨æ ¼æ–‡ä»¶from openpyxl import Workbook \nworkbook &#x3D; Workbook() \nsheet &#x3D; workbook.active \nsheet.title &#x3D; &quot;è¡¨æ ¼ 1&quot; \nworkbook.save(filename &#x3D; &quot;æ–°å»ºçš„ excel è¡¨æ ¼&quot;)\n\nsheet.freeze_panesï¼šå†»ç»“çª—å£\n.freeze_panes = â€œå•å…ƒæ ¼â€workbook &#x3D; load_workbook(filename &#x3D; &quot;èŠ±å›­.xlsx&quot;) \nsheet &#x3D; workbook.active \nprint(sheet) \nsheet.freeze_panes &#x3D; &quot;C3&quot; \nworkbook.save(filename &#x3D; &quot;èŠ±å›­.xlsx&quot;) \n&quot;&quot;&quot; \nå†»ç»“çª—å£ä»¥åï¼Œä½ å¯ä»¥æ‰“å¼€æºæ–‡ä»¶ï¼Œè¿›è¡Œæ£€éªŒï¼›\n&quot;&quot;&quot;\n\nsheet.auto_filter.refï¼šç»™è¡¨æ ¼æ·»åŠ â€œç­›é€‰å™¨â€\n.auto_filter.ref = sheet.dimension ç»™æ‰€æœ‰å­—æ®µæ·»åŠ ç­›é€‰å™¨ï¼›\n.auto_filter.ref = â€œA1â€ ç»™ A1 è¿™ä¸ªæ ¼å­æ·»åŠ â€œç­›é€‰å™¨â€ï¼Œå°±æ˜¯ç»™ç¬¬ä¸€åˆ—æ·»åŠ â€œç­›é€‰å™¨â€ï¼›workbook &#x3D; load_workbook(filename &#x3D; &quot;èŠ±å›­.xlsx&quot;) \nsheet &#x3D; workbook.active \nprint(sheet) \nsheet.auto_filter.ref &#x3D; sheet[&quot;A1&quot;] \nworkbook.save(filename &#x3D; &quot;èŠ±å›­.xlsx&quot;)\n\næ‰¹é‡è°ƒæ•´å­—ä½“å’Œæ ·å¼1ã€ä¿®æ”¹å­—ä½“æ ·å¼\nFont(name=å­—ä½“åç§°,size=å­—ä½“å¤§å°,bold=æ˜¯å¦åŠ ç²—,italic=æ˜¯å¦æ–œä½“,color=å­—ä½“é¢œè‰²)from openpyxl.styles import Font \nfrom openpyxl import load_workbook \nworkbook &#x3D; load_workbook(filename&#x3D;&quot;èŠ±å›­.xlsx&quot;) \nsheet &#x3D; workbook.active \ncell &#x3D; sheet[&quot;A1&quot;] \nfont &#x3D; Font(name&#x3D;&quot;å¾®è½¯é›…é»‘&quot;,size&#x3D;20,bold&#x3D;True,italic&#x3D;True,color&#x3D;&quot;FF0000&quot;) \ncell.font &#x3D; font\nworkbook.save(filename &#x3D; &quot;èŠ±å›­.xlsx&quot;) \n&quot;&quot;&quot; \nè¿™ä¸ª color æ˜¯ RGB çš„ 16 è¿›åˆ¶è¡¨ç¤ºï¼Œè‡ªå·±ä¸‹å»ç™¾åº¦å­¦ä¹ ï¼›\n&quot;&quot;&quot;\n\n2ã€è·å–è¡¨æ ¼ä¸­æ ¼å­çš„å­—ä½“æ ·å¼from openpyxl.styles import Font \nfrom openpyxl import load_workbook \nworkbook &#x3D; load_workbook(filename&#x3D;&quot;èŠ±å›­.xlsx&quot;) \nsheet &#x3D; workbook.active \ncell &#x3D; sheet[&quot;A2&quot;] \nfont &#x3D; cell.font \nprint(font.name, font.size, font.bold, font.italic, font.color)\n\n3ã€è®¾ç½®å¯¹é½æ ·å¼\nAlignment(horizontal=æ°´å¹³å¯¹é½æ¨¡å¼,vertical=å‚ç›´å¯¹é½æ¨¡å¼,text_rotation=æ—‹è½¬è§’åº¦,wrap_text=æ˜¯å¦è‡ªåŠ¨æ¢è¡Œ)\n\næ°´å¹³å¯¹é½ï¼šâ€˜distributedâ€™ï¼Œâ€˜justifyâ€™ï¼Œâ€˜centerâ€™ï¼Œâ€˜leftfillâ€™ï¼Œ â€˜centerContinuousâ€™ï¼Œâ€˜rightï¼Œâ€˜generalâ€™ï¼›\n\nå‚ç›´å¯¹é½ï¼šâ€˜bottomâ€™ï¼Œâ€˜distributedâ€™ï¼Œâ€˜justifyâ€™ï¼Œâ€˜centerâ€™ï¼Œâ€˜topâ€™ï¼›\nfrom openpyxl.styles import Alignment \nfrom openpyxl import load_workbook \nworkbook &#x3D; load_workbook(filename&#x3D;&quot;èŠ±å›­.xlsx&quot;) \nsheet &#x3D; workbook.active \ncell &#x3D; sheet[&quot;A1&quot;]\nalignment &#x3D; Alignment(horizontal&#x3D;&quot;center&quot;,vertical&#x3D;&quot;center&quot;,text_rotation&#x3D;45,wrap_text&#x3D;True) \ncell.alignment &#x3D; alignment \nworkbook.save(filename &#x3D; &quot;èŠ±å›­.xlsx&quot;)\n4ã€è®¾ç½®è¾¹æ¡†æ ·å¼\nSide(style=è¾¹çº¿æ ·å¼ï¼Œcolor=è¾¹çº¿é¢œè‰²)\n\nBorder(left=å·¦è¾¹çº¿æ ·å¼ï¼Œright=å³è¾¹çº¿æ ·å¼ï¼Œtop=ä¸Šè¾¹çº¿æ ·å¼ï¼Œbottom=ä¸‹è¾¹çº¿æ ·å¼)\n\nstyle å‚æ•°çš„ç§ç±»ï¼š â€˜double, â€˜mediumDashDotDotâ€™, â€˜slantDashDotâ€™, â€˜dashDotDotâ€™,â€™dottedâ€™,â€™hairâ€™,â€˜mediumDashed, â€˜dashedâ€™, â€˜dashDotâ€™, â€˜thinâ€™, â€˜mediumDashDotâ€™,â€™mediumâ€™, â€˜thickâ€™\nfrom openpyxl.styles import Side,Border \nfrom openpyxl import load_workbook \nworkbook &#x3D; load_workbook(filename&#x3D;&quot;èŠ±å›­.xlsx&quot;) \nsheet &#x3D; workbook.active \ncell &#x3D; sheet[&quot;D6&quot;]\nside1 &#x3D; Side(style&#x3D;&quot;thin&quot;,color&#x3D;&quot;FF0000&quot;) \nside2 &#x3D; Side(style&#x3D;&quot;thick&quot;,color&#x3D;&quot;FFFF0000&quot;) \nborder &#x3D; Border(left&#x3D;side1,right&#x3D;side1,top&#x3D;side2,bottom&#x3D;side2) \ncell.border &#x3D; border \nworkbook.save(filename &#x3D; &quot;èŠ±å›­.xlsx&quot;)\n\n5ã€è®¾ç½®å¡«å……æ ·å¼\nPatternFill(fill_type=å¡«å……æ ·å¼ï¼ŒfgColor=å¡«å……é¢œè‰²ï¼‰\n\nGradientFill(stop=(æ¸å˜é¢œè‰² 1ï¼Œæ¸å˜é¢œè‰² 2â€¦â€¦))\nfrom openpyxl.styles import PatternFill,GradientFill \nfrom openpyxl import load_workbook \nworkbook &#x3D; load_workbook(filename&#x3D;&quot;èŠ±å›­.xlsx&quot;) \nsheet &#x3D; workbook.active \ncell_b9 &#x3D; sheet[&quot;B9&quot;] \npattern_fill &#x3D; PatternFill(fill_type&#x3D;&quot;solid&quot;,fgColor&#x3D;&quot;99ccff&quot;) \ncell_b9.fill &#x3D; pattern_fill \ncell_b10 &#x3D; sheet[&quot;B10&quot;]\ngradient_fill &#x3D; GradientFill(stop&#x3D;(&quot;FFFFFF&quot;,&quot;99ccff&quot;,&quot;000000&quot;)) \ncell_b10.fill &#x3D; gradient_fill \nworkbook.save(filename &#x3D; &quot;èŠ±å›­.xlsx&quot;)\n6ã€è®¾ç½®è¡Œé«˜å’Œåˆ—å®½\n.row_dimensions[è¡Œç¼–å·].height = è¡Œé«˜\n\n.column_dimensions[åˆ—ç¼–å·].width = åˆ—å®½\nworkbook &#x3D; load_workbook(filename&#x3D;&quot;èŠ±å›­.xlsx&quot;) \nsheet &#x3D; workbook.active \n# è®¾ç½®ç¬¬ 1 è¡Œçš„é«˜åº¦\nsheet.row_dimensions[1].height &#x3D; 50 #å°†æ•´ä¸ªè¡¨çš„è¡Œé«˜è®¾ç½®ä¸º 50\n# è®¾ç½® B åˆ—çš„å®½åº¦\nsheet.column_dimensions[&quot;B&quot;].width &#x3D; 20 #åˆ—å®½è®¾ç½®ä¸º 30ï¼›\nworkbook.save(filename &#x3D; &quot;èŠ±å›­.xlsx&quot;)\n\n7ã€åˆå¹¶å•å…ƒæ ¼\n.merge_cells(å¾…åˆå¹¶çš„æ ¼å­ç¼–å·)\n.merge_cells(start_row=èµ·å§‹è¡Œå·ï¼Œstart_column=èµ·å§‹åˆ—å·ï¼Œend_row=ç»“æŸè¡Œå·ï¼Œend_column=ç»“æŸåˆ—å·)workbook &#x3D; load_workbook(filename&#x3D;&quot;èŠ±å›­.xlsx&quot;)\nsheet &#x3D; workbook.active sheet.merge_cells(&quot;C1:D2&quot;) \nsheet.merge_cells(start_row&#x3D;7,start_column&#x3D;1,end_row&#x3D;8,end_column&#x3D;3) \nworkbook.save(filename &#x3D; &quot;èŠ±å›­.xlsx&quot;)\nå½“ç„¶ï¼Œä¹Ÿæœ‰â€œå–æ¶ˆåˆå¹¶å•å…ƒæ ¼â€ï¼Œç”¨æ³•ä¸€è‡´ã€‚\n.unmerge_cells(å¾…åˆå¹¶çš„æ ¼å­ç¼–å·)\n.unmerge_cells(start_row=èµ·å§‹è¡Œå·ï¼Œstart_column=èµ·å§‹åˆ—å·ï¼Œend_row=ç»“æŸè¡Œå·ï¼Œend_column=ç»“æŸåˆ—å·)\n\n","slug":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼šæ“ä½œexcel","date":"2021-12-08T14:28:43.000Z","categories_index":"","tags_index":"è‡ªåŠ¨åŒ–","author_index":"Aurora"},{"id":"8a288770ed82450aa993ccbeacfd0367","title":"pythonä¸­requestsä½¿ç”¨ä¸­æ–‡ä¹±ç çš„è§£å†³æ–¹æ¡ˆ","content":"\n ä¸­æ–‡ä¹±ç å¤„ç†import requests\n\nurl &#x3D; &quot;http:&#x2F;&#x2F;www.baidu.com&quot;\nr &#x3D; requests.get(url)\n# è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ç¼–ç æ–¹å¼\nr.encoding &#x3D; r.apparent_encoding\nprint(r.text)\nä¸­æ–‡ä¹±ç æ˜¾ç¤ºæ­£å¸¸äº†ï¼ï¼\n\næœ‰æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜ä¼šé‡åˆ°é€šè¿‡è¿™ä¸ªæ“ä½œåæ— æ³•è§£å†³çš„æƒ…å†µï¼Œæ¯”å¦‚æ–°æµªé¦–é¡µçš„è¡¨ç°ï¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œæ®è¯´æ˜¯ä½¿ç”¨gzipå°†ç½‘é¡µå‹ç¼©äº†ï¼Œå¿…é¡»å…ˆå¯¹å…¶è§£ç ï¼Œä½¿ç”¨r.contentä¼šè‡ªåŠ¨è§£ç ï¼š\nimport requests\n\nurl &#x3D; &quot;http:&#x2F;&#x2F;www.sina.com.cn&#x2F;&quot;\nr &#x3D; requests.get(url)\n# æŒ‡å®šç¼–ç è§£ç æ–¹å¼\nhtml &#x3D; r.content.decode(&#39;UTF-8&#39;)\n# r.encoding &#x3D; &#39;utf-8&#39;\nå…¶å®å§ï¼Œå¤„ç†çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œå¤§å®¶æ³¨æ„ä¸€ç‚¹ï¼Œé‚£å°±æ˜¯çœ‹è¯·æ±‚çš„htmlæ•°æ®ä¸­æœ€å‰é¢å¯¹çš„charsetè®¾ç½®çš„æ˜¯å•¥ï¼ï¼\n\n htmlå®ä½“ç¼–ç è§£æ\nIn [1]: s &#x3D; &#39;ç›®å‰ç©çš„æŒºå¥½çš„ï¼Œå°±&amp;hellip;&amp;hellip;&lt;br&gt;ç»™å››æ˜Ÿæ˜¯å› ä¸ºä¸ºä»€ä¹ˆä¸æ˜¯åŒä¸€ä¸ªæœçš„å°±ä¸èƒ½è¿›ç¤¾å›¢ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬&#39;\n#å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸ª&#39;&amp;hellip;&#39;ï¼Œè¿™ç©æ„æ˜¯htmlå®ä½“è¡¨ç¤ºçœç•¥å·&#39;...&#39;ï¼Œå› æ­¤éœ€è¦è¿›è¡Œå¤„ç†ï¼\nIn [2]: import html\n\nIn [3]: html.unescape(s)\nOut[3]: &#39;ç›®å‰ç©çš„æŒºå¥½çš„ï¼Œå°±â€¦â€¦&lt;br&gt;ç»™å››æ˜Ÿæ˜¯å› ä¸ºä¸ºä»€ä¹ˆä¸æ˜¯åŒä¸€ä¸ªæœçš„å°±ä¸èƒ½è¿›ç¤¾å›¢ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬&#39;\nä¹Ÿæ˜¯ä¸€ç§æƒ…å†µå§~\n\n\nhttps://www.cnblogs.com/xieqiankun/p/lxmlencoding.html\næ˜¾ç„¶è¿™åº”è¯¥æ˜¯ç¼–ç çš„é—®é¢˜ï¼Œåœ¨ä½¿ç”¨:\netree.HTML(r)\nå¤„ç†æºæ–‡ä»¶çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰æŒ‡å®šç¼–ç ï¼Œæ‰€ä»¥å®ƒä½¿ç”¨äº†ä¸€ä¸ªé»˜è®¤ç¼–ç ï¼Œä»è€Œå¯¼è‡´å’ŒUTF-8å†²çªï¼Œäº§ç”Ÿä¹±ç ã€‚\n\nç»è¿‡æŸ¥é˜…lxml.etree.HTMLçš„æ–‡æ¡£ï¼Œæˆ‘å‘ç°etree.HTMLæœ‰ä¸€ä¸ªå‚æ•°æ˜¯parser,è¿™ä¸ªå‚æ•°ä¸æ˜¯å¿…é¡»çš„ï¼Œå› æ­¤çœç•¥ä»¥åå®ƒå°±ä¼šè‡ªåŠ¨ä½¿ç”¨ä¸€ä¸ªé»˜è®¤çš„parserã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æˆ‘æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªï¼š\ncontentTree &#x3D; etree.HTML(r, parser&#x3D;etree.HTMLParser(encoding&#x3D;&#39;utf-8&#39;))\nè¿™é‡Œæˆ‘æŒ‡å®šäº†etree.HTMLParseræ¥ä½œä¸ºä¸€ä¸ªparser,åŒæ—¶ï¼Œetree.HTMLParserå¯ä»¥æ¥å—ç¼–ç ä½œä¸ºå‚æ•°ã€‚äºæ˜¯æˆ‘æŒ‡å®šä¸ºUTF-8ã€‚\n\nimport requests\nfrom lxml import etree\nimport sys\nreload(sys)\nsys.setdefaultencoding(&quot;utf-8&quot;)\n\nr &#x3D; requests.get(url&#x3D;&#39;http:&#x2F;&#x2F;sports.sina.cn&#x2F;nba&#x2F;rockets&#x2F;2015-10-07&#x2F;detail-ifximrxn8235561.d.html?vt&#x3D;4&amp;pos&#x3D;10&#39;)# æœ€åŸºæœ¬çš„GETè¯·æ±‚\nr.encoding &#x3D; &#39;utf-8&#39;\nr &#x3D; r.content\nprint r","slug":"requestsä¹±ç é—®é¢˜è§£å†³","date":"2021-12-02T15:30:02.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"74df2b30e38d008e4f87b397961dd215","title":"Pythonæ•°æ®åˆ†æ :pandasæ•°æ®è¯»å–ã€é¢„å¤„ç†ã€ç­›é€‰ã€è®¡ç®—ï¼Œæ—¶é—´åºåˆ—ã€é€è§†ã€æ‹¼æ¥ã€å¯¼å‡º","content":"ä¸€ã€Pandasæ•°æ®ç»“æ„S1&#x3D;pd.Series([â€˜aâ€™,â€™bâ€™,â€™câ€™]) seriesæ˜¯ä¸€ç»„æ•°æ®ä¸ä¸€ç»„ç´¢å¼•ï¼ˆè¡Œç´¢å¼•ï¼‰ç»„æˆçš„æ•°æ®ç»“æ„\nS1&#x3D;pd.Series([â€˜aâ€™,â€™bâ€™,â€™câ€™],index&#x3D;(1,3,4)) æŒ‡å®šç´¢å¼•\nS1&#x3D;pd.Series(&#123;1:â€˜aâ€™,2:â€™bâ€™,3:â€™câ€™&#125;) ç”¨å­—å…¸å½¢å¼æŒ‡å®šç´¢å¼•\nS1.index() è¿”å›ç´¢å¼•\nS1.values() è¿”å›å€¼\nDf&#x3D;pd.DataFrame([â€˜aâ€™,â€™bâ€™,â€™câ€™]) dataframeæ˜¯ä¸€ç»„æ•°æ®ä¸ä¸¤ç»„ç´¢å¼•ï¼ˆè¡Œåˆ—ç´¢å¼•ï¼‰ç»„æˆçš„æ•°æ®ç»“æ„\nDf&#x3D;pd.DataFrame([[a,A],[b,B],[c,C]],columns&#x3D;[â€˜å°å†™â€™,â€™å¤§å†™â€™]ï¼Œindex&#x3D;[â€˜ä¸€â€™,â€™äºŒâ€™,â€™ä¸‰â€™])\nColumms ä¸ºåˆ—ç´¢å¼•ï¼Œindexä¸ºè¡Œç´¢å¼•\npip install -i [https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple](https:&#x2F;&#x2F;link.zhihu.com&#x2F;?target&#x3D;https%3A&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple) pyspider æ¸…åé•œåƒ\n\næŸ¥æ‰¾æŸä¸ªåŒ… anaconda search -t conda tensorflowä¸‹è½½æŸä¸ªåŒ… anaconda show packagedata={â€˜å°å†™â€™:[â€˜aâ€™,â€™bâ€™,â€™câ€™],â€™å¤§å†™â€™:[â€˜Aâ€™,â€™Bâ€™,â€™Câ€™]} ä¼ å…¥å­—å…¸Df=Pd.DataFrame(data)Df.index() df.columns()\nå»ºç«‹åˆ†å±‚ç´¢å¼•çš„dataframeï¼špd.MultiIndex.from_arrays([[,,]],name=[,,]ï¼‰\n\näºŒã€è¯»å–æ•°æ®df&#x3D;pd.read_excel(râ€™C:\\user\\...xlsxâ€™,sheet_name&#x3D;â€™sheet1â€™) æˆ–\npd.read_excel(râ€™C:\\user\\...xlsxâ€™,sheet_name&#x3D;0) è¯»å–excelè¡¨\npd.read_excel(râ€™C:\\user\\...xlsxâ€™,index_col&#x3D;0,header&#x3D;0)\nindex_colæŒ‡å®šè¡Œç´¢å¼•ï¼ŒheaderæŒ‡å®šåˆ—ç´¢å¼•\npd.read_excel(râ€™C:\\user\\...xlsxâ€™,usecols&#x3D;[0,1]) å¯¼å…¥æŒ‡å®šåˆ—,ä¸èƒ½æœ‰index_colå’Œheader\npd.read_tablel(râ€™C:\\user\\...txtâ€™ï¼Œsep&#x3D;â€™ â€™) å¯¼å…¥txtæ–‡ä»¶,sepæŒ‡å®šåˆ†éš”ç¬¦æ˜¯ä»€ä¹ˆ\ndf.head(2) å±•ç¤ºå‰ä¸¤è¡Œï¼Œé»˜è®¤å±•ç¤ºå‰5è¡Œ\ndf.shape æ˜¾ç¤ºæ•°æ®å‡ è¡Œå‡ åˆ—ï¼Œä¸åŒ…å«è¡Œå’Œåˆ—ç´¢å¼•\ndf.info()å¯æŸ¥çœ‹è¡¨ä¸­æ•°æ®çš„ç±»å‹\ndf.describe() å¯è·å¾—è¡¨ä¸­æ•°å€¼ç±»å‹æŒ‡ç«¯çš„åˆ†å¸ƒå€¼ï¼ˆå’Œã€å¹³å‡å€¼ã€æ–¹å·®ç­‰ï¼‰\n\nè·å–Excelæ–‡ä»¶ä¸‹æ‰€æœ‰çš„sheetåç§°# è¯»å–æ‰€æœ‰Sheet\ndf &#x3D; pd.read_excel(&#39;456.xlsx&#39;, sheet_name&#x3D;None)\n# ç¬¬ä¸€ç§\nfor i in df.keys():\n    print(i)\n# ç¬¬äºŒç§\ndf &#x3D; pd.read_excel(&#39;456.xlsx&#39;, sheet_name&#x3D;None)\nprint(list(df))\n\nä¸‰ã€æ•°æ®é¢„å¤„ç†\nå¤šä¸ªSeriesåˆå¹¶æˆDataFrameï¼špd.DataFrame(list(zip(series_1, series_2)))\n\npythonåœ¨å­—ç¬¦ä¸²å‰é¢åŠ 0ï¼šstr(1).zfill(2)\ndf.info() å¯æ˜¾ç¤ºè¡¨ä¸­å“ªä¸ªæ•°æ®ä¸ºç©º\ndf.isnull() æ–¹æ³•å¯ä»¥åˆ¤æ–­å“ªä¸ªå€¼æ˜¯ç¼ºå¤±å€¼ï¼Œå¦‚æœç¼ºå¤±è¿”å›Trueï¼Œå¦åˆ™ä¸ºFalse\ndf.dropna() é»˜è®¤åˆ é™¤å«ç¼ºå¤±å€¼çš„è¡Œ\ndf.dropna(how&#x3D;â€™allâ€™) åˆ é™¤å…¨ä¸ºç©ºå€¼çš„è¡Œï¼Œä¸å…¨ä¸ºç©ºå€¼çš„è¡Œä¸ä¼šåˆ é™¤\ndf.fillna(0) ç”¨0å¡«å……æ‰€æœ‰ç©ºå€¼\ndf.fillna(&#123;â€˜æ€§åˆ«â€™:â€™ç”·â€™,â€™å¹´é¾„â€™:â€™30â€™&#125;) å¯¹æ€§åˆ«åˆ—ä¸­ç©ºå€¼å¡«å……ç”·ï¼Œå¹´é¾„å¡«å……30\né€šè¿‡éšæœºé€‰æ‹©éç¼ºå¤±å€¼æ¥å¡«å……ç¼ºå¤±å€¼foo[â€˜Aâ€™].apply(lambda x: np.random.choice([x for x in range(min(foo[â€˜Aâ€™]),max(foo[â€˜Aâ€™])]) if (np.isnan(x)) else x)\n\næŒ‰ä¸€åˆ—æ•°æ®å¡«å……å¦ä¸€åˆ—æ•°æ®ä¸­çš„ç¼ºå¤±å€¼df_real[â€˜å‡€å«é‡â€™] = df_real[â€˜å‡€å«é‡â€™].fillna(df_real[â€˜å‡€å«é‡_yâ€™])\n\ndf1.combine_first(df2)ï¼šå°†df2çš„éç¼ºå¤±å€¼å¡«å……df1ä¸­çš„ç¼ºå¤±ï¼ˆdataframeæ ¹æ®åˆ—åå’Œç´¢å¼•ï¼‰å€¼ï¼›ser1.combine_first(ser2)ï¼šç”¨ser2çš„éç¼ºå¤±å€¼å¡«å……ser1ä¸­çš„ç¼ºå¤±å€¼ï¼ˆseriesæ ¹æ®ç´¢å¼•ï¼‰\n\næŒ‰æŒ‡å®šçš„å­—ç¬¦åˆå¹¶å¤šåˆ—ï¼šdf[â€˜Aâ€™].str.cat([df[â€˜Bâ€™], df[â€˜Câ€™]], sep=â€™-â€˜)\ndf.drop_duplicates(inplace&#x3D;True) é»˜è®¤å¯¹æ‰€æœ‰å€¼è¿›è¡Œé‡å¤å€¼æ£€æŸ¥ï¼Œä¿ç•™ç¬¬ä¸€è¡Œçš„å€¼ï¼Œinplace&#x3D;Trueè¡¨ç¤ºç›´æ¥åœ¨åŸæ¥çš„DataFrameä¸Šåˆ é™¤é‡å¤é¡¹ï¼Œè€Œé»˜è®¤å€¼Falseè¡¨ç¤ºç”Ÿæˆä¸€ä¸ªå‰¯æœ¬ã€‚\ndf.drop_duplicates(subset&#x3D;â€™æ€§åˆ«â€™) å¯¹æ€§åˆ«åˆ—ä¸­é‡å¤å€¼æŸ¥è¯¢ä¿ç•™ç¬¬ä¸€è¡Œ\ndf.drop_duplicates(subset&#x3D;[â€™æ€§åˆ«â€™,â€™å…¬å¸â€™]ï¼Œkeep&#x3D;â€™lastâ€™) å¯¹æ€§åˆ«å’Œå…¬å¸ä¸¤åˆ—æŸ¥é‡\nkeepè®¾ç½®é»˜è®¤ä¸ºfirstï¼ˆä¿ç•™ç¬¬ä¸€ä¸ªï¼‰ï¼Œå¯è®¾ç½®ä¸ºlastï¼ˆä¿ç•™æœ€åä¸€ä¸ªï¼‰ æˆ–False(éƒ½ä¸ä¿ç•™)\ndf[â€˜IDâ€™].dtype æŸ¥çœ‹IDåˆ—çš„æ•°æ®ç±»å‹\ndf[â€˜IDâ€™].astype(â€˜floatâ€™) å°†IDåˆ—çš„æ•°æ®ç±»å‹è½¬æ¢ä¸ºfloatç±»å‹\næ•°æ®ç±»å‹ï¼šintã€floatã€objectã€stringã€unicodeã€datetime\ndf[â€˜IDâ€™][1] IDåˆ—çš„ç¬¬äºŒä¸ªæ•°æ®\ndf.columns&#x3D;[â€˜å¤§å†™â€™,â€™å°å†™â€™,â€™ä¸­æ–‡â€™] ä¸ºæ— ç´¢å¼•è¡¨æ·»åŠ åˆ—ç´¢å¼•\ndf.index&#x3D;[1,2,3] æ·»åŠ è¡Œç´¢å¼•\ndf.set_index(â€˜ç¼–å·â€™) æŒ‡æ˜è¦ç”¨çš„åˆ—ä½œä¸ºè¡Œç´¢åˆ—\ndf.rename(index&#x3D;&#123;â€˜è®¢å•ç¼–å·â€™:â€™æ–°è®¢å•ç¼–å·â€™,â€™å®¢æˆ·å§“åâ€™:â€™æ–°å®¢æˆ·å§“åâ€™&#125;) å¯¹è¡Œç´¢å¼•è¿›è¡Œé‡æ–°å‘½å\ndf.rename(columns&#x3D;&#123;1:â€™ä¸€â€™,2:â€™äºŒâ€™&#125;) å¯¹åˆ—ç´¢å¼•è¿›è¡Œä¸€æ¬¡æ€§é‡æ–°å‘½åæ‰€æœ‰åˆ—å\nå¦‚æœä½ éœ€è¦åšçš„ä»…ä»…æ˜¯å°†ç©ºæ ¼æ¢æˆä¸‹åˆ’çº¿ï¼Œé‚£ä¹ˆæ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨str.replace()æ–¹æ³•ï¼Œè¿™æ˜¯å› ä¸ºä½ éƒ½ä¸éœ€è¦è¾“å…¥æ‰€æœ‰çš„åˆ—åï¼š\ndf.columns &#x3D; df.columns.str.replace(   ,  _ )\ndf.reset_index() é»˜è®¤å°†å…¨éƒ¨indexè½¬åŒ–ä¸ºcolumn,\ndf.reset_index(level&#x3D;0) å°†0çº§ç´¢å¼•è½¬åŒ–ä¸ºcolumn\ndf.reset_index(drop&#x3D;True) åˆ é™¤åŸæœ‰ç´¢å¼•\nå¤šåˆ—åˆå¹¶ä¸ºä¸€è¡Œdf = pd.DataFrame({â€˜id_partâ€™:[â€˜aâ€™,â€™bâ€™,â€™câ€™,â€™dâ€™], â€˜predâ€™:[0.1,0.2,0.3,0.4], â€˜pred_classâ€™:[â€˜womenâ€™,â€™manâ€™,â€™catâ€™,â€™dogâ€™], â€˜v_idâ€™:[â€˜d1â€™,â€™d2â€™,â€™d3â€™,â€™d1â€™]})df.groupby([â€˜v_idâ€™]).agg({â€˜pred_classâ€™: [â€˜, â€˜.join],â€™predâ€™: lambda x: list(x),â€™id_partâ€™: â€˜firstâ€™}).reset_index()\n\nå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼df = pd.DataFrame({â€˜åˆ—1â€™:[â€˜1.1â€™,â€™2.2â€™,â€™3.3â€™],â€™åˆ—2â€™:[â€˜4.4â€™,â€™5.5â€™,â€™6.6â€™],â€™åˆ—3â€™:[â€˜7.7â€™,â€™8.8â€™,â€™-â€˜]})df.astype({â€˜åˆ—1â€™:â€™floatâ€™,â€™åˆ—2â€™:â€™floatâ€™}).dtypesç”¨è¿™ç§æ–¹å¼è½¬æ¢ç¬¬ä¸‰åˆ—ä¼šå‡ºé”™ï¼Œå› ä¸ºè¿™åˆ—é‡ŒåŒ…å«ä¸€ä¸ªä»£è¡¨ 0 çš„ä¸‹åˆ’çº¿ï¼Œpandas æ— æ³•è‡ªåŠ¨åˆ¤æ–­è¿™ä¸ªä¸‹åˆ’çº¿ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ to_numeric() å‡½æ•°æ¥å¤„ç†ç¬¬ä¸‰åˆ—ï¼Œè®© pandas æŠŠä»»æ„æ— æ•ˆè¾“å…¥è½¬ä¸º NaNã€‚df = df.apply(pd.to_numeric, errors=â€™coerceâ€™).fillna(0)\n\nä¼˜åŒ– DataFrame å¯¹å†…å­˜çš„å ç”¨æ–¹æ³•ä¸€ï¼šåªè¯»å–åˆ‡å®æ‰€éœ€çš„åˆ—ï¼Œä½¿ç”¨usecolså‚æ•°cols = [â€˜beer_servingsâ€™,â€™continentâ€™]small_drinks = pd.read_csv(â€˜data/drinks.csvâ€™, usecols=cols)æ–¹æ³•äºŒï¼šæŠŠåŒ…å«ç±»åˆ«å‹æ•°æ®çš„ object åˆ—è½¬æ¢ä¸º Category æ•°æ®ç±»å‹ï¼Œé€šè¿‡æŒ‡å®š dtype å‚æ•°å®ç°ã€‚dtypes ={â€˜continentâ€™:â€™categoryâ€™}smaller_drinks = pd.read_csv(â€˜data/drinks.csvâ€™,usecols=cols, dtype=dtypes)\n\næŠŠå­—ç¬¦ä¸²åˆ†å‰²ä¸ºå¤šåˆ—df = pd.DataFrame({â€˜å§“åâ€™:[â€˜å¼  ä¸‰â€™,â€™æ å››â€™,â€™ç‹ äº”â€™],â€™æ‰€åœ¨åœ°â€™:[â€˜åŒ—äº¬-ä¸œåŸåŒºâ€™,â€™ä¸Šæµ·-é»„æµ¦åŒºâ€™,â€™å¹¿å·-ç™½äº‘åŒºâ€™]})df.å§“å.str.split(â€˜ â€˜, expand=True)\n\næŠŠ Series é‡Œçš„åˆ—è¡¨è½¬æ¢ä¸º DataFramedf = pd.DataFrame({â€˜åˆ—1â€™:[â€˜aâ€™,â€™bâ€™,â€™câ€™],â€™åˆ—2â€™:[[10,20], [20,30], [30,40]]})df_new = df.åˆ—2.apply(pd.Series)pd.concat([df,df_new], axis=â€™columnsâ€™)\n\nDataFrameè¿­ä»£ï¼šiterrows():å°†DataFrameè¿­ä»£ä¸º(insex, Series)å¯¹ã€‚iteritems():å°†DataFrameè¿­ä»£ä¸º(åˆ—å, Series)å¯¹ã€‚itertuples(): å°†DataFrameè¿­ä»£ä¸ºå…ƒç»„ã€‚for row in df.itertuples():  print(row)  print(â€˜â€”â€”â€”â€”â€”-â€˜)  print(getattr(row,â€™col1â€™), getattr(row,â€™col2â€™))getattr() å‡½æ•°ç”¨äºè¿”å›ä¸€ä¸ªå¯¹è±¡å±æ€§å€¼ã€‚\n\n\nå››ã€æ•°æ®é€‰æ‹©\nQueryæ˜¯pandasçš„è¿‡æ»¤æŸ¥è¯¢å‡½æ•°ï¼Œä½¿ç”¨å¸ƒå°”è¡¨è¾¾å¼æ¥æŸ¥è¯¢DataFrameçš„åˆ—ï¼Œå°±æ˜¯è¯´æŒ‰ç…§åˆ—çš„è§„åˆ™è¿›è¡Œè¿‡æ»¤æ“ä½œã€‚pandas.DataFrame.query(self, expr, inplace = False, **kwargs)exprï¼šè¦è¯„ä¼°çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼›inplace=Falseï¼šæŸ¥è¯¢æ˜¯åº”è¯¥ä¿®æ”¹æ•°æ®è¿˜æ˜¯è¿”å›ä¿®æ”¹åçš„å‰¯æœ¬kwargsï¼šdictå…³é”®å­—å‚æ•°æ¯”å¦‚è¦æŸ¥åˆ—value_1&lt;value_2çš„è¡Œè®°å½•ï¼šdf.query(â€˜value_1 &lt; value_2â€™)æŸ¥è¯¢åˆ—year&gt;=2016çš„è¡Œè®°å½•ï¼šdf.query(â€˜year &gt;= 2016 â€˜)\n\nInsertç”¨äºåœ¨DataFrameçš„æŒ‡å®šä½ç½®ä¸­æ’å…¥æ–°çš„æ•°æ®åˆ—ã€‚é»˜è®¤æƒ…å†µä¸‹æ–°åˆ—æ˜¯æ·»åŠ åˆ°æœ«å°¾çš„ï¼Œä½†å¯ä»¥æ›´æ”¹ä½ç½®å‚æ•°ï¼Œå°†æ–°åˆ—æ·»åŠ åˆ°ä»»ä½•ä½ç½®ã€‚Dataframe.insert(loc, column, value, allow_duplicates=False)loc: intå‹ï¼Œè¡¨ç¤ºæ’å…¥ä½ç½®åœ¨ç¬¬å‡ åˆ—ï¼›è‹¥åœ¨ç¬¬ä¸€åˆ—æ’å…¥æ•°æ®ï¼Œåˆ™ loc=0column: ç»™æ’å…¥çš„åˆ—å–åï¼Œå¦‚ column=â€™æ–°çš„ä¸€åˆ—â€™valueï¼šæ–°åˆ—çš„å€¼ï¼Œæ•°å­—ã€arrayã€seriesç­‰éƒ½å¯ä»¥allow_duplicates: æ˜¯å¦å…è®¸åˆ—åé‡å¤ï¼Œé€‰æ‹©Tureè¡¨ç¤ºå…è®¸æ–°çš„åˆ—åä¸å·²å­˜åœ¨çš„åˆ—åé‡å¤åœ¨ç¬¬ä¸‰åˆ—çš„ä½ç½®æ’å…¥æ–°åˆ—ï¼šdf.insert(2, â€˜new_colâ€™, new_col)\n\nDataFrameé¦–è¡Œæ’å…¥è¡Œ\ndf.loc[-1] &#x3D; [10, 20, 30]  # å¢åŠ ä¸€è¡Œ\ndf.index &#x3D; df.index + 1  # æŠŠindexçš„æ¯ä¸€é¡¹å¢åŠ 1\ndf &#x3D; df.sort_index()  #é‡æ–°æ’åºä¸€ä¸‹\nCumsumæ˜¯pandasçš„ç´¯åŠ å‡½æ•°ï¼Œç”¨æ¥æ±‚åˆ—çš„ç´¯åŠ å€¼ã€‚ ç”¨æ³•ï¼šDataFrame.cumsum(axis=None, skipna=True, args, kwargs)axisï¼šindexæˆ–è€…è½´çš„åå­—skipnaï¼šæ’é™¤NA/nullå€¼dfä¸­çš„groupåˆ—æœ‰Aã€Bã€Cä¸‰ç»„ï¼Œyearåˆ—æœ‰å¤šä¸ªå¹´ä»½ã€‚æˆ‘ä»¬åªçŸ¥é“å½“å¹´åº¦çš„å€¼value_1ã€value_2ï¼Œç°åœ¨æ±‚groupåˆ†ç»„ä¸‹çš„ç´¯è®¡å€¼ï¼Œæ¯”å¦‚Aã€2014ä¹‹å‰çš„ç´¯è®¡å€¼ï¼Œå¯ä»¥ç”¨cumsumå‡½æ•°æ¥å®ç°ã€‚å½“ç„¶ä»…ç”¨cumsumå‡½æ•°æ²¡åŠæ³•å¯¹groups (A, B, C)è¿›è¡ŒåŒºåˆ†ï¼Œæ‰€ä»¥éœ€è¦ç»“åˆåˆ†ç»„å‡½æ•°groupbyåˆ†åˆ«å¯¹(A, B, C)è¿›è¡Œå€¼çš„ç´¯åŠ ã€‚df[â€˜cumsum_2â€™] = df[[â€˜value_2â€™,â€™groupâ€™]].groupby(â€˜groupâ€™).cumsum()\n\nSampleç”¨äºä»DataFrameä¸­éšæœºé€‰å–è‹¥å¹²ä¸ªè¡Œæˆ–åˆ—ã€‚ ç”¨æ³•ï¼šDataFrame.sample(n=None, frac=None, replace=False, weights=None, random_state=None, axis=None)nï¼šè¦æŠ½å–çš„è¡Œæ•°fracï¼šæŠ½å–è¡Œçš„æ¯”ä¾‹ ä¾‹å¦‚frac=0.8ï¼Œå°±æ˜¯æŠ½å–å…¶ä¸­80%replaceï¼šæ˜¯å¦ä¸ºæœ‰æ”¾å›æŠ½æ ·ï¼Œ True:æœ‰æ”¾å›æŠ½æ · False:æœªæ”¾å›æŠ½æ ·weightsï¼šå­—ç¬¦ç´¢å¼•æˆ–æ¦‚ç‡æ•°ç»„random_state ï¼šéšæœºæ•°å‘ç”Ÿå™¨ç§å­axisï¼šé€‰æ‹©æŠ½å–æ•°æ®çš„è¡Œè¿˜æ˜¯åˆ— axis=0:æŠ½å–è¡Œ axis=1:æŠ½å–åˆ—ä»dfä¸­éšæœºæŠ½å–5è¡Œï¼šdf.sample(n=5)ä»dféšæœºæŠ½å–60%çš„è¡Œï¼Œå¹¶ä¸”è®¾ç½®éšæœºæ•°ç§å­ï¼Œæ¯æ¬¡èƒ½æŠ½å–åˆ°ä¸€æ ·çš„æ ·æœ¬ï¼šdf.sample(frac=0.6,random_state=2)\n\nWhereç”¨æ¥æ ¹æ®æ¡ä»¶æ›¿æ¢è¡Œæˆ–åˆ—ä¸­çš„å€¼ã€‚å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œä¿æŒåŸæ¥çš„å€¼ï¼Œä¸æ»¡è¶³æ¡ä»¶åˆ™æ›¿æ¢ä¸ºå…¶ä»–å€¼ã€‚é»˜è®¤æ›¿æ¢ä¸ºNaNï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç‰¹æ®Šå€¼ã€‚DataFrame.where(cond, other=nan, inplace=False, axis=None, level=None, errors=â€™raiseâ€™, try_cast=False, raise_on_error=None)condï¼šå¸ƒå°”æ¡ä»¶ï¼Œå¦‚æœ cond ä¸ºçœŸï¼Œä¿æŒåŸæ¥çš„å€¼ï¼Œå¦åˆ™æ›¿æ¢ä¸ºotherotherï¼šæ›¿æ¢çš„ç‰¹æ®Šå€¼inplaceï¼šinplaceä¸ºçœŸåˆ™åœ¨åŸæ•°æ®ä¸Šæ“ä½œï¼Œä¸ºFalseåˆ™åœ¨åŸæ•°æ®çš„copyä¸Šæ“ä½œaxisï¼šè¡Œæˆ–åˆ—å°†dfä¸­åˆ—value_1é‡Œå°äº5çš„å€¼æ›¿æ¢ä¸º0ï¼šdf[â€˜value_1â€™].where(df[â€˜value_1â€™] &gt; 5 , 0)\n\nå¾—åˆ°DataFrameä¸­é‡å¤çš„æ•°æ®\ndata&#x3D;&#123;&#39;one&#39;:[1,1,2,2,1,2,2],&#39;two&#39;:[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;]&#125;\nframe&#x3D;pd.DataFrame(data)\nprint(&quot;åŸå§‹æ•°æ®&quot;)\nprint(frame)\ndata1 &#x3D; frame.drop_duplicates(subset&#x3D;[&#39;two&#39;],keep&#x3D;&#39;first&#39;)\nprint(&quot;å»é‡åçš„æ•°æ®&quot;)\nprint(data1)\na &#x3D; frame.drop_duplicates(subset&#x3D;[&#39;two&#39;],keep&#x3D;&#39;last&#39;)\nb &#x3D; frame.drop_duplicates(subset&#x3D;[&#39;two&#39;],keep&#x3D;False)\nc&#x3D;a.append(b).drop_duplicates(subset&#x3D;[&#39;two&#39;],keep&#x3D;False)\nprint(&quot;é‡å¤çš„æ•°æ®&quot;)\nprint(c)\nç´¢å¼•åˆ‡ç‰‡\ndf[[â€˜IDâ€™,â€™å§“åâ€™]] å¤šä¸ªåˆ—åè¦è£…å…¥list\ndf.iloc[[1,3],[2,4]] ç”¨è¡Œåˆ—ç¼–å·é€‰æ‹©æ•°æ®\ndf.iloc[1,1] é€‰å–è¡¨ä¸­çš„ç¬¬3è¡Œ2åˆ—æ•°æ®ï¼Œç¬¬ä¸€è¡Œé»˜è®¤ä¸ºåˆ—ç´¢å¼•\ndf.iloc[:,0:4] #è·å–ç¬¬1åˆ—åˆ°ç¬¬4åˆ—çš„å€¼\ndf.loc[â€˜ä¸€â€™] #locç”¨è¡Œåé€‰å–çš„è¡Œæ•°æ®ï¼Œæ ¼å¼æ˜¯Seriesï¼Œä½†å¯ä»¥ç”¨åˆ—è¡¨å½¢å¼è®¿é—®\ndf.loc[â€˜ä¸€â€™][0] æˆ– df.loc[â€˜ä¸€â€™][â€˜åºå·â€™]\ndf.iloc[1]#ilocç”¨è¡Œç¼–å·é€‰å–è¡Œæ•°æ®\ndf.iloc[[1,3]]#å¤šè¡Œç¼–å·é€‰å–è¡Œæ•°æ®ï¼Œè¦ç”¨listå°è£…ï¼Œä¸ç„¶å˜æˆè¡Œåˆ—é€‰å–\ndf.iloc[1:3]#é€‰æ‹©ç¬¬äºŒè¡Œå’Œç¬¬å››è¡Œ\ndf[df[â€˜å¹´é¾„â€™]&lt;45] #åŠ åˆ¤æ–­æ¡ä»¶è¿”å›ç¬¦åˆæ¡ä»¶çš„å…¨éƒ¨æ•°æ®ï¼Œä¸å±€é™å¹´é¾„åˆ—\ndf[(df[â€˜å¹´é¾„â€™]&lt;45)&amp;(df[â€˜IDâ€™]&lt;4)] #åˆ¤æ–­å¤šæ¡ä»¶é€‰æ‹©æ•°æ®\ndf.iloc[[1,3],[2,4]] ç›¸å½“äºdf.loc[[â€˜ä¸€â€™,â€™äºŒâ€™],[â€˜å¹´é¾„â€™,â€™IDâ€™]] #locæ˜¯åï¼Œilocæ˜¯ç¼–å·\ndf[df[â€˜å¹´é¾„â€™]&lt;45][[â€˜å¹´é¾„â€™,â€™IDâ€™]]#å…ˆé€šè¿‡å¹´é¾„æ¡ä»¶é€‰æ‹©è¡Œï¼Œå†é€šè¿‡ä¸åŒç´¢å¼•æŒ‡å®šåˆ—\ndf.iloc[1:3,2:4]#åˆ‡ç‰‡ç´¢å¼•\npandas ç­›é€‰æ—¶é—´æ—¥æœŸæ•°æ®\nè¿™é‡Œç­›é€‰2020å¹´5æœˆçš„æ•°æ®ä¸ºä¾‹ï¼šé¦–å…ˆå°†æ—¥æœŸæ ¼å¼åŒ–ï¼š\ndata[&#39;æ—¥æœŸ&#39;]&#x3D;data[&quot;æ—¥æœŸ&quot;].values.astype(&#39;datetime64&#39;)  #å¦‚æœå·²ä¸ºæ—¥æœŸæ ¼å¼åˆ™æ­¤æ­¥éª¤å¯çœç•¥\nimport datetime\ns_date &#x3D; datetime.datetime.strptime(&#39;2020-04-30&#39;, &#39;%Y-%m-%d&#39;).date()  #èµ·å§‹æ—¥æœŸ\ne_date &#x3D; datetime.datetime.strptime(&#39;2020-06-01&#39;, &#39;%Y-%m-%d&#39;).date()  #ç»“æŸæ—¥æœŸ\nç¬¬ä¸€ç§æ–¹æ³•ï¼Œç”¨é€»è¾‘è¿ç®—ç¬¦å·â€™&gt;â€™ â€˜&lt;â€™å’Œâ€™&amp;â€™ï¼š\nPandasdatetime64[ns]ä¸èƒ½ç›´æ¥ä¸datetime.dateç›¸æ¯”ï¼Œéœ€è¦ç”¨pd.Timestampè¿›è¡Œè½¬åŒ–\ndata[(data.æ—¥æœŸ&gt;pd.Timestamp(s_date))&amp;(data.æ—¥æœŸ&lt;pd.Timestamp(e_date))]\nç¬¬äºŒç§ï¼Œç”¨æ¯”è¾ƒå‡½æ•°â€™gtâ€™â€™ltâ€™å’Œâ€™&amp;â€™:\ndata[(data[&#39;æ—¥æœŸ&#39;].lt(pd.Timestamp(e_date)))&amp;(data[&#39;æ—¥æœŸ&#39;].gt(pd.Timestamp(s_date)))]\nç¬¬ä¸‰ç§ï¼Œç”¨applyå‡½æ•°å®ç°:\nid_a&#x3D;data.æ—¥æœŸ.apply(lambda x: x.year &#x3D;&#x3D;2020  and x.month&#x3D;&#x3D;5)\ndata[id_a]\nç¬¬å››ç§ï¼Œç”¨betweenå‡½æ•°å®ç°:\nid_b&#x3D;data.æ—¥æœŸ.between(pd.Timestamp(s_date),pd.Timestamp(e_date))\ndata[id_b]\nè¡Œåºã€åˆ—åºåè½¬ ï¼šè¡Œåºåè½¬æœ€ç›´æ¥çš„åŠæ³•æ˜¯ä½¿ç”¨locå‡½æ•°å¹¶ä¼ é€’::-1ï¼Œè·ŸPythonä¸­åˆ—è¡¨åè½¬æ—¶ä½¿ç”¨çš„åˆ‡ç‰‡ç¬¦å·ä¸€è‡´df.loc[::-1].reset_index(drop=True)åˆ—åºåè½¬å°±æ¯”è¾ƒå®¹æ˜“äº†ï¼Œåªéœ€è¦å¦‚ä¸‹æ“ä½œï¼šdf.loc[:, ::-1]\n\nåˆ†ç»„é‡Œæœ€å¤§å€¼æ‰€åœ¨çš„è¡Œæ–¹æ³•åˆ†ä¸ºåˆ†ç»„ä¸­æœ‰é‡å¤å€¼å’Œæ— é‡å¤å€¼ä¸¤ç§ã€‚æ— é‡å¤å€¼çš„æƒ…å†µã€‚df = pd.DataFrame({â€˜Spâ€™:[â€˜aâ€™,â€™bâ€™,â€™câ€™,â€™dâ€™,â€™eâ€™,â€™fâ€™], â€˜Mtâ€™:[â€˜s1â€™, â€˜s1â€™, â€˜s2â€™,â€™s2â€™,â€™s2â€™,â€™s3â€™], â€˜Valueâ€™:[1,2,3,4,5,6], â€˜Countâ€™:[3,2,5,10,10,6]})df.iloc[df.groupby([â€˜Mtâ€™]).apply(lambda x: x[â€˜Countâ€™].idxmax())]å…ˆæŒ‰Mtåˆ—è¿›è¡Œåˆ†ç»„ï¼Œç„¶åå¯¹åˆ†ç»„ä¹‹åçš„æ•°æ®æ¡†ä½¿ç”¨idxmaxå‡½æ•°å–å‡ºCountæœ€å¤§å€¼æ‰€åœ¨çš„åˆ—ï¼Œå†ç”¨ilocä½ç½®ç´¢å¼•å°†è¡Œå–å‡ºã€‚æœ‰é‡å¤å€¼çš„æƒ…å†µdf[â€œrankâ€] = df.groupby(â€œIDâ€)[â€œscoreâ€].rank(method=â€minâ€, ascending=False).astype(np.int64)df[df[â€œrankâ€] == 1][[â€œIDâ€, â€œclassâ€]]å¯¹IDè¿›è¡Œåˆ†ç»„ä¹‹åå†å¯¹åˆ†æ•°åº”ç”¨rankå‡½æ•°ï¼Œåˆ†æ•°ç›¸åŒçš„æƒ…å†µä¼šèµ‹äºˆç›¸åŒçš„æ’åï¼Œç„¶åå–å‡ºæ’åä¸º1çš„æ•°æ®ã€‚\n\né€‰æ‹©ç‰¹å®šç±»å‹çš„åˆ—drinks = pd.read_csv(â€˜data/drinks.csvâ€™)é€‰æ‹©æ‰€æœ‰æ•°å€¼å‹çš„åˆ—drinks.select_dtypes(include=[â€˜numberâ€™]).head()é€‰æ‹©æ‰€æœ‰å­—ç¬¦å‹çš„åˆ—drinks.select_dtypes(include=[â€˜objectâ€™]).head()drinks.select_dtypes(include=[â€˜numberâ€™,â€™objectâ€™,â€™categoryâ€™,â€™datetimeâ€™]).head()ç”¨ exclude å…³é”®å­—æ’é™¤æŒ‡å®šçš„æ•°æ®ç±»å‹drinks.select_dtypes(exclude=[â€˜numberâ€™]).head()\n\næ ¹æ®æœ€å¤§çš„ç±»åˆ«ç­›é€‰ DataFramemovies = pd.read_csv(â€˜data/imdb_1000.csvâ€™)counts = movies.genre.value_counts()movies[movies.genre.isin(counts.nlargest(3).index)].head()\n\nåŸºäºå­—ç¬¦ä¸²çš„é•¿åº¦æ¥ç­›é€‰æ•°æ®df[df.col1.str.len() &gt; 20].head()\n\næ ‡æ³¨é‡ç‚¹df_new.style.highlight_max(axis = 0, color = â€œyellowâ€)\n\n\näº”ã€æ•°å€¼æ“ä½œdf[â€˜å¹´é¾„â€™].replace(100,33)#å¯¹å¹´é¾„åˆ—ä¸­çš„100æ›¿æ¢æˆ33\ndf.replace(np.NaN,0)#ç›¸å½“äºfillna(),å…¶ä¸­np.NaNæ˜¯pythonä¸­ç¼ºçœå€¼çš„è¡¨ç¤ºæ–¹å¼\ndf.replace([A,B],C)#å¤šå¯¹ä¸€æ›¿æ¢ï¼ŒAã€Bæ›¿æ¢æˆC\ndf.replace(&#123;â€˜Aâ€™:â€™aâ€™,â€˜Bâ€™:â€™bâ€™,â€˜Câ€™:â€™câ€™&#125;)#å¤šå¯¹å¤šæ›¿æ¢\ndf.sort_values(by&#x3D;[&#39;ç”³è¯·å•ç¼–å·&#39;],ascending&#x3D;False)#ç”³è¯·å•ç¼–å·åˆ—é™åºæ’åˆ—ï¼ŒTureå‡åºæ’åˆ—ï¼ˆé»˜è®¤ï¼‰\ndf.sort_values(by&#x3D;[&#39;ç”³è¯·å•ç¼–å·&#39;],na_position&#x3D;â€™firstâ€™)#ç”³è¯·å•ç¼–å·åˆ—å‡åºæ’åˆ—ï¼Œç¼ºå¤±å€¼æ’åœ¨ç¬¬ä¸€ä½\né»˜è®¤ç¼ºå¤±å€¼åœ¨æœ€åä¸€ä½last\ndf &#x3D; pd.DataFrame([[&#39;A&#39;,1],[&#39;A&#39;,3],[&#39;A&#39;,2],[&#39;B&#39;,5],[&#39;B&#39;,9]], columns &#x3D; [&#39;name&#39;,&#39;score&#39;])\ndf.sort_values([&#39;name&#39;,&#39;score&#39;], ascending &#x3D; [True,False])#å¤šåˆ—æ’åº\ndf.groupby(&#39;name&#39;).apply(lambda x: x.sort_values(&#39;score&#39;,ascending&#x3D;False)).reset_index(drop&#x3D;True)\n\nPct_changeæ˜¯ä¸€ä¸ªç»Ÿè®¡å‡½æ•°ï¼Œç”¨äºè¡¨ç¤ºå½“å‰å…ƒç´ ä¸å‰é¢å…ƒç´ çš„ç›¸å·®ç™¾åˆ†æ¯”ï¼Œä¸¤å…ƒç´ çš„åŒºé—´å¯ä»¥è°ƒæ•´ã€‚æ¯”å¦‚è¯´ç»™å®šä¸‰ä¸ªå…ƒç´ [2,3,6]ï¼Œè®¡ç®—ç›¸å·®ç™¾åˆ†æ¯”åå¾—åˆ°[NaN, 0.5, 1.0]ï¼Œä»ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°ç¬¬äºŒä¸ªå…ƒç´ å¢åŠ 50ï¼…ï¼Œä»ç¬¬äºŒä¸ªå…ƒç´ åˆ°ç¬¬ä¸‰ä¸ªå…ƒç´ å¢åŠ 100ï¼…ã€‚DataFrame.pct_change(periods=1, fill_method=â€˜padâ€™, limit=None, freq=None, **kwargs)periodsï¼šé—´éš”åŒºé—´ï¼Œå³æ­¥é•¿fill_methodï¼šå¤„ç†ç©ºå€¼çš„æ–¹æ³•å¯¹dfçš„value_1åˆ—è¿›è¡Œå¢é•¿ç‡çš„è®¡ç®—ï¼šdf.value_1.pct_change()\n\n\n pandas è¿›è¡Œç»„å†…æ’åºã€å•ç»„æ’åºã€æ ‡å·df[â€˜é”€é‡â€™].rank(method&#x3D;â€™firstâ€™)#é”€é‡æ’åï¼ˆä¸æ˜¯æ’åºï¼‰ï¼Œmethodæœ‰first\\min\\max\\average\nç»„å†…è¿›è¡Œæ’åº(æŒ‰user_idåˆ†ç»„åå¯¹product_idæ’åº)\ndata1[&#39;group_sort&#39;]&#x3D;data1[&#39;product_id&#39;].groupby(data1[&#39;user_id&#39;]).rank(ascending&#x3D;1,method&#x3D;&#39;first&#39;)\n\ndf.drop([â€˜é”€é‡â€™,â€™IDâ€™],axis&#x3D;1)#åˆ é™¤åˆ—,ç›´æ¥æ˜¯åˆ—å,inpace&#x3D;Trueæ˜¯ä¿ç•™ä¿®æ”¹å“¦\ndf.drop(df.columns[[4,5]],axis&#x3D;1)#åˆ é™¤åˆ—,æ˜¯ç¼–å·\ndf.drop(colums&#x3D;[â€˜é”€é‡â€™,â€™IDâ€™])#æ­¤ç§æ–¹å¼åˆ é™¤åˆ—ï¼Œå¯ä»¥ä¸å†™axis&#x3D;1\ndf.drop([â€˜aâ€™,â€™bâ€™],axis&#x3D;0)#åˆ é™¤è¡Œ,ç›´æ¥æ˜¯åˆ—å\ndf.drop(df.index[[4,5]],axis&#x3D;0)#åˆ é™¤è¡Œ,æ˜¯ç¼–å·\ndf.drop(index&#x3D;[â€˜aâ€™,â€™bâ€™])#æ­¤ç§æ–¹å¼åˆ é™¤è¡Œï¼Œå¯ä»¥ä¸å†™axis&#x3D;0\ndf[â€˜IDâ€™].value_counts()#å¯¹IDåˆ—ä¸­æ•°æ®å‡ºç°çš„æ¬¡æ•°è¿›è¡Œç»Ÿè®¡\ndf[â€˜IDâ€™].value_counts(normalize&#x3D;Ture,sort&#x3D;False)#å¯¹IDåˆ—ä¸­æ•°æ®å‡ºç°çš„æ¬¡æ•°å æ¯”è¿›è¡Œç»Ÿè®¡ï¼Œå¹¶é™åºæ’åº\ndf[â€˜IDâ€™].unique()#è·å–åˆ—çš„å”¯ä¸€å€¼\ndf[â€˜å¹´é¾„â€™].isin([â€˜aâ€™,11])#æŸ¥çœ‹è¿™åˆ—ä¸­æ˜¯å¦åŒ…å«aæˆ–11\npd.cut(df[â€˜IDâ€™],bins&#x3D;[0,3,6,10])#ç”¨binsæŒ‡æ˜åˆ‡åˆ†åŒºé—´\npd.qcut(df[â€˜IDâ€™],3)#IDåˆ—åˆ‡åˆ†æˆ3ä¸ªéƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†æ•°æ®ä¸ªæ•°å°½é‡ä¸€è‡´\ndf.insert(2,â€™å•†å“â€™,[â€˜ä¹¦â€™,â€™ç¬”â€™,â€™è®¡ç®—å™¨â€™])#æ’å…¥ç¬¬ä¸‰åˆ—\ndf[â€™å•†å“â€™]&#x3D;[â€˜ä¹¦â€™,â€™ç¬”â€™,â€™è®¡ç®—å™¨â€™])#æ’æ–°åˆ—ï¼Œåœ¨è¡¨çš„æœ€åé¢\ndf.Tè¡Œåˆ—äº’æ¢\ndf.tack()#æŠŠè¡¨æ ¼å‹æ•°æ®è½¬åŒ–æˆæ ‘å½¢æ•°æ®\ndf.set_index([â€˜IDâ€™,â€™å§“åâ€™]).stack().reset_index()#å®½è¡¨è½¬æ¢æˆé•¿è¡¨ï¼Œå…ˆå°†å…±åŒåˆ—è®¾ç½®æˆè¡Œç´¢å¼•ï¼Œå†å¯¹å…¶ä»–åˆ—\nè¿›è¡Œè½¬åŒ–æˆæ ‘å½¢æ•°æ®ï¼Œå†é‡ç½®è¡Œç´¢å¼•\n\nå †å ï¼špd.DataFrame.stack(self, level=-1, dropna=True)ï¼Œlevelé»˜è®¤ä¸º-1æ˜¯å°†æœ€å†…å±‚colå †å ä¸ºç´¢å¼•çš„æœ€å†…å±‚ï¼Œä¸º0æ˜¯å°†æœ€å¤–å±‚colå †å ä¸ºç´¢å¼•çš„æœ€å†…å±‚ï¼Œä»æœ€å¤–å±‚å¼€å§‹ä¾æ¬¡çš„levelå€¼ä¸º0ï¼Œ1ï¼Œ2â€¦çš„é¡ºåºæ¥æŒ‡å®šå¯¹åº”colã€‚å½“ç„¶ç›´æ¥æŒ‡å®šç´¢å¼•åç§°æˆ–è®¸æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚\n\nåå †å ã€æ‹†å †ï¼špd.DataFrame.unstack(self, level=-1, fill_value=None)ï¼Œé»˜è®¤å°†æœ€å†…å±‚çš„ç´¢å¼•æ‹†å †åˆ°åˆ—çš„æœ€å†…å±‚ï¼Œå…¶ä»–åŒç†stack()ï¼›\n\ndf.melt(id_vars=[â€˜IDâ€™,â€™å§“åâ€™],var_name=â€™yearâ€™,value_name=â€™saleâ€™)id_varå‚æ•°æŒ‡æ˜å®½è¡¨è½¬æ¢æˆé•¿è¡¨æ—¶ä¿æŒä¸å˜çš„åˆ—ï¼Œvar_nameå‚æ•°è¡¨ç¤ºåŸæ¥çš„åˆ—ç´¢å¼•è½¬åŒ–ä¸ºè¡Œç´¢å¼•å¯¹åº”çš„åˆ—åï¼Œvalue_nameè¡¨ç¤ºæ–°ç´¢å¼•å¯¹åº”å€¼çš„åˆ—ådf[â€˜C1â€™].apply(lambda x:x+1)#ç›¸å½“äºmap(),åªæ˜¯éœ€è¦å’Œlambdaé…åˆdf.applymap(lambda x:x+1),å¯¹è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®æ‰§è¡Œç›¸åŒå‡½æ•°è¿ç®—\n\napplyæ­é…åŒ¿åå‡½æ•°lambdaçš„ç¥å¥‡ç”¨æ³•ï¼šdf[â€˜æ•°æ®3â€™] = df.apply(lambda x:(x.æ•°æ®1-x.æ•°æ®2)/x.ä¸Šæœˆ if x.col3!=0 else 0 ,axis=1)\n\nåˆ é™¤åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²æ‰€åœ¨çš„è¡Œï¼šdf[â€˜bâ€™].values.astype(â€˜strâ€™) å…ˆè½¬ä¸ºå­—ç¬¦ä¸²æ ¼å¼æœ€å¥½ï¼›df[df[â€˜bâ€™].str.contains(â€˜expâ€™,na=False)]\n\nè®¡ç®—å˜é‡ç¼ºå¤±ç‡\ndef missing_cal(df):\n    &quot;&quot;&quot;\n    df :æ•°æ®é›†\n    returnï¼šæ¯ä¸ªå˜é‡çš„ç¼ºå¤±ç‡\n    &quot;&quot;&quot;\n    missing_series &#x3D; df.isnull().sum()&#x2F;df.shape[0]\n    missing_df &#x3D; pd.DataFrame(missing_series).reset_index()\n    missing_df &#x3D; missing_df.rename(columns&#x3D;&#123;&#39;index&#39;:&#39;col&#39;,\n    0:&#39;missing_pct&#39;&#125;)\n    missing_df &#x3D; \tmissing_df.sort_values(&#39;missing_pct&#39;,ascending&#x3D;False).reset_index(drop&#x3D;True)\n    return missing_df\nmissing_cal(df)\nå¦‚æœéœ€è¦è®¡ç®—æ ·æœ¬çš„ç¼ºå¤±ç‡åˆ†å¸ƒï¼Œåªè¦åŠ ä¸Šå‚æ•°axis&#x3D;1ã€‚\nå…­ã€æ•°æ®è¿ç®—df[â€˜IDâ€™]+Df[â€˜IDâ€™]#å¯è¿›è¡ŒåŠ å‡ä¹˜é™¤\ndf[â€˜IDâ€™]&gt;Df[â€˜IDâ€™]#å¯è¿›è¡Œ&gt; &lt; &#x3D;&#x3D; !&#x3D;ç­‰æ¯”è¾ƒè¿ç®—\ndf.nunique()#ç»Ÿè®¡æ¯åˆ—ä¸é‡å¤å€¼çš„ä¸ªæ•°\ndf.count()#ç»Ÿè®¡æ¯åˆ—çš„éç©ºå€¼çš„ä¸ªæ•°\ndf.count(axis&#x3D;1)#ç»Ÿè®¡æ¯è¡Œçš„éç©ºå€¼çš„ä¸ªæ•°\ndf[â€˜IDâ€™].count()#ç»Ÿè®¡æŒ‡å®šåˆ—çš„éç©ºå€¼çš„ä¸ªæ•°\ndf.sum(axis&#x3D;1)#æ¯åˆ—&#x2F;è¡Œæ±‚å’Œç»“æœ\ndf.mean(axis&#x3D;1)#æ¯åˆ—&#x2F;è¡Œæ±‚å‡å€¼\ndf.max(axis&#x3D;1)#æ¯åˆ—&#x2F;è¡Œæ±‚æœ€å¤§å€¼\ndf.min(axis&#x3D;1)#æ¯åˆ—&#x2F;è¡Œæ±‚æœ€å°å€¼\ndf.median(axis&#x3D;1)#æ¯åˆ—&#x2F;è¡Œæ±‚ä¸­é—´å€¼\ndf.mode(axis&#x3D;1)#æ¯åˆ—&#x2F;è¡Œä¸­å‡ºç°æœ€å¤šçš„å€¼\ndf.var(axis&#x3D;1)#æ¯åˆ—&#x2F;è¡Œæ±‚æ–¹å·®\ndf.std(axis&#x3D;1)#æ¯åˆ—&#x2F;è¡Œæ±‚æ ‡å‡†å·®\ndf.quantile(0.25)#æ±‚1&#x2F;4åˆ†ä½æ•°ï¼Œå¯ä»¥0.5ã€0.75ç­‰åˆ†ä½æ•°\ndf.corr()#æ±‚æ•´ä¸ªDataFrameè¡¨ä¸­çš„ç›¸å…³æ€§\nä¸ƒã€æ—¶é—´åºåˆ—from datetime import datetime\ndatatime.now()#è¿”å›ç°åœ¨çš„æ—¶é—´å¹´æœˆæ—¥æ—¶åˆ†ç§’\ndatatime.now().year#è¿”å›å¹´ï¼Œå¯ä»¥.month\\.day\ndatatime.now().weekday()-1#è¿”å›å‘¨å‡ \ndatatime.now().isocalendar()#è¿”å›å‘¨æ•°\nï¼ˆ2018ï¼Œ41ï¼Œ7ï¼‰#2018å¹´çš„ç¬¬41å‘¨ç¬¬7å¤©\ndatatime.now().date()#åªè¿”å›å¹´æœˆæ—¥\ndatatime.now().time()#åªè¿”å›æ—¶é—´\ndatatime.now().strftime(â€˜%Y-%m-%d %H:%M:%Sâ€™)#è¿”å›2020-03-13 09:09:12\npd.to_datetime([&#39;201221&#39;],format &#x3D; &quot;%Y%m%d&quot;)#è¿”å›DatetimeIndex([&#39;2012-02-01&#39;], dtype&#x3D;&#39;datetime64[ns]&#39;, freq&#x3D;None)\npd.to_datetime(&#39;201221&#39;,format &#x3D; &quot;%Y%m%d&quot;)#ä¸åŠ åˆ—è¡¨ï¼Œè¿”å›Timestamp(&#39;2012-02-01 00:00:00&#39;)ï¼Œéœ€è¦çœå»æ—¶åˆ†ç§’å¯ä»¥åœ¨åé¢åŠ .strftime(&quot;%Y-%m-%d&quot;)\nfrom dateutil.parser import parse\nparse(str_time)#å°†å­—ç¬¦ä¸²çš„æ—¶é—´è½¬åŒ–æˆä¸ºæ—¶é—´æ ¼å¼\npd.Datetimeindex([â€˜2020-02-03â€™,2020-03-05â€™])#è®¾ç½®æ—¶é—´ç´¢å¼•\ndata[â€˜2018â€™]#è·å–2018å¹´çš„æ•°æ®\ndata[â€˜2018-01â€™]#è·å–2018å¹´1æœˆçš„æ•°æ®\ndata[â€˜2018-01-05â€™:â€˜2018-01-15â€™]#è·å–è¿™ä¸ªæ—¶æ®µçš„æ•°æ®\néæ—¶é—´ç´¢å¼•çš„è¡¨æ ¼å¤„ç†\ndf[df[â€˜æˆäº¤æ—¶é—´â€™]&#x3D;&#x3D;datetime(2018,08,05)]\ndf[df[â€˜æˆäº¤æ—¶é—´â€™]&gt;datetime(2018,08,05)]\ndf[(df[â€˜æˆäº¤æ—¶é—´â€™]&gt;datetime(2018,08,05))&amp;(df[â€˜æˆäº¤æ—¶é—´â€™] &lt;datetime(2018,08,15))]\ncha&#x3D;datatime(2018,5,21,19,50)-datatime(2018,5,18,17,50)\ncha.days#è¿”å›å¤©çš„æ—¶é—´å·®\ncha.seconds#è¿”å›ç§’çš„æ—¶é—´å·®\ncha.seconds&#x2F;3600#è¿”å›å°æ—¶çš„æ—¶é—´å·®\ndatatime(2018,5,21,19,50)+timedelta(days&#x3D;1)#å¾€åç§»ä¸€å¤©\ndatatime(2018,5,21,19,50)+timedelta(seconds&#x3D;20)#å¾€åç§»20ç§’\ndatatime(2018,5,21,19,50)-timedelta(days&#x3D;1)#å¾€å‰ç§»ä¸€å¤©\næ—¥æœŸæ—¶é—´ç±»å‹æ¥å£ä¸€è§ˆè¡¨\ndf &#x3D; generate_sample_data_datetime().reset_index()\ndf &#x3D; df.sample(500)\ndf[&quot;Year&quot;] &#x3D; df[&quot;index&quot;].dt.year\ndf[&quot;Month&quot;] &#x3D; df[&quot;index&quot;].dt.month\ndf[&quot;Day&quot;] &#x3D; df[&quot;index&quot;].dt.day\ndf[&quot;Hour&quot;] &#x3D; df[&quot;index&quot;].dt.hour\ndf[&quot;Minute&quot;] &#x3D; df[&quot;index&quot;].dt.minute\ndf[&quot;Second&quot;] &#x3D; df[&quot;index&quot;].dt.second\ndf[&quot;Nanosecond&quot;] &#x3D; df[&quot;index&quot;].dt.nanosecond\ndf[&quot;Date&quot;] &#x3D; df[&quot;index&quot;].dt.date\ndf[&quot;Time&quot;] &#x3D; df[&quot;index&quot;].dt.time\ndf[&quot;Time_Time_Zone&quot;] &#x3D; df[&quot;index&quot;].dt.timetz\ndf[&quot;Day_Of_Year&quot;] &#x3D; df[&quot;index&quot;].dt.dayofyear\ndf[&quot;Week_Of_Year&quot;] &#x3D; df[&quot;index&quot;].dt.weekofyear\ndf[&quot;Week&quot;] &#x3D; df[&quot;index&quot;].dt.week\ndf[&quot;Day_Of_week&quot;] &#x3D; df[&quot;index&quot;].dt.dayofweek\ndf[&quot;Week_Day&quot;] &#x3D; df[&quot;index&quot;].dt.weekday\ndf[&quot;Week_Day_Name&quot;] &#x3D; df[&quot;index&quot;].dt.weekday_name\ndf[&quot;Quarter&quot;] &#x3D; df[&quot;index&quot;].dt.quarter\ndf[&quot;Days_In_Month&quot;] &#x3D; df[&quot;index&quot;].dt.days_in_month\ndf[&quot;Is_Month_Start&quot;] &#x3D; df[&quot;index&quot;].dt.is_month_start\ndf[&quot;Is_Month_End&quot;] &#x3D; df[&quot;index&quot;].dt.is_month_end\ndf[&quot;Is_Quarter_Start&quot;] &#x3D; df[&quot;index&quot;].dt.is_quarter_start\ndf[&quot;Is_Quarter_End&quot;] &#x3D; df[&quot;index&quot;].dt.is_quarter_end\ndf[&quot;Is_Leap_Year&quot;] &#x3D; df[&quot;index&quot;].dt.is_leap_year\nå…«ã€æ•°æ®é€è§†è¡¨df.groupby(â€˜å®¢æˆ·åˆ†ç±»â€™).count()#å®¢æˆ·åˆ†ç±»åæ±‚æ•°è¿ç®—\ndf.groupby(â€˜å®¢æˆ·åˆ†ç±»â€™).sum()#å®¢æˆ·åˆ†ç±»åæ±‚å’Œè¿ç®—\ndf.groupby(â€˜å®¢æˆ·åˆ†ç±»â€™,â€™åŒºåŸŸåˆ†ç±»â€™).sum()#å¤šåˆ—åˆ†ç±»åæ±‚å’Œè¿ç®—\ndf.groupby(â€˜å®¢æˆ·åˆ†ç±»â€™,â€™åŒºåŸŸåˆ†ç±»â€™)[â€˜IDâ€™].sum()#å¤šåˆ—åˆ†ç±»åIDæ±‚å’Œè¿ç®—\ndf[â€˜IDâ€™]#DataFrameå–å‡ºä¸€åˆ—å°±æ˜¯Seriesç±»å‹\ndf.groupby(df[â€˜IDâ€™]).sum() ç›¸å½“äº df.groupby(â€˜IDâ€™).sumï¼ˆï¼‰\ndf.groupby(â€˜å®¢æˆ·åˆ†ç±»â€™).aggregate([â€˜sumâ€™,â€™countâ€™]# aggregateå¯å®ç°å¤šç§æ±‡æ€»æ–¹å¼\ndf.groupby(â€˜å®¢æˆ·åˆ†ç±»â€™).aggregate(&#123;â€˜IDâ€™ï¼šâ€˜countâ€™,â€™é”€é‡â€™ï¼š â€˜sumâ€™&#125;)\nç”¨å¤šä¸ªå‡½æ•°èšåˆdf.groupby(â€˜order_idâ€™).item_price.agg([â€˜sumâ€™,â€™countâ€™]).head()\n\naggregateå¯é’ˆå¯¹ä¸åŒåˆ—åšä¸åŒçš„æ±‡æ€»è¿ç®—df.groupby(â€˜å®¢æˆ·åˆ†ç±»â€™).sum().reset_index()#åˆ†ç»„æ±‡æ€»åå†é‡ç½®ç´¢å¼•ï¼Œå˜ä¸ºæ ‡å‡†DataFramepd.pivot_table(data,values,index,columms,aggfunc,fill_value,margins,dropna,margins_name)æ•°æ®é€è§†è¡¨ï¼Œdata:æ•°æ®è¡¨df,values:å€¼ï¼Œindex:è¡Œç´¢å¼•ï¼Œcolumns:åˆ—ç´¢å¼•ï¼Œaggfunc:valuesçš„è®¡ç®—ç±»å‹ï¼Œfill_value:å¯¹ç©ºå€¼çš„å¡«å……æ–¹å¼ï¼›margins:æ˜¯å¦æœ‰åˆè®¡åˆ—ï¼›margins_name:åˆè®¡åˆ—çš„åˆ—åpd.pivot_table(df,values=[â€™IDâ€™,â€˜é”€é‡â€™],index=â€™å®¢æˆ·åˆ†ç±»â€™,columms=â€˜åŒºåŸŸâ€™,aggfunc={â€˜IDâ€™ï¼šâ€˜countâ€™,â€™é”€é‡â€™ï¼šâ€˜sumâ€™}),fill_value=0,margins=Ture,dropna=None,margins_name=â€™æ€»è®¡â€™)\n\nåˆ†ç»„èšåˆ dict(list(df.groupby(â€˜key1â€™)))é€šè¿‡å­—å…¸æˆ–Seriesè¿›è¡Œåˆ†ç»„people = pd.DataFrame(np.random.randn(5, 5),columns=[â€˜aâ€™, â€˜bâ€™, â€˜câ€™, â€˜dâ€™, â€˜eâ€™],index=[â€˜Joeâ€™, â€˜Steveâ€™, â€˜Wesâ€™, â€˜Jimâ€™, â€˜Travisâ€™])mapping = {â€˜aâ€™:â€™redâ€™, â€˜bâ€™:â€™redâ€™, â€˜câ€™:â€™blueâ€™, â€˜dâ€™:â€™blueâ€™, â€˜eâ€™:â€™redâ€™, â€˜fâ€™:â€™orangeâ€™}by_column = people.groupby(mapping, axis=1)by_column.sum()\n\n\nä¹ã€å¤šè¡¨æ ¼æ‹¼æ¥pd.merge(df1,df2)#é»˜è®¤è‡ªåŠ¨å¯»æ‰¾ä¸¤ä¸ªè¡¨ä¸­çš„å…¬å…±åˆ—è¿›è¡Œæ‹¼æ¥\npd.merge(df1,df2,on&#x3D;â€œå­¦å·â€œ)#onæ¥æŒ‡å®šè¿æ¥åˆ—ï¼Œè¿æ¥åˆ—è¦æ˜¯å…¬å…±åˆ—\npd.merge(df1,df2,on&#x3D;[â€˜å­¦å·â€™,â€™å§“åâ€™]#onæ¥æŒ‡å®šè¿æ¥åˆ—ï¼Œè¿æ¥åˆ—è¦æ˜¯å…¬å…±åˆ—\npd.merge(df1,df2,left_on&#x3D;â€˜å­¦å·â€™right_on&#x3D;â€™ç¼–å·â€™) #ç”±å…¬å…±åˆ—ï¼Œä½†ç±»åä¸åŒæ—¶ç”¨å·¦å³é”®æŒ‡å®š \npd.merge(df1,df2,left_index&#x3D;â€˜å­¦å·â€™right_index&#x3D;â€™ç¼–å·â€™)#ä¸¤è¡¨å…¬å…±åˆ—éƒ½æ˜¯ç´¢å¼•åˆ—æ—¶\npd.merge(df1,df2,left_index&#x3D;â€˜å­¦å·â€™right_on&#x3D;â€™ç¼–å·â€™)#å…¬å…±åˆ—ä¸€ä¸ªæ—¶ç´¢å¼•åˆ—ä¸€ä¸ªæ—¶æ™®é€šåˆ— \npd.merge(df1,df2,on&#x3D;â€™å­¦å·â€™,how&#x3D;â€™innerâ€™)#è¿”å›å…¬å…±åˆ—ä¸­å¯¹åº”çš„å…¬å…±å€¼æ‹¼æ¥ï¼ˆå†…è¿æ¥ï¼‰\npd.merge(df1,df2,on&#x3D;â€™å­¦å·â€™,how&#x3D;â€™leftâ€™)#è¿”å›å…¬å…±åˆ—ä¸­å¯¹åº”çš„å·¦è¡¨å€¼ï¼ˆå·¦è¿æ¥ï¼‰\npd.merge(df1,df2,on&#x3D;â€™å­¦å·â€™,how&#x3D;â€™rightâ€™)#è¿”å›å…¬å…±åˆ—ä¸­å¯¹åº”çš„å³è¡¨å€¼ï¼ˆå³è¿æ¥ï¼‰\npd.merge(df1,df2,on&#x3D;â€™å­¦å·â€™,how&#x3D;â€™outerâ€™)#è¿”å›å…¬å…±åˆ—ä¸­å¯¹åº”çš„æ‰€æœ‰å€¼ï¼ˆå¤–è¿æ¥ï¼‰\npd.concat([df1,df2])#ä¸¤ä¸ªç»“æ„ç›¸åŒçš„è¡¨çºµå‘è¿æ¥ï¼Œä¿ç•™åŸç´¢å¼•å€¼\npd.concat([df1,df2]ï¼Œignore_index&#x3D;True)#ä¸¤ä¸ªç»“æ„ç›¸åŒçš„è¡¨çºµå‘è¿æ¥ï¼Œé‡æ–°è®¾ç½®ç´¢å¼•å€¼\npd.concat([df1,df2]ï¼Œignore_index&#x3D;True).drop_duplicates()#æ‹¼æ¥åå»æ‰é‡å¤å€¼\n\nåã€å¯¼å‡ºæ–‡ä»¶df.to_excel(excel_writer=râ€™C:\\users\\zhoulifu\\Desktop\\æµ‹è¯•.xlsxâ€™,sheet_name=â€™æ–‡æ¡£â€™ï¼Œindex=False,columns=[â€˜IDâ€™,â€™é”€é‡â€™,â€˜å§“åâ€™],encoding=â€™utf-8â€™,na_rep=0)\n\nexcel_writerå‚æ•°æŒ‡å®šæ–‡ä»¶è·¯å¾„ï¼Œå¯¼å‡ºæ—¶å»æ‰ç´¢å¼•ï¼Œè®¾ç½®å¯¼å‡ºçš„åˆ—ï¼ŒæŒ‡å®šæ–‡ä»¶ç¼–ç ï¼Œna_repç¼ºå¤±å€¼å¡«å……writer=pd.ExcelWriter(excelpath,engine=â€™xlsxwirterâ€™)å¯¼å‡ºå¤šä¸ªæ–‡ä»¶è‡³ä¸€ä¸ªæ–‡ä»¶çš„å¤šä¸ªsheetï¼›\næ–¹æ³•1ï¼šfrom shutil import copyfile\n\ntemplate &#x3D; r&quot;test.xlsx&quot;\nout_xl &#x3D; r&quot;out.xlsx&quot;\ncopyfile(template, out_xl)\n\nwith pd.ExcelWriter(out_xl,engine&#x3D;&#39;openpyxl&#39;,mode&#x3D;&#39;a&#39;,if_sheet_exists&#x3D;&#39;replace&#39;) as writer:\n    #ç”¨openpyxlä¸ä¼šåˆ é™¤excelè¡¨ä¸­åŸæœ‰sheetï¼Œæ›´ä¿é™©ï¼æ–‡ä»¶å·²å­˜åœ¨éœ€è¦æ›¿æ¢æ‰å°±åŠ if_sheet_exists&#x3D;&#39;replace&#39;ï¼Œè¡¨åå·²å­˜åœ¨çš„è¯å°±æ›¿æ¢ï¼Œä¸å­˜åœ¨æ˜¯æ–°å¢çš„è¯ï¼Œä¸è¦åŠ è¿™ä¸ªå‚æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™\n    df1.to_excel(writer,sheet_name&#x3D;&#39;è¡¨ä¸€&#39;,index&#x3D; False)\n#writer.save()\n#writer.close()\næ–¹æ³•2ï¼šè¿™ç§æ–¹å¼ä¸ä¼šæŠ¥æ•°æ®é”™è¯¯df &#x3D; pd.read_excel(path,sheet_name&#x3D;&#39;test3&#39;)\n#å†™å…¥åˆ°åŸExcelè¡¨ä¸­é¿å…æ¸…ç©ºå…¶ä»–æ•°æ®\nbook &#x3D; openpyxl.load_workbook(path)   #è¯»å–ä½ è¦å†™å…¥çš„workbook\n#å’Œpd.read_excel() ç”¨äºå°†Dataframeå†™å…¥excelã€‚xlsç”¨xlwtã€‚xlsxç”¨openpyxl\nwith pd.ExcelWriter(path,engine&#x3D;&#39;openpyxl&#39;) as writer:\n    ##æ­¤æ—¶çš„writeré‡Œè¿˜åªæ˜¯è¯»å†™å™¨. ç„¶åå°†ä¸Šé¢è¯»å–çš„bookå¤åˆ¶ç»™writer\n    writer.book &#x3D; book\n    #è½¬åŒ–ä¸ºå­—å…¸çš„å½¢å¼\n    writer.sheets &#x3D; dict((ws.title, ws) for ws in book.worksheets)#è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œsheetåå’Œsheetå¯¹è±¡ç»„æˆçš„é”®å€¼å¯¹\n    #å°†dataå†™å…¥writerï¼Œè¿™é‡Œæœ‰æ—¶å€™éœ€è¦å¯¹å¤šä¸ªå˜é‡å®ç°å¾ªç¯å†™å…¥,å¯ä»¥ä½¿ç”¨forå¾ªç¯+eval()\n    df.to_excel(writer,sheet_name&#x3D;&quot;æµ‹è¯•&quot;,index&#x3D;False)\n#writer.save()\n#writer.close()\nto_jsondata &#x3D; df([[&#39;a&#39;, &#39;b&#39;], [&#39;c&#39;, &#39;d&#39;]], index&#x3D;[&#39;row 1&#39;, &#39;row 2&#39;], columns&#x3D;[&#39;col 1&#39;, &#39;col 2&#39;])\njson_columns &#x3D; data.to_json(orient &#x3D; &quot;columns&quot;) # è¿”å›ç»“æœï¼š\n &#39;&#123;&quot;col 1&quot;:&#123;&quot;row 1&quot;:&quot;a&quot;,&quot;row 2&quot;:&quot;c&quot;&#125;,&quot;col 2&quot;:&#123;&quot;row 1&quot;:&quot;b&quot;,&quot;row 2&quot;:&quot;d&quot;&#125;&#125;&#39;\njson_split &#x3D; data.to_json(orient &#x3D; &quot;split&quot;)  # è¿”å›ç»“æœï¼š\n &#39;&#123;&quot;columns&quot;:[&quot;col 1&quot;,&quot;col 2&quot;],&quot;index&quot;:[&quot;row 1&quot;,&quot;row 2&quot;],&quot;data&quot;:[[&quot;a&quot;,&quot;b&quot;],[&quot;c&quot;,&quot;d&quot;]]&#125;&#39;\njson_records &#x3D; data.to_json(orient &#x3D; &quot;records&quot;)  # è¿”å›ç»“æœï¼š\n &#39;[&#123;&quot;col 1&quot;:&quot;a&quot;,&quot;col 2&quot;:&quot;b&quot;&#125;,&#123;&quot;col 1&quot;:&quot;c&quot;,&quot;col 2&quot;:&quot;d&quot;&#125;]&#39;\njson_index &#x3D; data.to_json(orient &#x3D; &quot;index&quot;)  # è¿”å›ç»“æœï¼š\n&#39;&#123;&quot;row 1&quot;:&#123;&quot;col 1&quot;:&quot;a&quot;,&quot;col 2&quot;:&quot;b&quot;&#125;,&quot;row 2&quot;:&#123;&quot;col 1&quot;:&quot;c&quot;,&quot;col 2&quot;:&quot;d&quot;&#125;&#125;&#39;\njson_values &#x3D; data.to_json(orient &#x3D; &quot;values&quot;)  # è¿”å›ç»“æœï¼š \n&#39;[[&quot;a&quot;,&quot;b&quot;],[&quot;c&quot;,&quot;d&quot;]]&#39;\nâ€¢ format()å‡½æ•°ï¼Œä¸lambdaå‡½æ•°é…åˆï¼Œå¯ä»¥è®¾ç½®ï¼šå››èˆäº”å…¥ä¿ç•™å°æ•°ä½ã€è½¬åŒ–ä¸ºç™¾åˆ†æ•°ã€æ·»åŠ åƒä½åˆ†éš”ç¬¦ç­‰ä¿ç•™1ä½å°æ•°ï¼šdf[â€œAâ€].map(lambda x: format(x, â€˜.1fâ€™))è®¾ç½®ç™¾åˆ†æ•°ï¼Œå¹¶ä¿ç•™2ä½å°æ•°ï¼šdf[â€œAâ€].map(lambda x: format(x, â€˜.2%â€™))è®¾ç½®åƒä½åˆ†éš”ï¼Œå¹¶ä¿ç•™3ä½å°æ•°ï¼šdf[â€œAâ€].map(lambda x: format(x, â€˜,.3fâ€™))\n\n","slug":"Pythonæ•°æ®åˆ†æï¼špandasæ•°æ®è¯»å–ã€é¢„å¤„ç†ã€ç­›é€‰ã€è®¡ç®—ï¼Œæ—¶é—´åºåˆ—ã€é€è§†ã€æ‹¼æ¥ã€å¯¼å‡º","date":"2021-10-04T06:02:22.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"3cd7e57c6f854790d628f23694417fc5","title":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼špdfå’Œword","content":"python ä½¿ç”¨ PyPDF2 å’Œ pdfplumber æ“ä½œpdf\nPyPDF2 å®˜ç½‘ï¼šhttps://pythonhosted.org/PyPDF2/\nPyPDF2 å¯ä»¥æ›´å¥½çš„è¯»å–ã€å†™å…¥ã€åˆ†å‰²ã€åˆå¹¶ PDF æ–‡ä»¶ï¼›\npdfplumber å®˜ç½‘ï¼šhttps://github.com/jsvine/pdfplumber\npdfplumber å¯ä»¥æ›´å¥½åœ°è¯»å– PDF æ–‡ä»¶å†…å®¹å’Œæå– PDF ä¸­çš„è¡¨æ ¼ï¼›\næŸ¥æ‰¾æŸä¸ªåŒ… anaconda search -t conda pdfplumberä¸‹è½½æŸä¸ªåŒ… anaconda show package\n\npython æå– PDF æ–‡å­—å†…å®¹1ï¼‰åˆ©ç”¨ pdfplumber æå–æ–‡å­—import PyPDF2 \nimport pdfplumber \nwith pdfplumber.open(&quot;test.pdf&quot;) as p: \npage &#x3D; p.pages[2] \nprint(page.extract_text())#æ‰“å°ç¬¬3é¡µæ‰€æœ‰æ–‡å­—\n2ï¼‰åˆ©ç”¨ pdfplumber æå–è¡¨æ ¼å¹¶å†™å…¥ excel\nextract_table()ï¼šå¦‚æœä¸€é¡µæœ‰ä¸€ä¸ªè¡¨æ ¼ï¼›\nextract_tables()ï¼šå¦‚æœä¸€é¡µæœ‰å¤šä¸ªè¡¨æ ¼ï¼›import PyPDF2 \nimport pdfplumber \nfrom openpyxl import Workbook \nwith pdfplumber.open(&quot;test.pdf&quot;) as p: \npage &#x3D; p.pages[4] \ntable &#x3D; page.extract_table() \nprint(table) \nworkbook &#x3D; Workbook()\nsheet &#x3D; workbook.active \nfor row in table: \n  if not &quot;&quot;.join([str(i) for i in row]) &#x3D;&#x3D; &quot;&quot;:\n  #å°†åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ éƒ½è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœè¿˜æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²é‚£ä¹ˆè‚¯å®šå°±æ˜¯ç©ºè¡Œã€‚\n    sheet.append(row)\n  #sheet.append(row) #ç›´æ¥appendè¿™é‡Œæå–å‡ºæ¥çš„è¡¨æ ¼æœ‰å¾ˆå¤šç©ºè¡Œ\nworkbook.save(filename &#x3D; &quot;æ–°pdf.xlsx&quot;)\næå–è¡¨æ ¼è¿™ä¹Ÿæ˜¯ä¸€ç§æ–¹å¼ï¼šhttps://github.com/camelot-dev/camelot\n\n3ã€PDF åˆå¹¶åŠé¡µé¢çš„æ’åºå’Œæ—‹è½¬1ï¼‰åˆ†å‰²åŠåˆå¹¶ pdfâ‘  åˆå¹¶ pdfé¦–å…ˆï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥å‘ç°è¿™é‡Œå…±æœ‰ä¸‰ä¸ª PDF æ–‡ä»¶éœ€è¦æˆ‘ä»¬åˆå¹¶ã€‚åŒæ—¶å¯ä»¥å‘ç°ä»–ä»¬çš„æ–‡ä»¶åéƒ½æ˜¯æœ‰è§„å¾‹çš„(å¦‚æœæ–‡ä»¶åï¼Œæ²¡æœ‰å…ˆåé¡ºåºï¼Œæˆ‘ä»¬åˆå¹¶èµ·æ¥å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚)\nfrom PyPDF2 import PdfFileReader, PdfFileWriter \npdf_writer &#x3D; PdfFileWriter() \nfor i in range(1,len(os.listdir(r&quot;G:\\concat_pdf&quot;))+1):\n  print(i*50+1,(i+1)*50) \n  pdf_reader &#x3D; PdfFileReader(&quot;G:\\concat_pdf\\&#123;&#125;-&#123;&#125;.pdf&quot;.format(i*50+1,(i+1)*50))  \n  #è¿™é‡Œæ˜¯æŒ‡æ–‡ä»¶åçš„æ ¼å¼ä¸º51-100ï¼Œ101-150ã€151-200\n  for page in range(pdf_reader.getNumPages()):\n    pdf_writer.addPage(pdf_reader.getPage(page)) \nwith open(&quot;G:\\concat_pdf\\merge.pdf&quot;, &quot;wb&quot;) as out: \n  pdf_writer.write(out)\nâ‘¡ æ‹†åˆ† pdfè¿™é‡Œæœ‰ä¸€ä¸ªâ€œæ—¶é—´åºåˆ—.pdfâ€çš„æ–‡ä»¶ï¼Œå…± 3 é¡µï¼Œæˆ‘ä»¬å°†å…¶æ¯ä¸€é¡µå­˜ä¸ºä¸€ä¸ª PDF æ–‡ä»¶ã€‚\nfrom PyPDF2 import PdfFileReader, PdfFileWriter \npdf_reader &#x3D; PdfFileReader(r&quot;G:\\concat_pdf\\æ—¶é—´åºåˆ—.pdf&quot;) \nfor page in range(pdf_reader.getNumPages()): \n  pdf_writer &#x3D; PdfFileWriter() \n  pdf_writer.addPage(pdf_reader.getPage(page)) \n  with open(f&quot;G:\\concat_pdf\\\\&#123;page&#125;.pdf&quot;, &quot;wb&quot;) as out: \n    pdf_writer.write(out)\n2ï¼‰æ—‹è½¬åŠæ’åº pdfâ‘  æ—‹è½¬ pdf\n\n.rotateClockwise(90 çš„å€æ•°)ï¼šé¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦\n.rotateCounterClockwise(90 çš„å€æ•°)ï¼šé€†æ—¶é’ˆæ—‹è½¬ 90 åº¦from PyPDF2 import PdfFileReader, PdfFileWriter\npdf_reader &#x3D; PdfFileReader(r&quot;G:\\concat_pdf\\æ—¶é—´åºåˆ—.pdf&quot;) \npdf_writer &#x3D; PdfFileWriter() \nfor page in range(pdf_reader.getNumPages()): \n  if page % 2 &#x3D;&#x3D; 0: \n    rotation_page &#x3D; pdf_reader.getPage(page).rotateCounterClockwise(90) \n  else: \n    rotation_page &#x3D; pdf_reader.getPage(page).rotateClockwise(90) \n  pdf_writer.addPage(rotation_page) \n  with open(&quot;G:\\concat_pdf\\æ—‹è½¬.pdf&quot;, &quot;wb&quot;) as out: \n    pdf_writer.write(out)\n&quot;&quot;&quot; \nä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¾ªç¯éå†äº†è¿™ä¸ª pdfï¼Œå¯¹äºå¶æ•°é¡µæˆ‘ä»¬é€†æ—¶é’ˆæ—‹è½¬ 90Â°ï¼Œå¯¹äºå¥‡æ•°é¡µæˆ‘\nä»¬é¡ºæ—¶é’ˆæ—‹è½¬ 90Â°ï¼› æ³¨æ„ï¼šæ—‹è½¬çš„è§’åº¦åªèƒ½æ˜¯ 90 çš„å€æ•°ï¼›\n&quot;&quot;&quot;\nâ‘¡ æ’åº pdfPDF æ–‡ä»¶éœ€è¦å€’åºæ’åˆ—ï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ\n\nfrom PyPDF2 import PdfFileReader, PdfFileWriter \npdf_reader &#x3D; PdfFileReader(r&quot;G:\\concat_pdf\\æ—¶é—´åºåˆ—.pdf&quot;) \npdf_writer &#x3D; PdfFileWriter() \nfor page in range(pdf_reader.getNumPages()-1, -1, -1): \n#è¿™é‡Œç”¨åˆ°rangeï¼Œå¾ˆå·§å¦™\n  pdf_writer.addPage(pdf_reader.getPage(page)) \n  with open(&quot;G:\\concat_pdf\\å€’åº.pdf&quot;, &quot;wb&quot;) as out:\n    pdf_writer.write(out)\n4ã€pdf æ‰¹é‡åŠ æ°´å°åŠåŠ å¯†ã€è§£å¯†1ï¼‰æ‰¹é‡åŠ æ°´å°from PyPDF2 import PdfFileReader, PdfFileWriter \nfrom copy import copy \nwater &#x3D; PdfFileReader(r&quot;G:\\concat_pdf\\æ°´å°.pdf&quot;) \nwater_page &#x3D; water.getPage(0) \npdf_reader &#x3D; PdfFileReader(r&quot;G:\\concat_pdf\\aa.pdf&quot;) \npdf_writer &#x3D; PdfFileWriter() \nfor page in range(pdf_reader.getNumPages()): \n  my_page &#x3D; pdf_reader.getPage(page) \n  new_page &#x3D; copy(water_page) \n  new_page.mergePage(my_page) \n  pdf_writer.addPage(new_page) \n  with open(&quot;G:\\concat_pdf\\\\æ·»åŠ æ°´å°åçš„ aa.pdf&quot;, &quot;wb&quot;) as out: \n    pdf_writer.write(out) \n&quot;&quot;&quot; \nè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šè¿›è¡Œ pdf åˆå¹¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›â€œæ°´å°â€åœ¨ä¸‹é¢,\næ–‡å­—åœ¨ä¸Šé¢ï¼Œå› æ­¤ æ˜¯â€œæ°´å°â€.mergePage(â€œå›¾ç‰‡é¡µâ€)\n&quot;&quot;&quot;\n2ï¼‰æ‰¹é‡åŠ å¯†ã€è§£å¯†\nè¿™é‡Œçš„â€œè§£å¯†â€ï¼Œæ˜¯åœ¨çŸ¥é“ pdf çš„å¯†ç ä¸‹ï¼Œå»æ‰“å¼€ pdfï¼Œè€Œä¸æ˜¯æš´åŠ›ç ´è§£ï¼›â‘  åŠ å¯† pdf\nfrom PyPDF2 import PdfFileReader, PdfFileWriter \npdf_reader &#x3D; PdfFileReader(r&quot;G:\\concat_pdf\\test.pdf&quot;) \npdf_writer &#x3D; PdfFileWriter() \nfor page in range(pdf_reader.getNumPages()): \npdf_writer.addPage(pdf_reader.getPage(page)) \n# æ·»åŠ å¯†ç \npdf_writer.encrypt(&quot;a123456&quot;)\nwith open(&quot;G:\\concat_pdf\\\\test.pdf&quot;, &quot;wb&quot;) as out: \npdf_writer.write(out)\nâ‘¡ è§£å¯† pdf å¹¶ä¿å­˜ä¸ºæœªåŠ å¯†çš„ pdf\nfrom PyPDF2 import PdfFileReader, PdfFileWriter \npdf_reader &#x3D; PdfFileReader(r&quot;G:\\concat_pdf\\test.pdf&quot;) \n# è§£å¯†\npdf pdf_reader.decrypt(&quot;a123456&quot;) \npdf_writer &#x3D; PdfFileWriter() \nfor page in range(pdf_reader.getNumPages()): \n  pdf_writer.addPage(pdf_reader.getPage(page))\n  with open(&quot;G:\\concat_pdf\\æœªåŠ å¯†.pdf&quot;, &quot;wb&quot;) as out: \n    pdf_writer.write(out)\npython ä½¿ç”¨ python-docx æ“ä½œ word1ã€python-docx åº“ä»‹ç»\nè¯¥æ¨¡å—å„¿å¯ä»¥åˆ›å»ºã€ä¿®æ”¹ Wordï¼ˆ.docxï¼‰æ–‡ä»¶ï¼›\n\næ­¤æ¨¡å—å„¿ä¸å±äº python æ ‡å‡†åº“ï¼Œéœ€è¦å•ç‹¬å®‰è£…ï¼›\n\npython-docx ä½¿ç”¨å®˜ç½‘ï¼š https://python-docx.readthedocs.io/en/latest/ï¼›\n\næˆ‘ä»¬åœ¨å®‰è£…æ­¤æ¨¡å—å„¿ä½¿ç”¨çš„æ˜¯ pip install python-docxï¼Œä½†æ˜¯åœ¨å¯¼å…¥çš„æ—¶å€™æ˜¯ importdocxï¼› \n2ã€Python è¯»å– Word æ–‡æ¡£å†…å®¹\næ³¨æ„ï¼šæ¯è¿›è¡Œä¸€ä¸ªæ“ä½œï¼Œå¿…é¡»ä¿å­˜ä¸€ä¸‹ï¼Œå¦åˆ™ç­‰äºç™½åšï¼›1ï¼‰word æ–‡æ¡£ç»“æ„ä»‹ç»\n\n\n2ï¼‰python-docx æå–æ–‡å­—å’Œæ–‡å­—å—å„¿â‘  python-docx æå–æ–‡å­—æœ‰ä¸€ä¸ªè¿™æ ·çš„ docx æ–‡ä»¶ï¼Œæå–å…¶ä¸­çš„æ–‡å­—\nfrom docx import Document \ndoc &#x3D; Document(r&quot;G:\\concat_word\\test1.docx&quot;) \nprint(doc.paragraphs) \nfor paragraph in doc.paragraphs: \n  print(paragraph.text)\nâ‘¡ python-docx æå–æ–‡å­—å—å„¿\nfrom docx import Document \ndoc &#x3D; Document(r&quot;G:\\concat_word\\test1.docx&quot;) \nprint(doc.paragraphs) \nfor i range(len((doc.paragraphs)):\n#è¿™é‡ŒæŒ‰æ®µè½è¿›è¡Œå¾ªç¯\n  paragraph &#x3D; doc.paragraphs[i] \n  runs &#x3D; paragraph.runs \n  print(runs) \n  for run in paragraph.runs: \n    print(run.text)\n3ï¼‰åˆ©ç”¨ Python å‘ Word æ–‡æ¡£å†™å…¥å†…å®¹\nfrom docx import Document \ndoc &#x3D; Document(r&quot;G:\\concat_word\\test1.docx&quot;) \n# print(doc.add_heading(&quot;ä¸€çº§æ ‡é¢˜&quot;, level&#x3D;1)) æ·»åŠ ä¸€çº§æ ‡é¢˜çš„æ—¶å€™å‡ºé”™ï¼Œè¿˜æ²¡æœ‰è§£å†³ï¼\nparagraph1 &#x3D; doc.add_paragraph(&quot;è¿™æ˜¯ä¸€ä¸ªæ®µè½&quot;) \nparagraph2 &#x3D; doc.add_paragraph(&quot;è¿™æ˜¯ç¬¬äºŒä¸ªæ®µè½&quot;) \ndoc.save(r&quot;G:\\concat_word\\test1.docx&quot;) \n&quot;&quot;&quot; \næ·»åŠ æ®µè½çš„æ—¶å€™ï¼Œèµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œæ–¹ä¾¿æˆ‘ä»¬åé¢è¿›è¡Œæ ¼å¼è°ƒæ•´ï¼›\n&quot;&quot;&quot;\n\nè¯»å–wordæ–‡æ¡£ä¸­çš„è¡¨æ ¼å†…å®¹import docx\n\nfn &#x3D; r&#39;D:\\é•¿æ¨æ­Œ.docx&#39;\ndoc &#x3D; docx.Document(fn)\n\n# æŒ‰æ®µè½è¯»å–å…¨éƒ¨æ•°æ®\nfor paragraph in doc.paragraphs:\n    print(paragraph.text)\n\n# æŒ‰è¡¨æ ¼è¯»å–å…¨éƒ¨æ•°æ®\nfor table in doc.tables:\n    for row in table.rows:\n        for cell in row.cells:\n            print(cell.text)\n\ntable_num &#x3D; len(doc.tables)\n# è·å–æ–‡æ¡£çš„è¡¨æ ¼ä¸ªæ•°\nprint(table_num)\n\ntable_0 &#x3D; doc.tables[0]\n# é€‰å–ç¬¬ä¸€ä¸ªè¡¨\ntable_rows &#x3D; len(table_0.rows)\n# è·å–ç¬¬ä¸€ä¸ªè¡¨çš„è¡Œæ•°\nprint(table_rows)\n\ntab &#x3D; doc.tables[0].rows[0].cells[0]\n# è·å–ç¬¬ä¸€å¼ è¡¨ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—æ•°æ®\nprint(tab.text)\n\npar &#x3D; doc.paragraphs[2]\n# è¯»å–ç¬¬ä¸‰æ®µæ•°æ®\nprint(par.text)\næ‰¹é‡æå–wordä¸­è¡¨æ ¼å†…å®¹import docx\nimport pandas as pd\nfrom docx import Document #å¯¼å…¥åº“\npath &#x3D; &quot;word2.docx&quot; #æ–‡ä»¶è·¯å¾„\ndocument &#x3D; Document(path) #è¯»å…¥æ–‡ä»¶\ntables &#x3D; document.tables #è·å–æ–‡ä»¶ä¸­çš„è¡¨æ ¼é›†\ntable &#x3D; tables[0]#è·å–æ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªè¡¨æ ¼\n\nfor table in tables:\n    columns &#x3D; [table.cell(0,c).text for c in range(len(table.columns))]#è·å–è¡¨å¤´ \n#     print(columns)\n    values &#x3D; []\n    for i in range(1,len(table.rows)):#ä»è¡¨æ ¼ç¬¬äºŒè¡Œå¼€å§‹å¾ªç¯è¯»å–è¡¨æ ¼æ•°æ®\n        result &#x3D; [table.cell(i,c).text for c in range(len(table.columns))]# è‡ªåŠ¨è·å–æ¯ä¸€è¡Œçš„æ•°æ®\n        #cell(i,0)è¡¨ç¤ºç¬¬(i+1)è¡Œç¬¬1åˆ—æ•°æ®ï¼Œä»¥æ­¤ç±»æ¨\n#         print(result)\n        values.append(result)\n    print(values)\n    print(columns)\n    print(pd.DataFrame(data &#x3D; values,columns&#x3D;columns))\nåœ¨æ“ä½œwordè¿™å—æ„Ÿè§‰å¹¶ä¸æ€ä¹ˆå®ç”¨ï¼Œç­‰é‡åˆ°é—®é¢˜äº†å†åŠ ï¼Œä¹Ÿå¯ä»¥å‚è€ƒhttps://juejin.cn/post/6868073137263607821\n\n","slug":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼špdfå’Œword","date":"2021-08-26T06:16:31.000Z","categories_index":"","tags_index":"è‡ªåŠ¨åŒ–","author_index":"Aurora"},{"id":"ce3f6facdcd7d14d49266cce6ca90c5e","title":"sqlæ•°æ®åˆ†æï¼šè‡ªåŠ¨åŒ–æŠ¥è¡¨ï¼Œå¤šåœºæ™¯æŒç»­æ›´æ–°","content":"å»ºè¡¨CREATE TABLE &#96;cd_20210414&#96; (\n  &#96;id&#96; int(11) NOT NULL AUTO_INCREMENT,\n  &#96;platform&#96; varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT &#39;&#39; COMMENT &#39;å¹³å°&#39;,\n  &#96;platform_id&#96; varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT &#39;0&#39; COMMENT &#39;å¹³å°id å³storeid&#39;,\n  &#96;product_id&#96; varchar(255) CHARACTER SET utf8mb4 DEFAULT &#39;0&#39; COMMENT &#39;å•†å“id&#39;,\n  &#96;barcode&#96; varchar(50) CHARACTER SET utf8mb4 DEFAULT &#39;0&#39; COMMENT &#39;å•†å“upcç¼–ç &#39;,\t\n  &#96;sort_id&#96; int(11) DEFAULT &#39;0&#39; COMMENT &#39;å•†å“æ’åº&#39;,\n  &#96;title&#96; varchar(255) COLLATE utf8mb4_general_ci DEFAULT &#39;&#39; COMMENT &#39;å•†å“åç§°&#39;,\n  &#96;promotion_price&#96; float(10,2)  DEFAULT null COMMENT &#39;ä¿ƒé”€ä»·&#39;,\n  &#96;full_price&#96;  float(10,2)  DEFAULT null COMMENT &#39;å•†å“åŸä»·&#39;,\n  &#96;product_month_sale&#96; varchar(10) DEFAULT null COMMENT &#39;æœˆé”€&#39;,\n  &#96;promotion&#96; varchar(255)  CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci COMMENT &#39;ä¿ƒé”€æ´»åŠ¨&#39;,\n  &#96;image_url&#96; text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,\n  &#96;catname1&#96; varchar(50) CHARACTER SET utf8mb4 DEFAULT &#39; &#39;,\n&#96;brand&#96; varchar(10) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT &#39;å“ç‰Œ&#39;,\n  &#96;time&#96; datetime DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY (&#96;id&#96;),\n  KEY &#96;a&#96; (&#96;platform&#96;,&#96;platform_id&#96;)\n) ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8mb4 COLLATE&#x3D;utf8mb4_general_ci;\næ–°å¢æ ‡ç­¾åˆ—ï¼ŒåŠ ç´¢å¼•alter table cd_20210414 add COLUMN crawler_id VARCHAR(30);\nalter table cd_20210414 add COLUMN detail_full_price float(12,2);\nalter table cd_20210414 add index a(sku);\nalter table cd_20210414 add index b(platform,platform_id);\næŸ¥è¯¢å½“æœˆæ—¥æœŸåŠå¯¹åº”ä¸Šæœˆæ—¥æœŸmysql\n#å½“æœˆæ—¥æœŸ\nselect DATE_ADD(DATE_SUB(CURDATE(),INTERVAL 1 DAY),interval -day(DATE_SUB(CURDATE(),INTERVAL 1 DAY))+1 day),\nDATE_SUB(CURDATE(),INTERVAL 1 DAY);\n#å¯¹åº”ä¸Šæœˆæ—¥æœŸ\nselect DATE_SUB(DATE_ADD(DATE_SUB(CURDATE(),INTERVAL 1 DAY),interval -day(DATE_SUB(CURDATE(),INTERVAL 1 DAY))+1 day),INTERVAL 1 MONTH),\nDATE_SUB(DATE_SUB(CURDATE(),INTERVAL 1 DAY),INTERVAL 1 MONTH);\n\nhive\n#æ˜¨å¤©\nselect date_format(date_sub(current_date(),1), &#39;yyyyMMdd&#39;);\n#å½“æœˆæœˆåˆ\nselect concat(from_unixtime(unix_timestamp(), &#39;yyyyMM&#39;),&#39;01&#39;);\n#ä¸ŠæœˆåŒæœŸ\nselect date_format(add_months(from_unixtime(unix_timestamp(), &#39;yyyy-MM-dd&#39;),-1),&#39;yyyyMMdd&#39;);\n#æ˜¨å¤©ç¯æ¯”ä¸ŠæœˆåŒæœŸ\nselect date_format(date_sub(add_months(from_unixtime(unix_timestamp(), &#39;yyyy-MM-dd&#39;),-1),1),&#39;yyyyMMdd&#39;);\n#ä¸Šæœˆæœˆåˆ\nselect concat(date_format(add_months(from_unixtime(unix_timestamp(), &#39;yyyy-MM-dd&#39;),-1),&#39;yyyyMM&#39;),&#39;01&#39;);\n\næ¯ä¸ªéƒ¨é—¨è–ªæ°´æœ€é«˜çš„å‘˜å·¥(åŒ…å«éƒ¨é—¨åç§°)\nå‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨è¿›è¡Œè¿æ¥ï¼Œå¯¹éƒ¨é—¨idè¿›è¡Œç»„å†…åˆ†ç»„æ ¹æ®è–ªèµ„é™åºæ’åºï¼Œè¿™é‡Œä½¿ç”¨rank()å¹¶åˆ—ä¹Ÿç®—\nç­›é€‰æ’åºåºå·ä¸º1çš„éƒ¨é—¨ï¼Œå¹¶æŸ¥è¯¢å‘˜å·¥è–ªèµ„\n\nselect * \nfrom \n    (SELECT \n    employee_id\n    ,first_name\n    ,e.department_id\n    ,department_name\n    ,salary \n    ,rank() over(partition by department_id order by salary desc) as salary_rank \n    FROM &#96;employees&#96; e \n    inner join \n    &#96;departments&#96; d \n    on e.department_id &#x3D; d.department_id\n    ) a \nwhere a.salary_rank&#x3D;1;\nä¼—æ•°ã€å¹³å‡æ•°ã€ä¸­ä½æ•°-- æ±‚å‘˜å·¥å·¥èµ„çš„ä¼—æ•°\n\nSELECT salary,count(1) AS cnt\nFROM employees\nGROUP BY salary\nHAVING count(*) &gt;&#x3D; ALL(SELECT COUNT(*) FROM employees GROUP BY salary)\n\n-- æ±‚å‘˜å·¥å·¥èµ„çš„å¹³å‡æ•°\nselect AVG(salary) from employees\n\nselect sum(salary)&#x2F;count(0) as avg_salary \nfrom employees \n\n-- æ±‚å‘˜å·¥å·¥èµ„çš„ä¸­ä½æ•°\n-- ä¸­ä½æ•°å®šä¹‰ï¼šå°†æ•°ä»å°åˆ°å¤§æ’åˆ—ï¼Œè‹¥æ€»æ•°ä¸ºå¥‡æ•°ï¼Œå–ä¸­é—´ä½ç½®çš„æ•°å€¼ã€‚è‹¥æ€»æ•°ä¸ºå¶æ•°ï¼Œå–ä¸­é—´ä½ç½®ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼\n\nselect avg(emp_salary)\nfrom\n(#æ’ä½æ¬¡\nselect salary,\n row_number() over(order by salary) as rn,\ncount(*) over() as n\nfrom employees\n) t \nwhere rn in (floor(n&#x2F;2)+1,if(mod(n,2) &#x3D; 0,floor(n&#x2F;2),floor(n&#x2F;2)+1))\n\nä¸Šã€ä¸‹å››åˆ†ä½æ•°\nå…¨éƒ¨ç©å®¶äººæ•°çš„ä¸­ä½æ•°ã€ä¸Šä¸‹å››åˆ†ä½æ•°\nå†æ ¹æ®äººæ•°æ€»é‡ç»†æ‹† æ’åºå¥½çš„ç©å®¶åœ¨çº¿æ—¶é•¿è¡¨\n\nselect round(count(distinct user_id)&#x2F;4) as ä¸‹å››åˆ†ä½æ•°,\nround(count(distinct user_id)&#x2F;2) as ä¸­ä½æ•°,\nround(count(distinct user_id)&#x2F;4*3) as ä¸Šå››åˆ†ä½æ•°\nfrom tap_fun_test;\nä¸‹å››åˆ†ä½æ•°ï¼š207234 ä¸­ä½æ•°ï¼š414467 ä¸Šå››åˆ†ä½æ•°ï¼š621701\nSELECT min(avg_online_minutes) æœ€å°å€¼,\n(select avg_online_minutes from tap_fun_test ORDER BY avg_online_minutes LIMIT 207233,1) as ä¸‹å››åˆ†ä½æ•°,\n(select avg_online_minutes from tap_fun_test ORDER BY avg_online_minutes LIMIT 414466,1) as ä¸­ä½æ•°,\n(select avg_online_minutes from tap_fun_test ORDER BY avg_online_minutes LIMIT 621700,1) as ä¸Šå››åˆ†ä½æ•°,\nmax( avg_online_minutes) æœ€å¤§å€¼\nFROM &#96;tap_fun_test&#96;\t\næœ€å°å€¼0.0,ä¸‹å››åˆ†ä½æ•°:0.5,ä¸­ä½æ•°:1.666667ï¼Œä¸Šå››åˆ†ä½æ•°ï¼š5ï¼Œæœ€å¤§å€¼ï¼š1605.833333\n\næˆªè‡³å½“å‰ï¼Œæ¯ä¸ªç”¨æˆ·å·²ç»è¿ç»­ç­¾åˆ°çš„å¤©æ•°\næŸ¥å‡ºæœ€åä¸€æ¬¡ä¸ç™»å½•çš„æ—¥æœŸï¼ˆå³æœªç™»å½•æ—¶é—´çš„æœ€å¤§å€¼ï¼‰\nä¸å½“å‰æ—¥æœŸè¿›è¡Œæ¯”è¾ƒï¼ŒäºŒè€…å·®å€¼ä¸ºå‡ å°±æ˜¯è¿ç»­ç™»å½•å‡ å¤©\n\nselect \nuser_id ,\nmax(date),\nDATEDIFF(&#39;2021-02-19&#39;,max(date)) as max_con_days \nfrom user_attendence \nwhere is_sign &#x3D; 0 \ngroup by user_id;\nè®¡ç®—æœ‰å²ä»¥æ¥ç”¨æˆ·æœ€å¤§è¿ç»­ç­¾åˆ°å¤©æ•°ï¼›\nå¯¹ç”¨æˆ·åˆ†ç»„ï¼ŒæŒ‰æ—¥æœŸè¿›è¡Œrow_number()over()æ’åºï¼Œæ’åºåºå·ä¸ºrank;ï¼ˆä¸€ä¸ªç”¨æˆ·ä¸€å¤©åªèƒ½ç­¾åˆ°ä¸€æ¬¡ï¼‰\nå¦‚æœæ—¥æœŸä¸åºå·çš„å·®å€¼ä¸ºç›¸ç­‰ï¼ŒæŒ‰è¿™ä¸ªå·®å€¼è¿›è¡Œåˆ†ç»„å¹¶è®¡æ•°ï¼Œå–æœ€å¤§å€¼\n\nselect \nuser_id \n,max(æ¬¡æ•°) &#96;æœ€å¤§è¿ç»­ç™»å½•å¤©æ•°&#96;\nfrom \n    (select user_id \n    ,subdate(a.&#96;date&#96;,a.rn) diff \n    ,count(*) æ¬¡æ•°\n    from \n        (select \n        user_id \n        ,date,\n        row_number() over(partition by user_id order by date asc) rn\n        from user_attendence  \n        where is_sign &#x3D; 1\n        ) a \n    group by user_id,diff\n    ) b \ngroup by user_id;\nç”¨æˆ·æœ€å¤§è¿ç»­è´­ä¹°å¤©æ•°åŠæ¬¡æ•°æœ€é‡Œé¢å­æŸ¥è¯¢å…ˆå¯¹æ—¥æœŸè¿›è¡Œèšåˆï¼Œå°†è´­ä¹°æ¬¡æ•°æ±‚å’Œï¼Œç„¶åç±»æ¯”è¿ç»­ç­¾åˆ°\nselect \nuser_id \n,max(count_days) &#96;å¤©æ•°&#96;\n,sum(sum_user_counts) &#96;æ¬¡æ•°&#96;\nfrom \n    (select user_id \n    ,subdate(a.&#96;date&#96;,a.rn) diff \n    ,count(*) count_days\n\t,sum(user_counts) sum_user_counts\n    from \n        (select \n        user_id \n        ,&#96;date&#96;\n        ,row_number() over(partition by user_id order by &#96;date&#96; asc) rn\n\t\t,user_counts\n        from (\n\t\t\t\tselect user_id\n\t\t\t\t,DATE_FORMAT(pur_dt,&quot;%Y-%m-%d&quot;) &#96;date&#96;\n\t\t\t\t,count(&#96;month&#96;) user_counts \n\t\t\t\tfrom cd_now \n\t\t\t\tgroup by user_id,DATE_FORMAT(pur_dt,&quot;%Y-%m-%d&quot;)\n\t\t\t\t) m \n        ) a \n    group by user_id,diff\n    ) b \ngroup by user_id;\n\næŸä¸€å¤©ä»¥åŠè¿‘ä¸ƒå¤©æ–°å¢ç”¨æˆ·æ•°\næŒ‡å®šå½“å‰æ—¥æœŸä¸º1998-02-10ï¼Œä½¿ç”¨date_subç¡®å®šå‰ä¸ƒå¤©æ—¥æœŸ\nä½¿ç”¨ifåˆ¤å®šç”¨æˆ·æ˜¯å¦å½“æ—¥æ³¨å†Œï¼ŒDISTINCTè¿›è¡Œå»é‡\n\nset @date_day &#x3D; &quot;1998-02-10&quot;;\n\nselect \ncount(DISTINCT if(DATE_FORMAT(pur_dt,&quot;%Y-%m-%d&quot;)&#x3D;@date_day,user_id,null)) as new_id\n,count(DISTINCT user_id) as user_7\n,count(DISTINCT user_id)&#x2F;7 as avg7_id\nfrom \ncd_now \nwhere \nDATE_FORMAT(pur_dt,&quot;%Y-%m-%d&quot;) between DATE_SUB(@date_day,INTERVAL 7 day) and @date_day\næ”¯ä»˜é‡‘é¢åœ¨å‰ 20%çš„ç”¨æˆ·-- é—®é¢˜ï¼šæ±‚æ”¯ä»˜é‡‘é¢åœ¨å‰ 20%çš„ç”¨æˆ·\nselect \na.user_name \n,a.sum_amount \nfrom \n(select \nuser_name \n,sum(pay_amount) sum_amount \n,ntile(5) over(order by sum(pay_amount) desc) sum_amount_rank \n-- ,sum(pay_amount) over(order by user_name) cumsum\n-- ,round(sum(pay_amount) over(order by user_name)&#x2F;sum(pay_amount) over(),4) cumsum_rate\nfrom user_sales_table \ngroup by user_name ) a \nwhere a.sum_amount_rank &#x3D; 1 \næ¯æœˆæœ€å—æ¬¢è¿çš„å‰ä¸‰åselect \n*\nfrom \n\t(select \n\ta.å“ç‰Œ\n\t,a.mon\n\t,a.num\n\t,row_number()over(PARTITION by a.mon order by a.num desc) as num_rank\t\n\tfrom \n\t\t(SELECT \n\t\t*\n\t\t,date_format(æ—¥æœŸ,&quot;%Y-%m-01&quot;) mon\n\t\t,count(orser_id) num\n\t\tFROM &#96;alcohol&#96;\n\t\tgroup by \n\t\tdate_format(æ—¥æœŸ,&quot;%Y-%m-01&quot;) ,å“ç‰Œ) a\n\t) b \nwhere b.num_rank&lt;4 \norder by b.mon asc \nç”¨æˆ·ç•™å­˜\nç”¨æˆ·ç¬¬ä¸€æ¬¡è´­ä¹°æ—¶é—´å’Œæœ€åä¸€æ¬¡è´­ä¹°æ—¶é—´ï¼Œæ ¹æ®user_idè¿›è¡Œè¿æ¥ï¼Œè®¡ç®—è´­ä¹°æ—¶é—´é—´éš”\nä½¿ç”¨case when è¿›è¡Œåˆ¤å®š\n\nselect \n(case when t3.day_value&#x3D;1 then &quot;æ¬¡æ—¥ç•™å­˜&quot;\nwhen t3.day_value &#x3D; 3 then &quot;ä¸‰æ—¥ç•™å­˜&quot;\nwhen t3.day_value &#x3D; 7 then &quot;ä¸ƒæ—¥ç•™å­˜&quot;\nelse &quot;å…¶ä»–&quot;\nend\n) as type\n,count(t3.user_id) &quot;ç”¨æˆ·ä¸ªæ•°&quot;\nfrom \n\t(select \n\tt1.user_id\n\t,t1.first_time\n\t,t2.last_time\n\t,datediff(t2.last_time,t1.first_time) day_value\n\tfrom\n\t\t(select \n\t\tuser_id\n\t\t,date(min(pur_dt)) first_time\n\t\tfrom cd_now \n\t\tgroup by \n\t\tuser_id) t1\n\t\tleft join \n\t\t(select \n\t\tuser_id\n\t\t,date(max(pur_dt)) last_time\n\t\tfrom cd_now\n\t\tgroup by \n\t\tuser_id\n\t\t) t2\n\ton t1.user_id&#x3D;t2.user_id\n\t) t3\ngroup by \n(case when t3.day_value&#x3D;1 then &quot;æ¬¡æ—¥ç•™å­˜&quot;\nwhen t3.day_value &#x3D; 3 then &quot;ä¸‰æ—¥ç•™å­˜&quot;\nwhen t3.day_value &#x3D; 7 then &quot;ä¸ƒæ—¥ç•™å­˜&quot;\nelse &quot;å…¶ä»–&quot;\nend\n) \näº§å“ç•™å­˜ä¸€å…±ä¸‰ä¸ªå­—æ®µï¼šä¸‹å•æ—¥æœŸï¼Œäº§å“åç§°ï¼Œç”¨æˆ·idï¼›\nå‰7å¤©çš„è´­ä¹°ç”¨æˆ·ä½œä¸ºæ–°å®¢ï¼Œå24å¤©æ— è´­ä¹°çš„ä¸ºæµå¤±ï¼›å24å¤©æœ‰è´­ä¹°ä¸ºå¤è´­ï¼šè´­ä¹°ç›¸åŒäº§å“çš„ä¸ºç•™å­˜ï¼Œè´­ä¹°å…¶ä»–çš„ä¸ºæ›¿æ¢ï¼›\nå…ˆæŸ¥totalå…¨é‡æ•°æ®temp1ï¼Œç„¶åå‰7å¤©è´­ä¹°å’Œå24å¤©è´­ä¹°æ•°æ®ï¼Œæ¥ç€ä¾æ¬¡æŸ¥è¯¢æ–°å®¢ã€å¤è´­ã€ç•™å­˜ã€‚\nwith temp1 as (\n\tSELECT \n\tpt\n\t,spec_name\n\t,user_id\n\tFROM &#96;order_item&#96; \n\twhere pt between &#39;20211001&#39; and &#39;20211031&#39; \n),\ntemp07 as (\n\tselect \n\tpt\n\t,spec_name\n\t,user_id\n\tfrom temp1\n\twhere pt between &#39;20211001&#39; and &#39;20211007&#39;\n),\ntemp24 as (\n\tselect \n\tpt\n\t,spec_name\n\t,user_id\n\tfrom temp1\n\twhere pt between &#39;20211008&#39; and &#39;20211031&#39;\n),\ntemp_xinke as (\n\tselect \n\tspec_name\n\t,count(distinct user_id) &#96;user_xinke&#96;\n\tfrom temp07\n\tgroup by spec_name\n),\ntemp_fugou as (\n\tselect \n\ttemp07.spec_name \n\t,count(distinct temp07.user_id) &#96;user_fugou&#96;\n\tfrom temp07 \n\tinner join temp24\n\ton temp07.user_id&#x3D;temp24.user_id \n\tgroup by temp07.spec_name\n),\ntemp_liucun as (\n\tselect \n\ttemp07.spec_name \n\t,count(distinct temp07.user_id) &#96;user_liucun&#96;\n\tfrom temp07 \n\tinner join temp24\n\ton temp07.user_id&#x3D;temp24.user_id and temp07.spec_name&#x3D;temp24.spec_name \n\tgroup by temp07.spec_name\n),\ntemp_total as (\n\tselect \n\ttemp_xinke.spec_name &#96;äº§å“åç§°&#96;\n\t,temp_xinke.&#96;user_xinke&#96; &#96;æ–°å®¢äººæ•°&#96;\n\t,temp_fugou.&#96;user_fugou&#96; &#96;å¤è´­äººæ•°&#96;\n\t,temp_liucun.&#96;user_liucun&#96; &#96;ç•™å­˜äººæ•°&#96;\n\t,temp_xinke.&#96;user_xinke&#96;-temp_fugou.&#96;user_fugou&#96; &#96;æµå¤±äººæ•°&#96;\n\t,temp_fugou.&#96;user_fugou&#96;-temp_liucun.&#96;user_liucun&#96; &#96;æ›¿æ¢äººæ•°&#96;\n\tfrom temp_xinke \n\tinner join temp_fugou on temp_xinke.spec_name&#x3D; temp_fugou.spec_name\n\tinner join temp_liucun on temp_xinke.spec_name &#x3D; temp_liucun.spec_name\n) select * from temp_total;\n\n\n\næ–°è€å®¢&amp;å¤è´­with temp1 as ( # 1ã€æ‰¾å‡ºæ¯ä¸ªç”¨æˆ·ç¬¬ä¸€æ¬¡ä¸‹å•çš„æ—¶é—´å’Œå¹´æœˆ\nselect user_id,min(pur_dt),date_format(min(pur_dt),&#39;%Y-%m&#39;) &#96;å¹´æœˆ&#96;\nfrom cd_now \ngroup by user_id \n),\n temp2 as(# 2ã€æ‰¾å‡ºæ¯æœˆçš„æ–°å®¢æˆ·æ•°ç›® \nselect user_id,&#96;å¹´æœˆ&#96;,count(user_id) as &#96;æ–°å®¢æˆ·æ•°&#96; \nfrom \n temp1 \ngroup by &#96;å¹´æœˆ&#96; \n ),\n temp3 as( # 3.1ã€æ‰¾å‡ºå½“æœˆæœ‰å¤è´­çš„æ–°å®¢æˆ·æ•°ç›®ï¼Œç¬¬ä¸€æ­¥æ‰¾å‡ºç”¨æˆ·åœ¨ç¬¬ä¸€æ¬¡ä¸‹å•çš„é‚£ä¸ªæœˆçš„è´­ä¹°æ¬¡æ•°\nselect n.user_id,count(n.order_id) as &#96;æ¬¡æ•°&#96;,&#96;å¹´æœˆ&#96; \nfrom cd_now n \n inner join temp1 \non n.user_id &#x3D; temp1.user_id and temp1.&#96;å¹´æœˆ&#96; &#x3D; date_format(pur_dt,&quot;%Y-%m&quot;)\ngroup by temp1.user_id\n ),\n temp4 as ( # 3.2ã€æ‰¾å‡ºå½“æœˆæœ‰å¤è´­çš„æ–°å®¢æˆ·æ•°ç›®,ç¬¬äºŒæ­¥æ˜¯å°†æœ‰å¤è´­çš„æ–°å®¢ç­›é€‰å‡ºæ¥ï¼ˆè´­ä¹°æ¬¡æ•°&gt;&#x3D;2ï¼‰\nselect &#96;å¹´æœˆ&#96;,temp3.user_id,count(temp3.user_id) as &#96;æœ‰å¤è´­çš„æ–°å®¢æˆ·æ•°ç›®&#96;\nfrom temp3 \nwhere &#96;æ¬¡æ•°&#96;&gt;&#x3D;2\ngroup by temp3.&#96;å¹´æœˆ&#96;\n ),\n temp5 as ( # è®¡ç®—å¤è´­ç‡\nselect temp2.&#96;å¹´æœˆ&#96;,temp2.&#96;æ–°å®¢æˆ·æ•°&#96;,ifnull(temp4.&#96;æœ‰å¤è´­çš„æ–°å®¢æˆ·æ•°ç›®&#96;,0) &#96;è€å®¢æˆ·æ•°&#96;,\n ifnull(temp4.&#96;æœ‰å¤è´­çš„æ–°å®¢æˆ·æ•°ç›®&#96;&#x2F;temp2.&#96;æ–°å®¢æˆ·æ•°&#96;,0) &#96;å¤è´­ç‡&#96;\n from temp2\n left join temp4\non temp2.&#96;å¹´æœˆ&#96; &#x3D; temp4.&#96;å¹´æœˆ&#96;\n ) select * from temp5\nrfmæ¨¡å‹-- ç”¨æˆ·id,ä¸‹å•æ¬¡æ•°,æœ€è¿‘ä¸‹å•æ—¶é—´,é¡¾å®¢å®ä»˜,ä¸‹å•é—´éš”,å®ä»˜å®¢å•,rfmç±»å‹,\nselect \na.user_id\n,a.&#96;ä¸‹å•æ¬¡æ•°&#96;\n,a.&#96;æœ€è¿‘ä¸‹å•æ—¶é—´&#96;\n,a.&#96;é¡¾å®¢å®ä»˜&#96;\n,a.&#96;ä¸‹å•é—´éš”&#96;\n,a.&#96;å®ä»˜å®¢å•&#96;\n,case \nwhen a.&#96;ä¸‹å•é—´éš”&#96; &gt; 45 and a.&#96;ä¸‹å•æ¬¡æ•°&#96; &lt;&#x3D; 1 and a.&#96;å®ä»˜å®¢å•&#96; &lt;&#x3D;50 then &#39;111&#39; \nwhen a.&#96;ä¸‹å•é—´éš”&#96; &gt; 45 and a.&#96;ä¸‹å•æ¬¡æ•°&#96; &lt;&#x3D; 1 and a.&#96;å®ä»˜å®¢å•&#96; &gt;50 then &#39;112&#39; \nwhen a.&#96;ä¸‹å•é—´éš”&#96; &gt; 45 and a.&#96;ä¸‹å•æ¬¡æ•°&#96; &gt; 1 and a.&#96;å®ä»˜å®¢å•&#96; &lt;&#x3D;50 then &#39;121&#39; \nwhen a.&#96;ä¸‹å•é—´éš”&#96; &lt;&#x3D; 45 and a.&#96;ä¸‹å•æ¬¡æ•°&#96; &lt;&#x3D; 1 and a.&#96;å®ä»˜å®¢å•&#96; &lt;&#x3D;50 then &#39;211&#39; \nwhen a.&#96;ä¸‹å•é—´éš”&#96; &lt;&#x3D; 45 and a.&#96;ä¸‹å•æ¬¡æ•°&#96; &gt; 1 and a.&#96;å®ä»˜å®¢å•&#96; &lt;&#x3D;50 then &#39;221&#39; \nwhen a.&#96;ä¸‹å•é—´éš”&#96; &lt;&#x3D; 45 and a.&#96;ä¸‹å•æ¬¡æ•°&#96; &lt;&#x3D; 1 and a.&#96;å®ä»˜å®¢å•&#96; &gt; 50 then &#39;212&#39; \nwhen a.&#96;ä¸‹å•é—´éš”&#96; &lt;&#x3D; 45 and a.&#96;ä¸‹å•æ¬¡æ•°&#96; &gt; 1 and a.&#96;å®ä»˜å®¢å•&#96; &gt; 50 then &#39;222&#39; \nwhen a.&#96;ä¸‹å•é—´éš”&#96; &gt; 45 and a.&#96;ä¸‹å•æ¬¡æ•°&#96; &gt; 1 and a.&#96;å®ä»˜å®¢å•&#96; &gt; 50 then &#39;122&#39; \nend as &#39;rfm_type&#39;\nfrom \n(select \nuser_id \n,count(pur_dt) &#96;ä¸‹å•æ¬¡æ•°&#96;\n,date_format(max(pur_dt),&quot;%Y-%m-%d&quot;) &#96;æœ€è¿‘ä¸‹å•æ—¶é—´&#96;\n,sum(pur_amount) &#96;é¡¾å®¢å®ä»˜&#96;\n,datediff(&quot;1998-03-31&quot;,date_format(max(pur_dt),&quot;%Y-%m-%d&quot;)) &#96;ä¸‹å•é—´éš”&#96;\n,avg(pur_amount) as &#96;å®ä»˜å®¢å•&#96;\nfrom supermanzwg.cd_now \nwhere date_format(month,&quot;%Y-%m-%d&quot;) between &quot;1998-01-01&quot; and &quot;1998-03-01&quot;\ngroup by \nuser_id ) a ;\n\nç”¨æˆ·è¡Œä¸º\næœ‰è®¢å•äº‹åŠ¡è¡¨ã€æ”¶è—äº‹åŠ¡è¡¨,è¦æ±‚ï¼šè¯·ç”¨ä¸€å¥SQLå–å‡ºæ‰€æœ‰ç”¨æˆ·å¯¹å•†å“çš„è¡Œä¸ºç‰¹å¾ï¼Œç‰¹å¾åˆ†ä¸ºå·²è´­ä¹°ã€\n\nè´­ä¹°æœªæ”¶è—ã€æ”¶è—æœªè´­ä¹°ã€æ”¶è—ä¸”è´­ä¹°\n# æ•°æ®å‡†å¤‡\ncreate table redbk_orders(\n &#96;id&#96; int(5),\n &#96;user_id&#96; varchar(10),\n &#96;item_id&#96; int(5),\n &#96;par_time&#96; varchar(30),\n &#96;item_num&#96; int(5)\n);\ninsert into redbk_orders values(1,&#39;001&#39;,&#39;201&#39;,&#39;2018-08-31 00:00:01&#39;,1);\ninsert into redbk_orders values(2,&#39;002&#39;,&#39;203&#39;,&#39;2018-09-02 12:00:02&#39;,2);\ninsert into redbk_orders values(3,&#39;003&#39;,&#39;203&#39;,&#39;2018-09-01 00:00:01&#39;,1);\ninsert into redbk_orders values(4,&#39;003&#39;,&#39;203&#39;,&#39;2018-09-04 09:10:30&#39;,1);\ncreate table redbk_favorites(\n &#96;id&#96; int(5),\n &#96;user_id&#96; varchar(10),\n &#96;item_id&#96; INT(5),\n &#96;fav_time&#96; varchar(30)\n);\ninsert into redbk_favorites values(1,&#39;001&#39;,201,&#39;2018-08-31 00:00:01&#39;);\ninsert into redbk_favorites values(2,&#39;002&#39;,202,&#39;2018-09-02 12:00:02&#39;);\ninsert into redbk_favorites values(3,&#39;003&#39;,204,&#39;2018-09-01 00:00:01&#39;);\nselect \no.user_id \n,o.item_id \n,1 as &quot;å·²è´­ä¹°&quot; \n,case when f.item_id is null then 1 else 0 end as &quot;è´­ä¹°æœªæ”¶è—&quot;\n,0 as &quot;æ”¶è—æœªè´­ä¹°&quot; \n,case when f.item_id is not null then 1 else 0 end as &quot;æ”¶è—ä¸”è´­ä¹°&quot;\nfrom myemployees.redbk_orders o \nleft join myemployees.redbk_favorites f \non o.user_id &#x3D; f.user_id and o.item_id &#x3D; f.item_id \nwhere o.user_id is not null \nunion \nselect \no.user_id \n,o.item_id \n,case when o.item_id is not null then 1 else 0 end as &quot;å·²è´­ä¹°&quot; \n,0 as &quot;è´­ä¹°æœªæ”¶è—&quot;\n,case when o.item_id is null then 1 else 0 end as &quot;æ”¶è—æœªè´­ä¹°&quot; \n,case when o.item_id is not null then 1 else 0 end as &quot;æ”¶è—ä¸”è´­ä¹°&quot;\nfrom myemployees.redbk_favorites f \nleft join myemployees.redbk_orders o \non o.user_id &#x3D; f.user_id and o.item_id &#x3D; f.item_id\nwhere o.user_id is not null;\næŸè´­ç‰©APPæœ€è¿‘ä¸Šçº¿äº†ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œç”¨æˆ·ç­¾åˆ°åå¯ä»¥è·³è½¬åˆ°å¤§è½¬ç›˜æŠ½å¥–ï¼ŒæŠ½å¥–è·å¾—çš„å¥–é‡‘å¯ä»¥æŠµæ¶ˆè´­ç‰©çš„è´¹ç”¨ï¼Œä»¥æ­¤æ¥åŸ¹å…»ç”¨æˆ·ä½¿ç”¨appçš„ä¹ æƒ¯ã€‚\n\nç°æœ‰ä¸€å¼ ç”¨æˆ·è¡Œä¸ºè¡¨user_logï¼Œä¸»è¦å­—æ®µå¦‚ä¸‹ï¼Œè®°å½•äº†ç”¨æˆ·åœ¨appä¸Šçš„æ‰€æœ‰è¡Œä¸ºæ—¥å¿—ï¼Œå³ä½•äººuser_idåœ¨ä½•æ—¶event_timeè¿›è¡Œäº†ä»€ä¹ˆæ“ä½œevent_idã€‚\n\n\nè´¡çŒ®åº¦-ç´¯è®¡æ±‚å’Œ\nè®¡ç®—å„ä¸ªç”¨æˆ·çš„æ¶ˆè´¹é‡‘é¢ç»¼åˆ\nå¯¹ç”¨æˆ·æ¶ˆè´¹é‡‘é¢è¿›è¡Œç´¯åŠ ï¼Œå¹¶è®¡ç®—ç´¯è®¡å æ¯”ï¼Œå°±æ˜¯è´¡çŒ®åº¦select \nt.*\nfrom\n\t(select \n\tuser_id \n\t,round(amount,2) amount\n\t,round(sum(amount)over(order by amount desc) ,2) cum_amount\n\t,round(sum(amount)over(order by amount desc)&#x2F;(select sum(pur_amount) from cd_now),4) as cum_rate\n\tfrom \n\t\t(select \n\t\tuser_id \n\t\t,sum(pur_amount) amount\n\t\tfrom \n\t\tcd_now \n\t\twhere pur_amount &gt;0\n\t\tgroup by \n\t\tuser_id ) user_table\n\t) t\nwhere t.cum_rate&lt;0.8\n\nç”µå•†ç±»\nå•†å“æ´»åŠ¨æµæ°´è¡¨ï¼Œè¡¨åä¸ºeventï¼Œå­—æ®µï¼šgoods_idï¼Œ timeï¼›\n\næ±‚å‚åŠ æ´»åŠ¨æ¬¡æ•°æœ€å¤šçš„å•†å“çš„æœ€è¿‘ä¸€æ¬¡å‚åŠ æ´»åŠ¨çš„æ—¶é—´\n\n\næ•°æ®å‡†å¤‡ï¼š\n#åˆ›å»º event è¡¨\nCREATE TABLE &#96;event&#96; (\n &#96;goods_id&#96; varchar(255),\n &#96;time&#96; varchar(255)\n );\n#æ’å…¥æ•°æ®\nINSERT INTO &#96;event&#96; VALUES (&#39;å¯å£å¯ä¹&#39;, &#39;2021-02-22&#39;);\nINSERT INTO &#96;event&#96; VALUES (&#39;é›ªç¢§&#39;, &#39;2021-03-01&#39;);\nINSERT INTO &#96;event&#96; VALUES (&#39;å¯å£å¯ä¹&#39;, &#39;2021-03-04&#39;);\nINSERT INTO &#96;event&#96; VALUES (&#39;ä¸œé¹ç‰¹é¥®&#39;, &#39;2021-03-06&#39;);\nINSERT INTO &#96;event&#96; VALUES (&#39;é›ªç¢§&#39;, &#39;2021-03-07&#39;);\nINSERT INTO &#96;event&#96; VALUES (&#39;çº¢ç‰›&#39;, &#39;2021-03-07&#39;);\nINSERT INTO &#96;event&#96; VALUES (&#39;ä¸œé¹ç‰¹é¥®&#39;, &#39;2021-03-08&#39;);\nINSERT INTO &#96;event&#96; VALUES (&#39;é›ªç¢§&#39;, &#39;2021-03-08&#39;);\n\n-- æ±‚å‚åŠ æ´»åŠ¨æ¬¡æ•°æœ€å¤šçš„å•†å“çš„æœ€è¿‘ä¸€æ¬¡å‚åŠ æ´»åŠ¨çš„æ—¶é—´\n-- ç»Ÿè®¡æ¯ç§å•†å“å‚åŠ æ´»åŠ¨çš„æ¬¡æ•°ï¼Œä»¥åŠæœ€è¿‘ä¸€æ¬¡å‚ä¸æ´»åŠ¨çš„æ—¶é—´\nselect \n*\nfrom \n(select \ngoods_id\n,count(*) goods_num\n,max(time) max_time\nfrom event \ngroup by goods_id) a \norder by goods_num desc limit 1\n\n\næ–°è€å®¢ transå’Œprofile\n\n-- è¯·è®¡ç®—æ¯ä¸€ç±»å®¢æˆ·åœ¨2019å¹´æ¯æœˆäº§ç”Ÿçš„é”€å”®(å³è´­ä¹°é‡‘é¢å¤§äº0ï¼ŒåŠå‘ç”Ÿè´­ä¹°çš„äººæ•°(å®¢æˆ·ç±»å‹åˆ†ä¸º:æ–°å®¢ï¼Œè€å®¢ï¼›æ–°å®¢:2019å¹´äº§ç”Ÿç¬¬ä¸€æ¬¡è´­ä¹°ï¼›è€å®¢:2019å¹´ä¹‹å‰å·²ç»è´­ä¹°è¿‡)\n-- å…ˆåˆ†æ¸…æ–°è€å®¢,åœ¨åˆ†ç±»ç»Ÿè®¡\nselect \nmonth(purchase_date) &#96;æœˆä»½&#96;\n,customer_type  \n,sum(Quantity*Unit_price) &#96;é‡‘é¢&#96;\n,count(*)\nfrom \n(select \nt.*\n,case when year(p.FIRST_PUR_DATE)&#x3D;2019 then &#39;æ–°å®¢&#39; else &#39;è€å®¢&#39; end as &#96;customer_type&#96;\nfrom &#96;trans&#96; t \nleft join &#96;profile&#96; p\non t.Customer_ID &#x3D; p.Customer_ID\nwhere year(purchase_date)&#x3D;2019) a\ngroup by month(purchase_date),customer_type;\n\n-- ç°è¦ç»™2019å¹´æ–°å®¢å‘é€Aã€Bå°æ ·ï¼Œçº¿ä¸Šæ–°å®¢å‘æ”¾Aå°æ ·ï¼Œçº¿ä¸‹æ–°å®¢å‘æ”¾Bå°æ ·ï¼Œè¯·ç¼–å†™ç¨‹åºæŠ½å–ç›¸åº”çš„åå•\n-- å­—æ®µ COUNTERID : offline çº¿ä¸‹ï¼Œonline çº¿ä¸Š\nselect \n*\n,case when COUNTER_ID like &#39;online%&#39; then &#39;A&#39; else &#39;B&#39; end as &#39;demo_type&#39;\nfrom \n(select \nt.*\n,case when year(p.FIRST_PUR_DATE)&#x3D;2019 then &#39;æ–°å®¢&#39; else &#39;è€å®¢&#39; end as &#96;customer_type&#96;\nfrom &#96;trans&#96; t \nleft join &#96;profile&#96; p\non t.Customer_ID &#x3D; p.Customer_ID\nwhere year(purchase_date)&#x3D;2019) a\nwhere &#96;customer_type&#96;&#x3D;&#39;æ–°å®¢&#39;;\n\nç›¸é‚»åº§ä½äº’æ¢create TABLE \n&#96;Seat&#96; (\n\t&#96;id&#96; VARCHAR(255),\n\t&#96;employee&#96; VARCHAR(255)\n);\ninsert INTO &#96;Seat&#96; VALUES (&#39;1&#39;, &#39;Jack&#39;);\nINSERT INTO &#96;Seat&#96; VALUES (&#39;2&#39;, &#39;Scott&#39;);\nINSERT INTO &#96;Seat&#96; VALUES (&#39;3&#39;, &#39;Emery&#39;);\nINSERT INTO &#96;Seat&#96; VALUES (&#39;4&#39;, &#39;Green&#39;);\nINSERT INTO &#96;Seat&#96; VALUES (&#39;5&#39;, &#39;Linda&#39;);\nINSERT INTO &#96;Seat&#96; VALUES (&#39;6&#39;, &#39;Jane&#39;);\n\n#æŸ¥è¯¢æ¯ä¸¤ä¸ªç›¸é‚»çš„åº§ä½äº’æ¢ï¼ˆå¯ä»¥çœ‹ä½œæ˜¯ä¸¤ä¸¤ç›¸é‚»å¥‡æ•°å’Œå¶æ•°å‘¼å”¤ï¼Œå¥‡æ•°ä¸‹ç§»ï¼Œå¶æ•°ä¸Šç§»ï¼‰\nselect \n(case \nwhen mod(id,2)!&#x3D;0 and id!&#x3D;a.counts then id+1 \nwhen mod(id,2)!&#x3D;0 and id&#x3D;a.counts then id \nelse id-1 end) as id \n,employee\nfrom \n&#96;Seat&#96;,(select count(*) counts from &#96;Seat&#96;) a\norder by id;\n\n","slug":"sqlæ•°æ®åˆ†æï¼šè‡ªåŠ¨åŒ–æŠ¥è¡¨ï¼Œå¤šåœºæ™¯æ›´æ–°","date":"2021-08-06T15:19:59.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"d36edaa00a28ef96e171ed217c165e70","title":"python-flaskç–«æƒ…æ•°æ®å¯è§†åŒ–","content":"Flaskæ˜¯ä¸€ä¸ªè½»é‡çº§çš„webæ¡†æ¶ï¼Œçœ‹äº†https://www.bilibili.com/video/BV177411j7qJ å¤§ä½¬çš„è§†é¢‘ï¼Œåšçš„ä¸€ä¸ªç–«æƒ…å¯è§†åŒ–é¡¹ç›®,ï¼ˆç”µè„‘å±å¹•å°çœ‹ç€æœ‰ç‚¹æ‹¥æŒ¤ã€‚å¤§å±å±•ç¤ºè¿˜æ˜¯æŒºå¥½çœ‹çš„ï¼‰ï¼Œçƒ­æœè¯äº‘çš„æ•°æ®æ‰¾ä¸åˆ°ç½‘ç«™äº†ï¼Œå°±å¼„äº†ä¸ªè¡¨æ ¼ï¼›è‡ªå·±ä¿®æ”¹äº†ä¸€äº›éƒ¨åˆ†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»åº·åº·è§†é¢‘ï¼Œåç»­æœ‰æ—¶é—´å†å†™ç‚¹æ€»ç»“ã€‚\n\nå…³äºflaskï¼šhttps://www.cnblogs.com/songboriceboy/category/1867414.htmlhttps://blog.csdn.net/u014793102/category_9285123.html?spm=1001.2014.3001.5482\n","slug":"python-flaskç–«æƒ…æ•°æ®å¯è§†åŒ–","date":"2021-07-21T06:18:39.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"f671959f062d49d2d4345cd4aa269a83","title":"pythonè¿æ¥mysql:è¯»å–ã€å†™å…¥ã€æ›´æ–°ã€åˆ é™¤","content":"1ã€è¿æ¥è¯»å–æ•°æ®ç¬¬ä¸€ç§ï¼šç”¨pymysqlè¿æ¥#å®‰è£…pymysql\nconda install pymysql\n#æˆ–è€…\npip install pymysql\nimport pymysql\n#åˆ›å»ºæ•°æ®åº“è¿æ¥ï¼Œä¾æ¬¡æ˜¯ä¸»æœºåï¼Œç”¨æˆ·åï¼Œå¯†ç ï¼Œè¦æ‰“å¼€çš„æ•°æ®åº“ï¼Œç«¯å£å·å’Œç¼–ç ç±»å‹\ndef get_conn():\n    conn &#x3D; pymysql.connect(\n        host&#x3D;&quot;****&quot;,\n        user&#x3D;&quot;****&quot;,\n        password&#x3D;&quot;****&quot;,\n        db&#x3D;&quot;****&quot;,\n        charset&#x3D;&quot;utf8&quot;,\n        port&#x3D;3306,\n    )\n    # åˆ›å»ºæ¸¸æ ‡ï¼š\n    cursor &#x3D; conn.cursor()\n    return conn, cursor\ndef close_conn(conn, cursor):\n    if cursor:\n        cursor.close()\n    if conn:\n        conn.close()\ndef query(sql, *args):\n    &#39;&#39;&#39;\n    :param sql:\n    :param args:\n    :return:è¿”å›ç»“æœï¼Œæå–æ•°æ®ï¼Œè¿”å›çš„dataæ˜¯ä¸€ä¸ªäºŒç»´å…ƒç»„ï¼Œ((),())å½¢å¼ï¼›\n    &#39;&#39;&#39;\n    conn, cursor&#x3D; get_conn()\n    cursor.execute(sql)\n    res &#x3D; cursor.fetchall() # è·å–ç»“æœ\n    close_conn(conn, cursor)\n    return res\n#è¿”å›çš„æ˜¯æ‰€æœ‰è¡Œåœ¨å¯¹åº”åˆ—çš„å€¼\n\n# connect.commit()\n#å¦‚æœå¯¹æ•°æ®è¿›è¡Œäº†å¢åˆ æ”¹æŸ¥çš„è¯ï¼Œæ‰§è¡Œè¯¥è¯­å¥ï¼Œç›¸å½“äºæŠŠå¯¹æ•°æ®åº“çš„æ“ä½œæäº¤ä¸Šå»ï¼Œå¦åˆ™ä¿®æ”¹ä¸ä¼šç”Ÿæ•ˆ\nclose_conn(conn, cursor)#å½“ç„¶è¦æœ‰å…³é—­æ¸¸æ ‡å’Œæ•°æ®åº“è¿æ¥çš„ä¹ æƒ¯\n\n\nfetchoneä¸fetchallçš„ç†è§£ï¼›ä¸¾ä¸ªä¾‹å­:cursoræ˜¯æˆ‘ä»¬è¿æ¥æ•°æ®åº“çš„å®ä¾‹fetchone()çš„ä½¿ç”¨:è¿”å›å€¼æ˜¯å•ä¸ªçš„å…ƒç»„,ä¹Ÿå°±æ˜¯ä¸€è¡Œè®°å½•,å¦‚æœæ²¡æœ‰ç»“æœ,é‚£å°±ä¼šè¿”å›null\n\ncursor.execute(f&quot;select username,password,nickname from user where id&#x3D;&#123;input&#125;&quot;)\nresult&#x3D;cursor.fetchone();  \næ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡result[0],result[1],result[2]å¾—åˆ°username,password,nickname\nfetchall()çš„ä½¿ç”¨:è¿”å›å€¼æ˜¯å¤šä¸ªå…ƒç»„,å³è¿”å›å¤šä¸ªè¡Œè®°å½•,å¦‚æœæ²¡æœ‰ç»“æœ,è¿”å›çš„æ˜¯()\ncursor.execute(select * from user)\nresult&#x3D;cursor.fetchall();æ­¤æ—¶selectå¾—åˆ°çš„å¯èƒ½æ˜¯å¤šè¡Œè®°å½•,é‚£ä¹ˆæˆ‘ä»¬é€šè¿‡fetchallå¾—åˆ°çš„å°±æ˜¯å¤šè¡Œè®°å½•,æ˜¯ä¸€ä¸ªäºŒç»´å…ƒç»„\n((username1,password1,nickname1),(username2,password2,nickname2),(username3,password3,nickname))\nç¬¬äºŒç§ï¼špandaså†…ç½®çš„read_sql  éœ€è¦å®‰è£…sqlalchemy,ä½†æ˜¯å¯ä»¥DataFrameçš„å½¢å¼è¯»å‡ºæ¥ï¼Œæ–¹ä¾¿å¤šäº†\nconda install sqlalchemy\n#æˆ–è€…\npip install sqlalchemy\nimport pandas as pd\nfrom sqlalchemy import create_engine\ndef reader_sql(query,db&#x3D;&#39;myemployees&#39;):\n    sql &#x3D; query\n    engine &#x3D; create_engine(f&#39;mysql+pymysql:&#x2F;&#x2F;root:&#123;pwd&#125;@localhost:3306&#x2F;&#123;db&#125;?charset&#x3D;utf8&#39;)\n    #æ ¼å¼ä¸€ç‚¹ä¸èƒ½é”™ï¼Œä¾æ¬¡æ˜¯ç”¨æˆ·åï¼Œå¯†ç ï¼ˆ###ï¼‰ï¼Œä¸»æœºåï¼Œç«¯å£å·ï¼Œè¦è¿æ¥çš„æ•°æ®åº“ï¼ŒæŒ‡å®šç¼–ç \n    df &#x3D; pd.read_sql(sql,engine)\n    return df\ndf_departments &#x3D; reader_sql(&#39;select  * from departments&#39;)#è¿™é‡Œè¾“å‡ºçš„æ˜¯ä¸€ä¸ªdataframe\n2ã€å†™å…¥æ•°æ®ç¬¬ä¸€ç§ï¼što_sqlå†™å…¥result.to_sql(name&#x3D;&#39;newtable&#39;,con&#x3D;engine,if_exists&#x3D;&#39;append&#39;,index&#x3D;False)\n#è¿™é‡Œçš„indexå¦‚æœä¸ºTrueçš„è¯ä¹Ÿä¼šæŠ¥é”™ï¼Œæ•°æ®åº“ä¸­æ²¡æœ‰ç´¢å¼•åˆ—ï¼ˆå»ºè¡¨çš„æ—¶å€™æ²¡æœ‰é¢„ç•™ç´¢å¼•åˆ—çš„ä½ç½®ï¼‰\n#é»˜è®¤å‚æ•°æ˜¯failï¼Œå¦‚æœè¿™å¼ è¡¨æœ¬æ¥å­˜åœ¨çš„è¯ï¼Œæ“ä½œå°±ä¼šfailå¤±è´¥æ‰\n#ä¸å»ºè®®è¿™ç§ç›´æ¥å»ºè¡¨æ“ä½œï¼Œè¿™æ ·çš„è¡¨ä¸­å­—æ®µç±»å‹ä¼šæœ‰å˜åŒ–ï¼Œä¸ç¬¦åˆåŸå…ˆæ•°æ®è¦æ±‚\n#å»ºè®®åœ¨workbenchä¸­å…ˆcreate tableå¹¶æŠŠæ‰€æœ‰å­—æ®µçš„ç±»å‹å®šä¹‰å¥½ï¼Œåœ¨ä½¿ç”¨to_sqlè¿›è¡Œå†™å…¥\n\næ–°å»ºè¡¨è®¾ç½®å¥½å­—æ®µç±»å‹æˆ–è€…ç”¨cursor.executeæ‰§è¡Œå»ºè¡¨è¯­å¥åï¼Œå°±å¯ä»¥ç”¨to_sqlå†™å…¥äº†\n\nresult.to_sql(name&#x3D;&#39;new_table2&#39;,con&#x3D;engine,if_exists&#x3D;&#39;append&#39;,index&#x3D;False)\n#è¿™é‡Œæ³¨æ„æ–°å»ºè¡¨çš„æ—¶å€™ä¸€å®šè¦æŠŠå„ä¸ªå­—æ®µçš„ç±»å‹æå‡†ç¡®ï¼Œç¼–ç ææ¸…æ¥šä¸ç„¶æ²¡æ„è¯†åˆ°å‡ºä¸ªé”™ï¼Œå¾ˆéš¾å—\n#å¦‚æœé‡å¤æ‰§è¡Œè¿™è¡Œä»£ç çš„è¯ï¼Œä¼šå¯¼è‡´æ’å…¥çš„æ•°æ®æˆå€æ•°å¢åŠ ï¼Œå› ä¸ºä½ ä¼ å…¥çš„appendå‚æ•°ï¼Œä¼šåœ¨åŸæ•°æ®ä¸Šæ¥ç€æ·»åŠ \n\ndel result[&#39;department_name&#39;]#åˆ æ‰ä¸€åˆ—åå†è¿›è¡Œå†™å…¥\nresult.to_sql(name&#x3D;&#39;new_table2&#39;,con&#x3D;engine,if_exists&#x3D;&#39;append&#39;,index&#x3D;False)\n#å¦‚æœå»ºè¡¨æ—¶åœ¨NNåˆ—æœªå‹¾é€‰ä¸Šçš„è¯ï¼Œä¸ä¼šæŠ¥é”™ï¼Œä¼šå‘ç°åŸæœ¬çš„å€¼æ•°é‡å¤šäº†ä¸€å€ï¼Œä¸”æ–°å¢çš„æ•°æ®ä¸­çš„department_nameåˆ—å‡ä¸ºç©ºå€¼\n#ä½†å¦‚æœå»ºè¡¨æ—¶åœ¨NNåˆ—å‹¾é€‰ä¸Šçš„è¯ï¼Œè¡¨ç¤ºè¯¥å­—æ®µä¸å…è®¸ä¸ºç©ºå€¼ï¼Œå°±ä¼šæŠ¥é”™\n#è¿˜æœ‰å¦‚æœå†™å…¥çš„æ•°æ®å­—æ®µå¤šäº†ï¼Œä¸å»ºè¡¨æ—¶ç»™å®šçš„å­—æ®µæ•°é‡ä¸ç¬¦ä¹Ÿä¼šæŠ¥é”™\n\nå°†excelä¸­åˆ†sheetå†™å…¥æ•°æ®åº“\n\nimport pymysql\nimport pandas as pd\nfrom sqlalchemy import create_engine\nimport xlrd\nfile &#x3D; r&#39;C:\\Users\\sofia.xlsx&#39;\n#åˆ†sheetå†™å…¥æ•°æ®åº“\n# ç„¶åè°ƒç”¨df.to_sql()å‡½æ•°å°†dataframeæ•°æ®å†™å…¥ï¼š\n\n&quot;&quot;&quot; æ‰“å¼€excelè¡¨æ ¼&quot;&quot;&quot;\nworkbook &#x3D; xlrd.open_workbook(file)\nsheet_names &#x3D; workbook.sheet_names()\nfor i in sheet_names :\n    data &#x3D; pd.read_excel(file,sheet_name &#x3D; i,index &#x3D; False,encoding&#x3D;&#39;utf-8&#39;)\n    data.to_sql(i,con&#x3D;engine,if_exists&#x3D;&#39;replace&#39;,index&#x3D;False)\n\n\npd.read_sql()ä»‹ç»\n\npandas.read_sql(sql, con, index_col&#x3D;None, coerce_float&#x3D;True, params&#x3D;None, parse_dates&#x3D;None, columns&#x3D;None, chunksize&#x3D;None)\nå„å‚æ•°æ„ä¹‰ï¼š\nsql:SQLå‘½ä»¤å­—ç¬¦ä¸²\nconï¼šè¿æ¥sqlæ•°æ®åº“çš„engineï¼Œä¸€èˆ¬å¯ä»¥ç”¨SQLalchemyæˆ–è€…pymysqlä¹‹ç±»çš„åŒ…å»ºç«‹\nindex_col: é€‰æ‹©æŸä¸€åˆ—ä½œä¸ºindex\ncoerce_float:éå¸¸æœ‰ç”¨ï¼Œå°†æ•°å­—å½¢å¼çš„å­—ç¬¦ä¸²ç›´æ¥ä»¥floatå‹è¯»å…¥\nparse_dates:å°†æŸä¸€åˆ—æ—¥æœŸå‹å­—ç¬¦ä¸²è½¬æ¢ä¸ºdatetimeå‹æ•°æ®ï¼Œä¸pd.to_datetimeå‡½æ•°åŠŸèƒ½ç±»ä¼¼ã€‚å¯ä»¥ç›´æ¥æä¾›éœ€è¦è½¬æ¢çš„åˆ—åä»¥é»˜è®¤çš„æ—¥æœŸå½¢å¼è½¬æ¢ï¼Œä¹Ÿå¯ä»¥ç”¨å­—å…¸çš„æ ¼å¼æä¾›åˆ—åå’Œè½¬æ¢çš„æ—¥æœŸæ ¼å¼ï¼Œæ¯”å¦‚&#123;column_name: format string&#125;ï¼ˆformat stringï¼š&quot;%Y:%m:%H:%M:%S&quot;ï¼‰ã€‚\ncolumns:è¦é€‰å–çš„åˆ—ã€‚ä¸€èˆ¬æ²¡å•¥ç”¨ï¼Œå› ä¸ºåœ¨sqlå‘½ä»¤é‡Œé¢ä¸€èˆ¬å°±æŒ‡å®šè¦é€‰æ‹©çš„åˆ—äº†\nchunksizeï¼šå¦‚æœæä¾›äº†ä¸€ä¸ªæ•´æ•°å€¼ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›ä¸€ä¸ªgeneratorï¼Œæ¯æ¬¡è¾“å‡ºçš„è¡Œæ•°å°±æ˜¯æä¾›çš„å€¼çš„å¤§å°ã€‚\n##read_sqlæœ¬è´¨ä¸Šæ˜¯read_sql_tableã€read_sql_queryçš„ç»Ÿä¸€æ–¹å¼ã€‚\nä¸‰è€…éƒ½returnè¿”å›DataFrameã€‚\nread_sql_table\nRead SQL database table into a DataFrame.\nread_sql_query\nRead SQL query into a DataFrame.\nto_sqlä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼š\n\n  name: è¾“å‡ºçš„è¡¨å\n  con: ä¸read_sqlä¸­ç›¸åŒ\n  if_exitsï¼š ä¸‰ä¸ªæ¨¡å¼ï¼šfailï¼Œè‹¥è¡¨å­˜åœ¨ï¼Œåˆ™ä¸è¾“å‡ºï¼›replaceï¼šè‹¥è¡¨å­˜åœ¨ï¼Œè¦†ç›–åŸæ¥è¡¨é‡Œçš„æ•°æ®ï¼›appendï¼šè‹¥è¡¨å­˜åœ¨ï¼Œå°†æ•°æ®å†™åˆ°åŸè¡¨çš„åé¢ã€‚é»˜è®¤ä¸ºfail\n  indexï¼šæ˜¯å¦å°†dfçš„indexå•ç‹¬å†™åˆ°ä¸€åˆ—ä¸­\n  index_label:æŒ‡å®šåˆ—ä½œä¸ºdfçš„indexè¾“å‡ºï¼Œæ­¤æ—¶indexä¸ºTrue\n  chunksizeï¼š åŒread_sql\ndtype: æŒ‡å®šåˆ—çš„è¾“å‡ºåˆ°æ•°æ®åº“ä¸­çš„æ•°æ®ç±»å‹ã€‚å­—å…¸å½¢å¼å‚¨å­˜ï¼š{column_name: sql_dtype}ã€‚å¸¸è§çš„æ•°æ®ç±»å‹æœ‰sqlalchemy.types.INTEGER(), sqlalchemy.types.NVARCHAR(),sqlalchemy.Datetime()ç­‰ï¼Œå…·ä½“æ•°æ®ç±»å‹å¯ä»¥å‚è€ƒè¿™é‡Œ  è¿˜æ˜¯ä»¥å†™åˆ°mysqlæ•°æ®åº“ä¸ºä¾‹ï¼šdf.to_sql(name&#x3D;&#39;table&#39;, \n          con&#x3D;con, \n          if_exists&#x3D;&#39;append&#39;, \n          index&#x3D;False,\n          dtype&#x3D;&#123;&#39;col1&#39;:sqlalchemy.types.INTEGER(),\n                 &#39;col2&#39;:sqlalchemy.types.NVARCHAR(length&#x3D;255),\n                 &#39;col_time&#39;:sqlalchemy.DateTime(),\n                 &#39;col_bool&#39;:sqlalchemy.types.Boolean\n          &#125;)\n*æ³¨ï¼š**å¦‚æœä¸æä¾›dtype,to_sqlä¼šè‡ªåŠ¨æ ¹æ®dfåˆ—çš„dtypeé€‰æ‹©é»˜è®¤çš„æ•°æ®ç±»å‹è¾“å‡ºï¼Œæ¯”å¦‚å­—ç¬¦å‹ä¼šä»¥sqlalchemy.types.TEXTç±»å‹è¾“å‡ºï¼Œç›¸æ¯”NVARCHARï¼ŒTEXTç±»å‹çš„æ•°æ®æ‰€å çš„ç©ºé—´æ›´å¤§ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šæŒ‡å®šè¾“å‡ºä¸ºNVARCHARï¼›è€Œå¦‚æœdfçš„åˆ—çš„ç±»å‹ä¸ºnp.int64æ—¶ï¼Œå°†ä¼šå¯¼è‡´æ— æ³•è¯†åˆ«å¹¶è½¬æ¢æˆINTEGERå‹ï¼Œéœ€è¦äº‹å…ˆè½¬æ¢æˆintç±»å‹ï¼ˆç”¨mapï¼Œapplyå‡½æ•°å¯ä»¥æ–¹ä¾¿çš„è½¬æ¢ï¼‰ã€‚https://www.cnblogs.com/arkenstone/p/6271923.html\n\nç¬¬äºŒç§ï¼šcursor.execute()ç›´æ¥å†™å…¥#æ’å…¥æ–¹æ³•æ— éœ€æ”¹åŠ¨ï¼Œä¼ å…¥ä¸€ä¸ªåŠ¨æ€å˜åŒ–çš„å­—å…¸\nconnect &#x3D; pymysql.connect(host&#x3D;&#39;&#39;,user&#x3D;&#39;&#39;,db &#x3D; &#39;&#39;,password&#x3D;&#39;&#39;,port&#x3D;3306,charset&#x3D;&#39;utf8&#39;)\ncursor&#x3D;connect.cursor()\ndata &#x3D; &#123;&quot;id&quot;:&#39;100&#39;,&#39;name&#39;:&#39;Bob&#39;&#125;\ntable&#x3D; &#39;stuinfo&#39;\nkeys &#x3D; &#39;, &#39;.join(data.keys())\nvalues &#x3D; &#39;, &#39;.join([&#39;%s&#39;]*len(data))\nsql &#x3D; f&quot;insert into &#123;table&#125;(&#123;keys&#125;) values(&#123;values&#125;)&quot;\ntry:\n    cursor.execute(sql,tuple(data.values()))\n    connect.commit()\n    cursor.execute(&#39;select * from &#123;table&#125;&#39;.format(table&#x3D;table))\n    print(&#39;æ‰§è¡ŒæˆåŠŸ&#39;,cursor.fetchall())\nexcept:\n    print(&quot;æ’å…¥å¤±è´¥ï¼Œæ•°æ®å›æ»š&quot;)\n    connect.rollback()\næ›´æ–°æ•°æ®#æ›´æ–°ï¼ŒæŠŠBonçš„ageæ›´æ–°ä¸º28\nsql &#x3D; &quot;update stuinfo set id&#x3D;%s where name &#x3D; %s&quot;\ncursor.execute(sql,(&quot;28&quot;,&#39;Bob&#39;))\nconnect.commit()\ncursor.execute(&#39;select * from stuinfo&#39;)\nprint(&quot;Successful:&quot;,cursor.fetchall())\nåˆ é™¤æ•°æ®#åˆ é™¤æ•°æ®\nsql &#x3D; &quot;delete from stuinfo where id &gt;&#x3D;10&quot;\ncursor.execute(sql)\nconnect.commit()\ncursor.execute(&quot;select * from stuinfo&quot;)\nprint(cursor.fetchall())","slug":"pythonæ•°æ®åˆ†æï¼šè¿æ¥mysqlï¼Œè¯»å–ã€å†™å…¥ã€æ›´æ–°ã€åˆ é™¤","date":"2021-07-04T05:16:15.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"c5a3632aecdc3f50f32639748c6ea233","title":"pythonæ•°æ®å¯è§†åŒ–ï¼špyecharts v1ç‰ˆæœ¬","content":"Echartsæ˜¯ä¸€ä¸ªç”±ç™¾åº¦å¼€æºçš„æ•°æ®å¯è§†åŒ–ï¼Œç»“åˆå·§å¦™çš„äº¤äº’æ€§ï¼Œç²¾å·§çš„å›¾è¡¨è®¾è®¡ï¼›è€Œ Python æ˜¯ä¸€é—¨å¯Œæœ‰è¡¨è¾¾åŠ›çš„è¯­è¨€ï¼Œå¾ˆé€‚åˆç”¨äºæ•°æ®å¤„ç†ã€‚åˆ†æé‡ä¸Šæ•°æ®å¯è§†åŒ–æ—¶ï¼Œpyechartsè¯ç”Ÿäº†ã€‚ä¸ªäººè§‰å¾—å¯è§†åŒ–æœ€å¥½ç”¨çš„ï¼Œä¸æ¥å—åé©³ï¼Œæ¯•ç«Ÿç”¨echartsçš„éƒ½é‚£ä¹ˆå¤šï¼›å®˜æ–¹æ–‡æ¡£\n\nè‡ªå·±æŒ‘äº†ä¸€äº›ç¢°åˆ°çš„å‘è®°äº†ä¸€ä¸‹ï¼Œåˆ†äº«ä¸€äº›è‡ªå·±å­¦ä¹ è¿‡ç¨‹ä¸­å‘ç°çš„èµ„æºï¼Œå…¶ä»–çœ‹æ–‡æ¡£å°±å¤Ÿäº†\n\nåŸºç¡€æŸ±çŠ¶å›¾from pyecharts import options as opts\nfrom pyecharts.charts import Bar\nfrom pyecharts.faker import Faker\nc &#x3D; (\n    Bar()\n    .add_xaxis(Faker.choose())\n    .add_yaxis(&quot;å•†å®¶A&quot;, Faker.values())#gap&#x3D;&quot;0%&quot;ï¼›category_gap&#x3D;&quot;80%&quot;ï¼›stack&#x3D;&quot;stack1&quot;\n    .add_yaxis(&quot;å•†å®¶B&quot;, Faker.values())#gap&#x3D;&quot;0%&quot;ï¼›is_selected&#x3D;Falseï¼›stack&#x3D;&quot;stack1&quot;ï¼›label_opts&#x3D;opts.LabelOpts(is_show&#x3D;False)\n    .set_global_opts(title_opts&#x3D;opts.TitleOpts(title&#x3D;&quot;Bar-åŸºæœ¬ç¤ºä¾‹&quot;, subtitle&#x3D;&quot;æˆ‘æ˜¯å‰¯æ ‡é¢˜&quot;))\n                     # datazoom_opts&#x3D;[opts.DataZoomOpts(), opts.DataZoomOpts(type_&#x3D;&quot;inside&quot;)],#æ—¶é—´è½´æ˜¾ç¤ºå¹¶å¯åŒé€šè¿‡é¼ æ ‡æ»‘åŠ¨\n    .set_series_opts(\n        label_opts&#x3D;opts.LabelOpts(is_show&#x3D;False),\n        markpoint_opts&#x3D;opts.MarkPointOpts(\n            data&#x3D;[\n                opts.MarkPointItem(type_&#x3D;&quot;max&quot;, name&#x3D;&quot;æœ€å¤§å€¼&quot;),\n                opts.MarkPointItem(type_&#x3D;&quot;min&quot;, name&#x3D;&quot;æœ€å°å€¼&quot;),\n#                 opts.MarkPointItem(type_&#x3D;&quot;average&quot;, name&#x3D;&quot;å¹³å‡å€¼&quot;),\n            ]\n        ),\n        markline_opts&#x3D; opts.MarkLineOpts(data &#x3D; [opts.MarkLineItem(type_ &#x3D; &quot;average&quot;,name &#x3D; &quot;å¹³å‡å€¼&quot;)])\n    )\n    .render_notebook()\n)\nc\n\n\nåªèƒ½é€šè¿‡æ»‘åŠ¨æ°´å¹³è½´ç¼©æ”¾xè½´ï¼šåªä¼ å…¥datazoom_opts=[opts.DataZoomOpts()]ï¼›çœç•¥æ‰ opts.DataZoomOpts(), åˆ é™¤æ°´å¹³è½´ï¼Œå°±åªèƒ½é€šè¿‡é¼ æ ‡æ‹–åŠ¨ï¼›\n\næ˜¾ç¤ºæ°´å¹³è½´çš„æ¯”ä¾‹ï¼ˆé»˜è®¤ï¼‰ï¼šopts.DataZoomOpts(range_start=20,range_end=80)\n\nå–æ¶ˆæŸ±å­ä¸Šæ–¹æ•°æ®æ˜¾ç¤ºï¼šlabel_opts=opts.LabelOpts(is_show=False)\n\næ·»åŠ yè½´æ°´å¹³è½´ï¼šdatazoom_opts=opts.DataZoomOpts(orient=â€verticalâ€)ï¼Œå¯ç¼©æ”¾å¤§å°ï¼›\n\næŸ±é—´è·ç¦»ï¼šåŠ å…¥å‚æ•°gap=â€0%â€(ä¸¤ä¸ªadd_yaxisé‡Œé¢éƒ½è¦ä¼ )ï¼›åŠ å…¥å‚æ•°category_gap=â€80%â€ï¼Œè¡¨ç¤ºå•ç³»æŸ±é—´è·ç¦»ï¼›\n\né»˜è®¤å–æ¶ˆæ˜¾ç¤ºæŸ Seriesï¼šåŠ å…¥å‚æ•°is_selected=Falseï¼Œé»˜è®¤å–æ¶ˆæ˜¾ç¤ºæŸ Series\n\nå †å æ•°æ®ï¼šä¼ å…¥stack=â€stack1â€ï¼Œå¸Œæœ›å“ªå‡ ä¸ªæŒ‡æ ‡å †å å°±ä¼ é‚£å‡ ä¸ªadd_yaxisä¸­ï¼›\n\næ˜¾ç¤ºToolBoxï¼šåœ¨set_global_opts()ä¸­ä¼ å…¥        toolbox_opts=opts.ToolboxOpts(), brush_opts=opts.BrushOpts(),ï¼›\n\nXYè½´åç§°ï¼šåœ¨set_globel_opts()ä¸­åŠ å…¥ yaxis_opts=opts.AxisOpts(name=â€æˆ‘æ˜¯ Y  è½´â€),xaxis_opts=opts.AxisOpts(name=â€æˆ‘æ˜¯ X è½´â€),  ï¼›\n\nYè½´æ•°æ®å•ä½ï¼šåœ¨set_globel_opts()ä¸­åŠ å…¥ yaxis_opts=opts.AxisOpts(axislabel_opts=opts.LabelOpts(formatter=â€{value} /æœˆâ€)),  ï¼›\n\nåŠ å…¥æ ‡è®°çº¿\n    .set_series_opts(\n        label_opts&#x3D;opts.LabelOpts(is_show&#x3D;False),\n        markline_opts&#x3D;opts.MarkLineOpts(\n            data&#x3D;[opts.MarkLineItem(y&#x3D;50, name&#x3D;&quot;yAxis&#x3D;50&quot;)]\n        ),\n    )\n#set_global_opts()ååŠ å…¥set_series_optsï¼ŒåŠ å…¥æ ‡è®°çº¿ï¼Œè¿™é‡Œæ˜¯y&#x3D;50ï¼›\næ ‡è®°çº¿çš„ç»´åº¦ï¼ˆå½“ç„¶å¯ä»¥æ˜¯æ¨ªè½´ï¼‰\n.set_series_opts(\n\tmarkline_opts&#x3D;opts.MarkLineOpts(\n                data&#x3D;[opts.MarkLineItem(type_&#x3D;&quot;average&quot;,value_dim&#x3D;&quot;x&quot;, name&#x3D;&quot;xAxis&quot;),\n                     opts.MarkLineItem(type_&#x3D;&quot;average&quot;,value_dim&#x3D;&quot;y&quot;, name&#x3D;&quot;xAxis&quot;)\n                     ]\nåŠ å…¥æ ‡è®°å€¼\n#set_series_optsä¸­åŠ å…¥ï¼Œè¡¨ç¤ºä¼ å…¥æ ‡è®°ï¼Œæœ€å¤§ã€æœ€å°ã€å¹³å‡å€¼ã€‚\n        markpoint_opts&#x3D;opts.MarkPointOpts(\n            data&#x3D;[\n                opts.MarkPointItem(type_&#x3D;&quot;max&quot;, name&#x3D;&quot;æœ€å¤§å€¼&quot;),\n                opts.MarkPointItem(type_&#x3D;&quot;min&quot;, name&#x3D;&quot;æœ€å°å€¼&quot;),\n                opts.MarkPointItem(type_&#x3D;&quot;average&quot;, name&#x3D;&quot;å¹³å‡å€¼&quot;),\n            ]\nxyè½´äº’æ¢\n#è®¾ç½®å®Œadd_yaxisåæ¥ç€\n    .reversal_axis()#xyè½´äº’æ¢\n    .set_series_opts(label_opts&#x3D;opts.LabelOpts(position&#x3D;&quot;right&quot;))#æ˜¾ç¤ºæ•°æ®åœ¨æŸ±å­å³è¾¹\nxè½´åå­—æ ‡ç­¾è¿‡é•¿ï¼Œæ—‹è½¬è§’åº¦\nåœ¨set_global_optsï¼ˆï¼‰ä¸­ä¼ å…¥\nxaxis_opts&#x3D;opts.AxisOpts(axislabel_opts&#x3D;opts.LabelOpts(rotate&#x3D;-15)),\nè¿æ¥ç©ºæ•°æ® \nimport pyecharts.options as opts\nfrom pyecharts.charts import Line\nfrom pyecharts.faker import Faker\n\ny &#x3D; Faker.values()\ny[3], y[5] &#x3D; None, None\nc &#x3D; (\n    Line()\n    .add_xaxis(Faker.choose())\n    .add_yaxis(&quot;å•†å®¶A&quot;, y, is_connect_nones&#x3D;True)\n    .set_global_opts(title_opts&#x3D;opts.TitleOpts(title&#x3D;&quot;Line-è¿æ¥ç©ºæ•°æ®&quot;))\n    .render(&quot;line_connect_null.html&quot;)\n)\nè‡ªå®šä¹‰æ ‡è®°ç‚¹\nimport pyecharts.options as opts\nfrom pyecharts.charts import Line\nfrom pyecharts.faker import Faker\n\nx, y &#x3D; Faker.choose(), Faker.values()\nc &#x3D; (\n    Line()\n    .add_xaxis(x)\n    .add_yaxis(\n        &quot;å•†å®¶A&quot;,\n        y,\n        markpoint_opts&#x3D;opts.MarkPointOpts(\n            data&#x3D;[opts.MarkPointItem(name&#x3D;&quot;è‡ªå®šä¹‰æ ‡è®°ç‚¹&quot;, coord&#x3D;[x[2], y[2]], value&#x3D;y[2])]\n        ),\n    )\n    .set_global_opts(title_opts&#x3D;opts.TitleOpts(title&#x3D;&quot;Line-MarkPointï¼ˆè‡ªå®šä¹‰ï¼‰&quot;))\n    .render(&quot;line_markpoint_custom.html&quot;)\n)\nä½œæ¡å½¢å›¾æ—¶ç”±äºæœ‰æ—¶å€™åº§æ ‡è½´æ–‡å­—è¿‡é•¿ï¼Œç¼©æ”¾åå¯¼è‡´æ— æ³•å®Œå…¨æ˜¾ç¤ºï¼Œæ­¤æ—¶åˆ™éœ€è¦è°ƒæ•´åº§æ ‡è½´ä¸å›¾åƒçš„è¾¹è·ã€‚è°ƒæ•´è¾¹è·æ˜¯é‡‡ç”¨gridï¼ˆï¼‰æ–¹æ³•ã€‚åœ¨å›¾å½¢è®¾ç½®å®Œæˆåï¼Œä½¿ç”¨gridè®¾ç½®åº§æ ‡è½´ä¸å›¾åƒè¾¹ç•Œçš„è·ç¦»ã€‚\nreport_day_line &#x3D; Grid()\nreport_day_line.add(report_day_line1,opts.GridOpts(pos_left&#x3D;&quot;10%&quot;,pos_top &#x3D;&quot;10%&quot;), is_control_axis_index&#x3D;True)\nreport_day_line.render_notebook()\næŒ‡å®šchart_idæ—¶è¦å°†å†™å¥½çš„å›¾å½¢å®šä¹‰æˆå‡½æ•°ï¼Œè¿™æ ·å­å¯ä»¥å¤ç”¨åé¢çš„pageä¸­å›¾ç‰‡ä½ç½®ï¼Œæ–¹ä¾¿æ›´æ”¹\n\njscodeçš„å¦™ç”¨ https://zhuanlan.zhihu.com/p/133533187\ntooltip_opts&#x3D;opts.TooltipOpts(\n                formatter&#x3D;JsCode(\n                &quot;function (params) &#123;return params.value[2] + &#39; ï¼šå¤è´­ç‡ï¼š&#39; +(Number(params.value[0])* 100).toFixed(2) + &#39;%&#39;+&#39;ï¼Œé”€å”®é¢ï¼š&#39;+ params.value[1];&#125;&quot;\n                )\n#                 trigger&#x3D;&quot;axis&quot;, axis_pointer_type&#x3D;&quot;cross&quot;\n            ),\npyechartsç”»æ—¶é—´æ’åºå›¾\n\nfrom pyecharts import options as opts\nfrom pyecharts.charts import Bar,Timeline\nfrom pyecharts.faker import Faker\nimport random\nimport pandas as pd\nimport numpy as np\n\n# å—è¿™ç¯‡æ–‡ç« å¯å‘https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_42512684&#x2F;article&#x2F;details&#x2F;108176613\ndata &#x3D; np.array([random.randint(30,150) for i in range(52*7) ]).reshape(52,7)\ndf &#x3D; pd.DataFrame(data,index&#x3D;[i for i in range(1969,2021)],columns &#x3D; random.sample(attr, len(attr)))\ndf\n\ndf_sorted &#x3D; [r[:].sort_values() for i,r in df.iterrows()]\ndf_sorted[0].values\nt1  &#x3D; Timeline()# åˆ›å»º Timelineå¯¹è±¡\n\nfor j in range(1969,2021):\n    bar &#x3D; (\n    Bar()\n    .add_xaxis([str(i) for i in df_sorted[j-1969].index])\n    .add_yaxis(&#39;Data&#39;,[int(i) for i in df_sorted[j-1969].values]\n               ,label_opts &#x3D; opts.LabelOpts(position &#x3D; &#39;right&#39;),\n             )\n    .set_series_opts(label_opts &#x3D; opts.LabelOpts(is_show &#x3D; True,position &#x3D; &#39;right&#39;))\n    .reversal_axis()\n    .set_global_opts(title_opts &#x3D; opts.TitleOpts(&quot;&#123;&#125;&quot;.format(j),\n                                                 pos_left &#x3D; &#39;50%&#39;,\n\n                                                ),\n                    legend_opts &#x3D; opts.LegendOpts(pos_right &#x3D; &#39;10%&#39;))\n\n    )\n\n    t1.add(bar,&#39;&#123;&#125;å¹´&#39;.format(j))\n    \nt1.add_schema(\nsymbol &#x3D; &#39;arrow&#39;,# è®¾ç½®æ ‡è®°æ—¶é—´ï¼›\n    #orient &#x3D; &#39;vertical&#39;,\n     symbol_size &#x3D; 2,# æ ‡è®°å¤§å°;\n    play_interval &#x3D; 1000,# æ’­æ”¾æ—¶é—´é—´éš”ï¼›\n    control_position &#x3D; &#39;right&#39;,# æ§åˆ¶ä½ç½®;\nlinestyle_opts &#x3D; opts.LineStyleOpts(width &#x3D; 5,\n                                   type_ &#x3D; &#39;dashed&#39;,\n                                   color &#x3D; &#39;rgb(255,0,0,0.5)&#39;),\n    label_opts &#x3D; opts.LabelOpts(color &#x3D; &#39;rgb(0,0,255,0.5)&#39;,\n                                    font_size &#x3D; 15,\n                                    font_style &#x3D; &#39;italic&#39;,\n                                    font_weight &#x3D; &#39;bold&#39;,\n                                     font_family &#x3D;&#39;Time New Roman&#39;,\n\n                                position &#x3D; &#39;left&#39;,\n                                interval &#x3D; 20,\n                                    )\n)\nt1.render_notebook()\n\npyechartsç”»åœ°ç†å›¾-geo,mapdef my_geo(city, city_value):\n    c &#x3D; (\n        Geo(init_opts&#x3D;opts.InitOpts(theme&#x3D;ThemeType.DARK,chart_id&#x3D;1))\n            .add_schema(maptype&#x3D;&quot;china&quot;)\n            .add(&quot;geo&quot;, [list(z) for z in zip(city, city_value)])\n            .set_series_opts(label_opts&#x3D;opts.LabelOpts(is_show&#x3D;False))\n            .set_global_opts(\n            visualmap_opts&#x3D;opts.VisualMapOpts(), title_opts&#x3D;opts.TitleOpts(title&#x3D;&quot;ç”¨æˆ·åŸå¸‚åˆ†å¸ƒ&quot;)\n        )  # .render(&quot;geo_base.html&quot;)\n    )\n    return c\nis_piecewiseå‚æ•°ï¼šåœ¨ set_global_opts()ä¸­çš„visualmap_opts=opts.VisualMapOpts(is_piecewise=True),è¡¨ç¤ºåˆ†æ®µæ˜¾ç¤ºï¼›\ndef my_map(province, num):\n    c &#x3D; (\n        Map(init_opts&#x3D;opts.InitOpts(theme&#x3D;ThemeType.DARK,chart_id&#x3D;2))\n            .add(&quot;map&quot;, [list(z) for z in zip(province, num)], &quot;china&quot;)\n            .set_series_opts(label_opts&#x3D;opts.LabelOpts(is_show&#x3D;False))\n            .set_global_opts(visualmap_opts&#x3D;opts.VisualMapOpts(), title_opts&#x3D;opts.TitleOpts(title&#x3D;&quot;ç”¨æˆ·çœä»½åˆ†å¸ƒ&quot;))\n    )  # .render(&quot;map_base.html&quot;)\n    return c\npyechartsç”»å†…å±‚åµŒå¥—é¥¼å›¾c &#x3D; (\n    Pie()\n    .add(&quot;&quot;, [list(z) for z in zip(Faker.choose(), Faker.values())])#center&#x3D;[&quot;35%&quot;, &quot;50%&quot;],\n    .set_global_opts(title_opts&#x3D;opts.TitleOpts(title&#x3D;&quot;Pie-åŸºæœ¬ç¤ºä¾‹&quot;))#legend_opts&#x3D;opts.LegendOpts(pos_left&#x3D;&quot;15%&quot;),\n    .set_series_opts(label_opts&#x3D;opts.LabelOpts(formatter&#x3D;&quot;&#123;b&#125;: &#123;c&#125;&quot;))\n#     .render(&quot;pie_base.html&quot;)\n)\nc.render_notebook()\n\nå†…åµŒé¥¼å›¾nested_piesinner_x_data &#x3D; [&quot;ç›´è¾¾&quot;, &quot;è¥é”€å¹¿å‘Š&quot;, &quot;æœç´¢å¼•æ“&quot;]\ninner_y_data &#x3D; [335, 679, 1548]\ninner_data_pair &#x3D; [list(z) for z in zip(inner_x_data, inner_y_data)]\n\nouter_x_data &#x3D; [&quot;ç›´è¾¾&quot;, &quot;è¥é”€å¹¿å‘Š&quot;, &quot;æœç´¢å¼•æ“&quot;, &quot;é‚®ä»¶è¥é”€&quot;, &quot;è”ç›Ÿå¹¿å‘Š&quot;, &quot;è§†é¢‘å¹¿å‘Š&quot;, &quot;ç™¾åº¦&quot;, &quot;è°·æ­Œ&quot;]\nouter_y_data &#x3D; [335, 310, 234, 135, 1048, 251, 147, 102]\nouter_data_pair &#x3D; [list(z) for z in zip(outer_x_data, outer_y_data)]\n(\n    Pie(init_opts&#x3D;opts.InitOpts())#theme&#x3D;ThemeType.DARK æŒ‡å®šä¸»é¢˜ä¸ºé»‘è‰²\n    .add(\n        series_name&#x3D;&quot;è®¿é—®æ¥æº&quot;,\n        data_pair&#x3D;inner_data_pair,#æŒ‡å®šæ•°æ®æº\n        radius&#x3D;[0, &quot;30%&quot;],#åŠå¾„ \n        label_opts&#x3D;opts.LabelOpts(position&#x3D;&quot;inner&quot;),#å›¾å½¢ä½ç½®\n    )\n    .add(\n        series_name&#x3D;&quot;è®¿é—®æ¥æº&quot;,\n        radius&#x3D;[&quot;40%&quot;, &quot;55%&quot;],\n        data_pair&#x3D;outer_data_pair,\n        label_opts&#x3D;opts.LabelOpts(\n            position&#x3D;&quot;outside&quot;,\n            formatter&#x3D;&quot;&#123;a|&#123;a&#125;&#125;&#123;abg|&#125;\\n&#123;hr|&#125;\\n &#123;b|&#123;b&#125;: &#125;&#123;c&#125; &#123;per|&#123;d&#125;%&#125;  &quot;,#&quot;&#123;a&#125; &lt;br&#x2F;&gt;&#123;b&#125;: &#123;c&#125; (&#123;d&#125;%)&quot; æ–‡æœ¬æ ·å¼\n            background_color&#x3D;&quot;#eee&quot;,  #èƒŒæ™¯é¢œè‰²\n            border_color&#x3D;&quot;#aaa&quot;,  #è¾¹æ¡†é¢œè‰²\n            border_width&#x3D;1,   #è¾¹æ¡†å®½åº¦\n            border_radius&#x3D;4,  #è¾¹ç•ŒåŠå¾„\n            rich&#x3D;&#123;\n                &quot;a&quot;: &#123;&quot;color&quot;: &quot;#999&quot;, &quot;lineHeight&quot;: 22, &quot;align&quot;: &quot;center&quot;&#125;,\n                &quot;abg&quot;: &#123;\n                    &quot;backgroundColor&quot;: &quot;#e3e3e3&quot;,\n                    &quot;width&quot;: &quot;100%&quot;,\n                    &quot;align&quot;: &quot;right&quot;,\n                    &quot;height&quot;: 22,\n                    &quot;borderRadius&quot;: [4, 4, 0, 0],\n                &#125;,\n                &quot;hr&quot;: &#123;\n                    &quot;borderColor&quot;: &quot;#aaa&quot;,\n                    &quot;width&quot;: &quot;100%&quot;,\n                    &quot;borderWidth&quot;: 0.5,\n                    &quot;height&quot;: 0,\n                &#125;,\n                &quot;b&quot;: &#123;&quot;fontSize&quot;: 16, &quot;lineHeight&quot;: 33&#125;,#,&quot;color&quot;:&quot;#999&quot;\n#                 &quot;c&quot;:&#123;&quot;color&quot;:&quot;#999&quot;&#125;,\n                &quot;per&quot;: &#123;\n                    &quot;color&quot;: &quot;#eee&quot;,\n                    &quot;backgroundColor&quot;: &quot;#334455&quot;,\n                    &quot;padding&quot;: [2, 4],\n                    &quot;borderRadius&quot;: 2,\n                &#125;,\n            &#125;,\n        ),\n    )\n    .set_global_opts(legend_opts&#x3D;opts.LegendOpts(pos_left&#x3D;&quot;left&quot;, orient&#x3D;&quot;vertical&quot;,textstyle_opts&#x3D;&#123;&quot;color&quot;:&quot;#999&quot;&#125;))#è®¾ç½®å›¾ä¾‹å­—ä½“ä¸ºç™½è‰²\n    .set_series_opts(\n        tooltip_opts&#x3D;opts.TooltipOpts(\n            trigger&#x3D;&quot;item&quot;, formatter&#x3D;&quot;&#123;a&#125; &lt;br&#x2F;&gt;&#123;b&#125;: &#123;c&#125; (&#123;d&#125;%)&quot;    # &#39;item&#39;: æ•°æ®é¡¹å›¾å½¢è§¦å‘ï¼Œä¸»è¦åœ¨æ•£ç‚¹å›¾ï¼Œé¥¼å›¾ç­‰æ— ç±»ç›®è½´çš„å›¾è¡¨ä¸­ä½¿ç”¨ã€‚\n        )\n    )\n#     .render(&quot;nested_pies.html&quot;)\n).render_notebook()\n\né‚£ä¸ªformatteré…ç½®é¡¹å¯ä»¥åœ¨è¿™é‡Œäº†è§£ï¼š{a}ï¼ˆç³»åˆ—åç§°ï¼‰ï¼Œ{b}ï¼ˆæ•°æ®é¡¹åç§°ï¼‰ï¼Œ{c}ï¼ˆæ•°å€¼ï¼‰, {d}ï¼ˆç™¾åˆ†æ¯”ï¼‰https://echarts.apache.org/zh/option.html#grid.tooltip.formatter\npyechartsä¸­pageçš„ä½¿ç”¨ç±»ä¼¼BIå¤§å±å±•ç¤ºpage &#x3D; Page(layout&#x3D; Page.DraggablePageLayout, page_title&#x3D; &quot;å¤§å±å±•ç¤º&quot;)\n# page &#x3D; Page()\npage.add(\n    bar_datazoom_slider(),\n    line_markpoint(),\n    pie_rosetype(),\n    grid_mutil_yaxis(),\n    liquid_data_precision(),\n    table_base(),\n)\npage.render(&quot;temp.html&quot;)\nç„¶åè‡ªå·±ç‚¹é‚£å¼€ä¸ªtemp.htmlæ–‡ä»¶è¿›è¡Œæ‹–æ‹½ï¼Œç¼©æ”¾ï¼Œå¸ƒå±€ç§°è‡ªå·±æƒ³è¦çš„æ ·å­ï¼Œæœ€åç‚¹å‡»save_configæŒ‰é’®ï¼Œä¸‹è½½é‚£ä¸ªchart_config.jsonæ–‡ä»¶ã€‚\nä¸å¸¦æ ‡é¢˜ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ä¸ºç™¾åˆ†æ¯”\nä¿®æ”¹jsoné…ç½®æ–‡ä»¶ï¼Œæ”¹æˆç™¾åˆ†æ¯”ä¸»è¦æ˜¯ä¸ºäº†é¡µé¢è‡ªé€‚åº”å±å¹•å¤§å°ã€‚\ndf &#x3D; pd.read_json(&quot;chart_config.json&quot;)\ndf[&quot;width&quot;] &#x3D; df.width.apply(lambda x: x[:-2])\ndf[&quot;height&quot;] &#x3D; df.height.apply(lambda x: x[:-2])\ndf[&quot;top&quot;] &#x3D; df.top.apply(lambda x: x[:-2])\ndf[&quot;left&quot;] &#x3D; df.left.apply(lambda x: x[:-2])\n# df.astype(&#123;&#39;width&#39;:&#39;float&#39;,&#39;height&#39;:&#39;float&#39;,&#39;top&#39;:&#39;float&#39;,&#39;height&#39;:&#39;float&#39;&#125;).dtypes\ndf[&quot;width&quot;]&#x3D; df.width.apply(lambda x: str(round(float(x)&#x2F;1256*100,4))+&quot;%&quot;)#è¿™é‡Œ1256ã€640æ˜¯ä½ è‡ªå·±ç”µè„‘å±å¹•çš„pxå€¼\ndf[&quot;height&quot;] &#x3D; df.height.apply(lambda x: str(round(float(x)&#x2F;640*100*11&#x2F;12,4))+&quot;%&quot;)#å¦‚æœå‡ºç°å³ä¾§æ»‘å—ï¼Œå¯é€‚å½“è¿›è¡Œç¼©æ”¾ï¼Œè¿™é‡ŒæŒ‰11&#x2F;12çš„æ¯”ä¾‹ç¼©æ”¾\ndf[&quot;top&quot;] &#x3D; df.top.apply(lambda x: str(round(float(x)&#x2F;640*100*11&#x2F;12,4))+&quot;%&quot;)\ndf[&quot;left&quot;] &#x3D; df.left.apply(lambda x: str(round(float(x)&#x2F;1256*100,4))+&quot;%&quot;)\ndf.to_json(&quot;chart_config2.json&quot;,orient &#x3D; &quot;records&quot;)\nä¿®æ”¹å¥½jsonæ•°æ®ä¹‹åï¼Œå†è¿è¡Œè¿™è¡Œä»£ç \n#ç¬¬ä¸€ä¸ªå­—æ®µæ˜¯å‰é¢æ‹–æ‹½çš„htmlæ–‡ä»¶åï¼Œcfg_fileå°±æ˜¯ä½ åˆšsaveçš„jsonæ–‡ä»¶åï¼Œdestæ˜¯ä½ è¦ç”Ÿæˆçš„æ–‡ä»¶å\npage.save_resize_html( &#39;temp.html&#39;, cfg_file&#x3D; &#39;chart_config2.json&#39;,dest&#x3D; &#39;è®¾ç½®å¥½ä½ç½®åçš„BIçœ‹æ¿.html&#39;)\nåŠ ä¸Šæ ‡é¢˜ï¼Œå¯è‡ªå®šä¹‰html\n\nè¿™æ ·å¼„å®Œæœ‰ç‚¹é—®é¢˜å°±æ˜¯èƒŒæ™¯é¡µé¢å¯èƒ½å’Œå›¾ç‰‡èƒŒæ™¯æœ‰è¿å’Œæ„Ÿï¼Œä½ å¯ä»¥ä½¿ç”¨BeautifulSoupå†ä¿®æ”¹ä¸‹é¡µé¢èƒŒæ™¯é¢œè‰²å•¥çš„,ç›¸å…³ç½‘è¯¾é“¾æ¥https://www.bilibili.com/video/BV1KT4y1c7pb?p=22\nfrom bs4 import BeautifulSoup\nimport os\n\n#è¿™é‡Œè¦å…ˆè¯»å–é‚£ä¸ªjsonæ–‡ä»¶\n\nwith open(os.path.join(os.path.abspath(&quot;.&quot;), &quot;è®¾ç½®å¥½ä½ç½®åçš„BIçœ‹æ¿.html&quot;), &#39;r+&#39;, encoding&#x3D;&quot;utf8&quot;) as html:\n    html_bf &#x3D; BeautifulSoup(html, &quot;lxml&quot;)\n    divs &#x3D; html_bf.find_all(&quot;div&quot;)\n    #è¯»å–config_jsonæ–‡ä»¶ï¼Œå¾ªç¯å†™å…¥åˆ°HTML\n    for i in range(len(df_config)):\n        width &#x3D; df_config.loc[i,&#39;width&#39;]\n        height &#x3D; df_config.loc[i,&#39;height&#39;]\n        top &#x3D; df_config.loc[i,&#39;top&#39;]\n        left &#x3D; df_config.loc[i,&#39;left&#39;]\n        divs[i+1][&quot;style&quot;] &#x3D; f&quot;width:&#123;width&#125;;height:&#123;height&#125;;position:absolute;top:&#123;top&#125;;left:&#123;left&#125;;&quot;\n        \n    body &#x3D; html_bf.find(&quot;body&quot;)\n    body[&quot;style&quot;]&#x3D;&quot;background-color:#333333;&quot;\n#     div_title &#x3D; &quot;&lt;div align&#x3D;\\&quot;center\\&quot; style&#x3D;\\&quot;width:100%;\\&quot;&gt;\\n&lt;span style&#x3D;\\&quot;font-size:30px;font face&#x3D;\\&#39;å¾®è½¯é›…é»‘\\&#39;;color :#FFFFFF\\&quot;&gt;&lt;b&gt;CD_NOWæ•°æ®çœ‹æ¿&lt;&#x2F;b&gt;&lt;&#x2F;div&gt;&quot;  # ä¿®æ”¹é¡µé¢èƒŒæ™¯è‰²ã€è¿½åŠ æ ‡é¢˜\n#     body.insert(0, BeautifulSoup(div_title, &quot;lxml&quot;).div)\n    html_new &#x3D; str(html_bf)\n    html.seek(0, 0)\n    html.truncate()\n    html.write(html_new)\n    html.close()\nå½“ç„¶ä¹Ÿå¯ä»¥æŠŠé‚£ä¸ªjsonæ–‡ä»¶é‡Œé¢çš„å€¼ä¼ åˆ°å¯¹åº”çš„æ ·å¼ä»£ç ä¸­åœ¨HTMLé¡µé¢ä¸­è¿›è¡Œå¸ƒå±€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ç”»å›¾æ—¶æŒ‡å®šå¥½æ¯ä¸ªå›¾è¡¨çš„chart_id,ä¾¿äºé€šè¿‡å­—ç¬¦ä¸²æ ¼å¼è¿›è¡ŒæŒ‡å®šå¯¹åº”å›¾è¡¨ä½ç½®ã€‚\næ³¨æ„ç‚¹ï¼šï¼ˆæ¥è‡ªhttps://www.jianshu.com/p/47e8f056e5cfï¼‰1.ç”±äºå›¾ç‰‡çš„å¸ƒå±€æ˜¯æ ¹æ®chart_config.jsonä¸­å›¾ç‰‡idçš„å¯¹åº”å…³ç³»è¿›è¡Œå¸ƒå±€ï¼Œå› æ­¤æ¯å¼ å›¾ç‰‡å‡éœ€è¦æŒ‡å®šå…¶idï¼›å¦‚ï¼šBar(init_opts=opts.InitOpts(chart_id=1))2.åœ¨æœ¬æ¬¡æ“ä½œå·¥ç¨‹ä¸­ï¼Œå‘ç°Tableç±»ä¸­ä¸åŒ…å«init_optså‚æ•°ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹æºç ï¼Œåœ¨D:\\Anaconda3\\Lib\\site-packages\\pyecharts\\component\\tableæŒ‡å®šchar_id,å…·ä½“ä¿®æ”¹çš„ä»£ç å¦‚ä¸‹ï¼š\nclass Table(ChartMixin):\n    def __init__(self, page_title: str &#x3D; CurrentConfig.PAGE_TITLE, js_host: str &#x3D; &quot;&quot;,chart_id&#x3D;None):\n        self.page_title &#x3D; page_title\n        self.js_host &#x3D; js_host or CurrentConfig.ONLINE_HOST\n        self.js_dependencies: OrderedSet &#x3D; OrderedSet()\n        self.js_functions: OrderedSet &#x3D; OrderedSet()\n        self.title_opts: ComponentTitleOpts &#x3D; ComponentTitleOpts()\n        self.html_content: str &#x3D; &quot;&quot;\n        self._component_type: str &#x3D; &quot;table&quot;\n        if chart_id:\n            self.chart_id: str &#x3D; chart_id\n        else:\n            self.chart_id: str &#x3D; uuid.uuid4().hex\nhttps://www.bilibili.com/video/BV1KT4y1c7pb ç½‘è¯¾é‡Œæœ‰èµ„æºè‡ªå·±å»å–\n","slug":"pythonæ•°æ®å¯è§†åŒ–ï¼špyecharts-v1ç‰ˆæœ¬","date":"2021-06-05T02:29:26.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"8ca00045c38562501faacb57ba3b1700","title":"pythonæ•°æ®é‡‡é›†ï¼šseleniumçˆ¬è™«ã€è‡ªåŠ¨åŒ–","content":"ä¸­æ–‡æ–‡æ¡£https:&#x2F;&#x2F;python-selenium-zh.readthedocs.io&#x2F;zh_CN&#x2F;latest&#x2F;\nè£…åŒ…ï¼špip install seleniumä¸‹è½½chromeï¼šhttps://www.google.cn/chrome/ä¸‹é©±åŠ¨ï¼šhttps://chromedriver.storage.googleapis.com/index.html  æ³¨æ„æµè§ˆå™¨é©±åŠ¨ å¿…é¡»è¦å’Œæµè§ˆå™¨ç‰ˆæœ¬åŒ¹é…è¿™æ˜¯ä¸ªzipåŒ…ï¼Œä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œè§£å‹é‡Œé¢çš„ç¨‹åºæ–‡ä»¶ chromedriver.exe åˆ°scriptsè·¯å¾„ä¸‹è·‘ä¸€ä¸‹çœ‹çœ‹æ„Ÿè§‰æ¥äº†æ²¡æœ‰\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.wait import WebDriverWait\n\nbrowser &#x3D; webdriver.Chrome()\ntry:\n    browser.get(&#39;https:&#x2F;&#x2F;www.baidu.com&#39;)\n    input &#x3D; browser.find_element_by_id(&#39;kw&#39;)\n    input.send_keys(&#39;Python&#39;)\n    input.send_keys(Keys.ENTER)\n    wait &#x3D; WebDriverWait(browser, 10)\n    wait.until(EC.presence_of_element_located((By.ID, &#39;content_left&#39;)))\n    print(browser.current_url)\n    print(browser.get_cookies())\n    print(browser.page_source)\nfinally:hexo\n    browser.close()\nä¸å¯èƒ½ä¸€ä¸‹å°±ä¼šçš„ï¼Œæ…¢æ…¢æ¥\nhttps:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_54733110&#x2F;article&#x2F;details&#x2F;119027005  pythonä¸‡å­—åšæ–‡æ•™ä½ ç©å—¨seleniumåº“\nhttps:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;s?__biz&#x3D;MzI0OTc0MzAwNA&#x3D;&#x3D;&amp;mid&#x3D;2247487680&amp;idx&#x3D;1&amp;sn&#x3D;e40947f382116ff59761f250ee45dce3  æ¨¡æ‹Ÿç™»å½•æ·˜å®\nhttps:&#x2F;&#x2F;www.pianshen.com&#x2F;article&#x2F;345981989&#x2F;  åˆ¤æ–­å…ƒç´ 16ç§æ–¹æ³•expected_conditions\nhttps:&#x2F;&#x2F;github.com&#x2F;Python3WebSpider&#x2F;Python3WebSpider&#x2F;blob&#x2F;master&#x2F;7.1-Selenium%E7%9A%84%E4%BD%BF%E7%94%A8.md\nhttp:&#x2F;&#x2F;www.byhy.net&#x2F;tut&#x2F;auto&#x2F;selenium&#x2F;01&#x2F;è¿™ä¸ªä½œè€…å†™çš„å¾ˆå¥½\nhttps:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;av64421994&#x2F;?p&#x3D;1ç®€ç›´æ˜¯ä¿å§†çº§æ•™å­¦ï¼Œ\nå¸Œæœ›ä½ å­¦ä¼šäº†ä¸è¦ä¹±æ\n\n","slug":"pythonæ•°æ®é‡‡é›†ï¼šseleniumçˆ¬è™«ã€è‡ªåŠ¨åŒ–","date":"2021-05-05T02:34:57.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"3836a474642d761a6e5b64bf08fc9275","title":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼šé‚®ä»¶å‘é€","content":"\né‚®ä»¶æ‰¹é‡å‘é€è°ƒç”¨smtp.exmail.qq.comæ‰¹é‡è‡ªåŠ¨å‘é€é‚®ä»¶æ³¨æ„æ–‡ä»¶è·¯å¾„ï¼Œé€—å·åˆ†éš”ç¬¦ï¼Œcsvä¸­ä¸è¦æœ‰å¤šä½™å›è½¦å’Œç©ºæ ¼import os\nimport sys\nimport csv\nimport smtplib\nimport pandas as pd\nimport numpy as np\nfrom email.mime.base import MIMEBase\nfrom email.mime.image import MIMEImage\nfrom email.utils import formataddr\nfrom email import encoders\nimport time,datetime\nimport smtplib\nimport email.mime.multipart\nimport email.mime.text\nfrom email.mime.text import MIMEText\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.application import MIMEApplication\nfrom email.header import Header\n\ndef get_current_date():\n    &quot;&quot;&quot;è·å–å½“å‰æ—¶é—´&quot;&quot;&quot;\n    return str(time.strftime(&#39;%Y%m%d&#39;))\n\ndef getAddrBook(addrBook):\n    &#39;&#39;&#39;\n        @ä½œç”¨ï¼šæ ¹æ®è¾“å…¥çš„CSVæ–‡ä»¶ï¼Œå½¢æˆç›¸åº”çš„é€šè®¯å½•å­—å…¸\n        @è¿”å›ï¼šå­—å…¸ç±»å‹ï¼Œnameä¸ºäººåï¼Œvalueä¸ºå¯¹åº”çš„é‚®ä»¶åœ°å€\n    &#39;&#39;&#39;\n    with open(addrBook,&#39;r&#39;,encoding&#x3D;&#39;UTF-8&#39;) as addrFile:\n        #å°†æ–‡ä»¶åå’Œé‚®ä»¶æ¥æ”¶äººé‚®ç®±åœ°å€åˆ†è¡Œå­˜æ”¾åœ¨csvæ–‡ä»¶ä¸­ï¼Œç”¨é€—å·åˆ†éš”\n        reader &#x3D; csv.reader(addrFile)\n        name &#x3D; []\n        value &#x3D; []\n        for row in reader:\n            name.append(row[0])\n            value.append(row[1])\n    addrs &#x3D; dict(zip(name, value))\n    return addrs\n\ndef send_email(inputpath,smtpHost,port,sendAddr,password,recipientAddrs, subject, content,attachfilename):\n    &quot;&quot;&quot;å®šä¹‰å¹¶é…ç½®å¥½å‘é‚®ä»¶çš„å‡½æ•°&quot;&quot;&quot;\n    msg &#x3D; email.mime.multipart.MIMEMultipart()\n    msg[&#39;from&#39;] &#x3D;sendAddr #å‘ä»¶äºº\n    msg[&#39;to&#39;] &#x3D;recipientAddrs #æ¥æ”¶äºº\n    # msg[&#39;cc&#39;] &#x3D;cc_name #æŠ„é€äººåç§°\n    msg[&#39;subject&#39;] &#x3D;subject #ä¸»é¢˜\n    content&#x3D;content\n    txt &#x3D; email.mime.text.MIMEText(content, &#39;plain&#39;, &#39;UTF-8&#39;)\n    msg.attach(txt)\n    print(&quot;å‡†å¤‡æ·»åŠ é™„ä»¶...&quot;)\n    inputfile&#x3D;inputpath+attachfilename #æ–‡ä»¶è·¯å¾„\n    part &#x3D; MIMEText(open(inputfile,&#39;rb&#39;).read(),&#39;base64&#39;, &#39;utf-8&#39;)\n    part[&quot;Content-Type&quot;] &#x3D; &#39;application&#x2F;octet-stream&#39;\n    part.add_header(&#39;Content-Disposition&#39;, &#39;attachment&#39;, filename&#x3D;Header(attachfilename,&#39;utf-8&#39;).encode())\n    msg.attach(part)\n    smtp &#x3D; smtplib.SMTP_SSL(smtpHost, port)\n    smtp.login(sendAddr, password)\n    smtp.sendmail(sendAddr, recipientAddrs.split(&#39;,&#39;), str(msg))   #+cc_name.split(&#39;,&#39;)\n    #print(&quot;å‘é€æˆåŠŸï¼&quot;)\n    smtp.quit()\n\nif __name__&#x3D;&#x3D;&#39;__main__&#39;:\n    #è¿™é‡Œéœ€è¦å®šä¹‰send_emailå‡½æ•°ä¸­ä¼ å…¥çš„æ‰€æœ‰å˜é‡\n    inputpath &#x3D; &quot;r&#39;D:&#x2F;&quot; #æ•°æ®å­˜æ”¾çš„æ–‡ä»¶è·¯å¾„ï¼ˆè¿™é‡Œæ˜¯ç»å¯¹è·¯å¾„ï¼‰\n    smtpHost &#x3D; &#39;smtp.exmail.qq.com&#39;  # é»˜è®¤æœåŠ¡å™¨åœ°å€åŠç«¯å£\n    port&#x3D;465\n    sendAddr &#x3D;&quot;&quot;    #è‡ªå·±ä¹Ÿå°±æ˜¯å‘ä»¶äººçš„é‚®ç®±è´¦å·\n    password &#x3D; &quot;&quot;   #è‡ªå·±çš„é‚®ç®±å¯†ç \n    subject&#x3D;&quot; &quot;+current_date  #ä¸»é¢˜+å½“å‰æ—¥æœŸ\n    content&#x3D;&#39;&#39;&#39;é™„ä»¶ä¸ºæµ‹è¯•æ–‡ä»¶&#39;&#39;&#39;+current_date# æ­£æ–‡å†…å®¹+å½“å‰æ—¥æœŸ\n\n    addrBook&#x3D;r&#39;D:\\é‚®ç®±è”ç³»äººè¡¨å•.csv&#39;  #è”ç³»äººè¡¨å•æ–‡ä»¶è·¯å¾„\n    addrs&#x3D;getAddrBook(addrBook)\n    for i in addrs:\n        attachfilename&#x3D;i+&#39;.xlsx&#39; #å°†è¦å‘é€çš„æ–‡ä»¶æ·»åŠ ä¸ºé™„ä»¶\n        recipientAddrs&#x3D;addrs[i] #æ¥æ”¶äººçš„é‚®ç®±åœ°å€\n        result &#x3D; os.path.exists(inputpath+i+&#39;.xlsx&#39;) #åˆ¤æ–­å½“å‰ç›®å½•æ˜¯å¦å­˜åœ¨è¯¥æ–‡ä»¶\n        if result:\n            #å­˜åœ¨å°±æ‰§è¡Œé‚®ä»¶\n            send_email(inputpath,smtpHost,port,sendAddr,password,recipientAddrs,\n            subject,content,attachfilename)\n            print ((&#39;å‘ç»™ %s çš„é‚®ä»¶æ‰§è¡ŒæˆåŠŸ&#39;) %(recipientAddrs))\n\n\nè¿™é‡Œä¹Ÿçœ‹åˆ°æœ‰ä½¿ç”¨126é‚®ç®±çš„smtpæœåŠ¡å™¨ï¼šâ€™smtp.126.comâ€™https://blog.csdn.net/weixin_42350212/article/details/118751583Python smtpå‘é€é‚®ä»¶æ€ä¹ˆè®¾ç½®æŠ„é€äººhttps://www.cnblogs.com/shiyixirui/p/14692146.html\n","slug":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼šé‚®ä»¶å‘é€","date":"2021-04-05T02:24:12.000Z","categories_index":"","tags_index":"è‡ªåŠ¨åŒ–","author_index":"Aurora"},{"id":"3d3f9536d1b98ac2adb8f0a4ceb774df","title":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼šæ–‡ä»¶å’Œç›®å½•æ“ä½œ","content":"import os\nåˆ›å»ºç›®å½•ç»“æ„\nos.makedirs å¯ä»¥é€’å½’çš„åˆ›å»ºç›®å½•ç»“æ„ï¼Œæ¯”å¦‚os.makedirs(&#39;tmp&#x2F;python&#x2F;fileop&#39;,exist_ok&#x3D;True)\nåœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹é¢åˆ›å»º tmpç›®å½•ï¼Œåœ¨tmpç›®å½•ä¸‹é¢å†åˆ›å»º pythonç›®å½•ï¼Œåœ¨Pythonç›®å½•ä¸‹é¢å†åˆ›å»ºfileopç›®å½•ï¼›exist_ok=True æŒ‡å®šäº†ï¼Œå¦‚æœæŸä¸ªè¦åˆ›å»ºçš„ç›®å½•å·²ç»å­˜åœ¨ï¼Œä¹Ÿä¸æŠ¥é”™\n\nåˆ é™¤æ–‡ä»¶æˆ–ç›®å½•os.remove å¯ä»¥åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œæ¯”å¦‚\nos.remove(&#39;sdf.py&#39;)\nshutil.rmtree() å¯ä»¥é€’å½’çš„åˆ é™¤æŸä¸ªç›®å½•æ‰€æœ‰çš„å­ç›®å½•å’Œå­æ–‡ä»¶ æ¯”å¦‚\nimport shutil\nshutil.rmtree(&#39;tmp&#39;, ignore_errors&#x3D;True)\næ³¨æ„ï¼šå‚æ•° ignore_errors=True ä¿è¯å¦‚æœç›®å½•ä¸ä¸ºç©ºï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚\næ‹·è´æ–‡ä»¶shutil æ¨¡å—é‡Œé¢æœ‰å¾ˆå¤š ç›®å½•æ–‡ä»¶æ“ä½œçš„å‡½æ•°æ‹·è´æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨shutilæ¨¡å—çš„copyfileå‡½æ•°ã€‚\nfrom shutil import copyfile\n# æ‹·è´ d:&#x2F;tools&#x2F;first.py åˆ° e:&#x2F;first.py\ncopyfile(&#39;d:&#x2F;tools&#x2F;first.py&#39;, &#39;e:&#x2F;first.py&#39;)\næ³¨æ„ï¼Œå¦‚æœæ‹·è´å‰ï¼Œe:/first.py å·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ‹·è´è¦†ç›–ï¼Œæ‰€ä»¥ä½¿ç”¨è¯¥å‡½æ•°ä¸€å®šè¦å°å¿ƒã€‚###æ‹·è´ç›®å½•å¦‚æœæˆ‘ä»¬è¦æ‹·è´ä¸€ä¸ªç›®å½•é‡Œé¢æ‰€æœ‰çš„å†…å®¹ï¼ˆåŒ…æ‹¬å­ç›®å½•å’Œæ–‡ä»¶ã€å­ç›®å½•é‡Œé¢çš„å­ç›®å½•å’Œæ–‡ä»¶ï¼Œç­‰ç­‰ï¼‰åˆ°å¦å¤–ä¸€ä¸ªç›®å½•ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ shutilçš„copytreeå‡½æ•°ã€‚\nfrom shutil import copytree\n# æ‹·è´ d:&#x2F;tools&#x2F;aaa ç›®å½•ä¸­æ‰€æœ‰çš„å†…å®¹ åˆ° e:&#x2F;bbb ä¸­\ncopytree(&#39;d:&#x2F;tools&#x2F;aaa&#39;, &#39;e:&#x2F;new&#x2F;bbb&#39;)\næ³¨æ„æ‹·è´å‰ï¼Œ ç›®æ ‡ç›®å½•å¿…é¡» ä¸å­˜åœ¨ ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚\nä¸Šé¢çš„ä»£ç æ‰§è¡Œå‰é¢ï¼Œå¦‚æœ e:/new/bbb å·²ç»å­˜åœ¨ï¼Œæ‰§è¡Œåˆ°copytreeæ—¶ï¼Œå°±ä¼šæŠ¥é”™\nä¸Šé¢çš„ä»£ç æ‰§è¡Œå‰é¢ï¼Œå¦‚æœ e:/new è¿™ä¸ªç›®å½•éƒ½ä¸å­˜åœ¨ï¼Œæ‰§è¡Œåˆ°copytreeæ—¶ï¼Œå°±ä¼š åˆ›å»º e:/new ç›®å½•ï¼Œå†åˆ›å»º e:/new/bbb ç›®å½•ï¼Œå†æ‹·è´ d:/tools/aaa ç›®å½•ä¸­æ‰€æœ‰çš„å†…å®¹ åˆ° e:/new/bbb ä¸­ã€‚\nä¸Šé¢çš„ä»£ç æ‰§è¡Œå‰é¢ï¼Œå¦‚æœ e:/new è¿™ä¸ªç›®å½•å­˜åœ¨ï¼Œä½†æ˜¯ e:/new/bbb ä¸å­˜åœ¨ï¼Œæ‰§è¡Œåˆ°copytreeæ—¶ï¼Œå°±åªä¼š åˆ›å»º e:/new/bbb ï¼Œå†æ‹·è´ d:/tools/aaa ç›®å½•ä¸­æ‰€æœ‰çš„å†…å®¹ åˆ° e:/new/bbb ä¸­ã€‚###ä¿®æ”¹æ–‡ä»¶åã€ç›®å½•åè¦ä¿®æ”¹æ–‡ä»¶åã€ç›®å½•åï¼Œå¯ä»¥ä½¿ç”¨osæ¨¡å—çš„renameå‡½æ•°ã€‚\n# ä¿®æ”¹ç›®å½•å d:&#x2F;tools&#x2F;aaa ä¸º d:&#x2F;tools&#x2F;bbb\nos.rename(&#39;d:&#x2F;tools&#x2F;aaa&#39;,&#39;d:&#x2F;tools&#x2F;bbb&#39;)\n\n# ä¿®æ”¹æ–‡ä»¶å d:&#x2F;tools&#x2F;first.py ä¸º d:&#x2F;tools&#x2F;second.py\nos.rename(&#39;d:&#x2F;tools&#x2F;first.py&#39;,&#39;d:&#x2F;tools&#x2F;second.py&#39;)\n\nå¯¹æ–‡ä»¶è·¯å¾„åçš„æ“ä½œå¯¹äºæ–‡ä»¶åçš„æ“ä½œï¼Œæ¯”å¦‚ è·å–æ–‡ä»¶åç§°ï¼Œæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œæ–‡ä»¶è·¯å¾„çš„æ‹¼æ¥ç­‰ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ os.path æ¨¡å—ã€‚\né€šå¸¸æˆ‘ä»¬å–œæ¬¢ä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹æ³•æ¥åšæ–‡ä»¶è·¯å¾„çš„æ‹¼æ¥ï¼Œä½†æ˜¯å¦‚æœä½ çš„ç¨‹åºéœ€è¦åœ¨Linuxã€Windowsç­‰å¤šä¸ªå¹³å°è¿è¡Œï¼Œå®ƒä»¬çš„è·¯å¾„çš„åˆ†éš”ç¬¦æ˜¯ä¸åŒçš„ï¼ŒWindowsä¸Šæ˜¯ \\ , è€Œ Linuxä¸Šæ˜¯ /ã€‚\nè¿™æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ os.path æ¨¡å—ã€‚ å®ƒèƒ½å¤Ÿè‡ªåŠ¨å¤„ç†ç±»ä¼¼ Data/data.csv å’Œ Data\\data.csv è¿™æ ·çš„æ–‡ä»¶è·¯å¾„å·®å¼‚ã€‚\npath &#x3D; &#39;&#x2F;Users&#x2F;beazley&#x2F;Data&#x2F;data.csv&#39;\n# è·å–è·¯å¾„ä¸­çš„æ–‡ä»¶åéƒ¨åˆ†\nos.path.basename(path)\n&#39;data.csv&#39;\n# è·å–è·¯å¾„ä¸­çš„ç›®å½•éƒ¨åˆ†\nos.path.dirname(path)\n&#39;&#x2F;Users&#x2F;beazley&#x2F;Data&#39;\n# æ–‡ä»¶è·¯å¾„çš„æ‹¼æ¥\nos.path.join(&#39;tmp&#39;, &#39;data&#39;, os.path.basename(path))\n&#39;tmp&#x2F;data&#x2F;data.csv&#39;\nåˆ¤æ–­æ–‡ä»¶ã€ç›®å½•æ˜¯å¦å­˜åœ¨os.path.exists(&#39;d:&#x2F;systems&#x2F;cmd.exe&#39;)\nos.path.exists(&#39;d:&#x2F;systems&#39;)\nexistsæ–¹æ³•è¿”å›å€¼ä¸ºTrueè¡¨ç¤º å­˜åœ¨ï¼Œå¦åˆ™è¡¨ç¤ºä¸å­˜åœ¨ã€‚å¦‚æœä½ è¦åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦æ˜¯æ–‡ä»¶ï¼Œå¯ä»¥è¿™æ ·os.path.isfile(â€˜d:/systems/cmd.exeâ€™)# è¿”å›å€¼ä¸ºTrue è¡¨ç¤ºæ˜¯æ–‡ä»¶å¦‚æœä½ è¦åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦æ˜¯ç›®å½•ï¼Œå¯ä»¥è¿™æ ·os.path.isdir(â€˜d:/systemsâ€™)#è¿”å›å€¼ä¸ºTrue è¡¨ç¤ºæ˜¯ç›®å½•\n###æ–‡ä»¶å¤§å°å’Œä¿®æ”¹æ—¥æœŸ\n\nè¿”å›æ–‡ä»¶å¤§å°os.path.getsize(â€˜file1â€™)3669\n\nè¿”å›æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¥æœŸï¼Œæ˜¯ç§’æ—¶é—´å‚è€ƒä¸‹ä¸€ç«  æ—¥æœŸå’Œæ—¶é—´ é‡Œé¢çš„å†…å®¹os.path.getmtime(â€˜file1â€™)1272478234.0\n\nå¯ä»¥æŠŠç§’æ—¶é—´ è½¬åŒ–ä¸ºæ—¥æœŸæ—¶é—´import timetime.ctime(os.path.getmtime(â€˜/etc/passwdâ€™))â€˜Wed Apr 28 13:10:34 2010â€™\n\n\n###å½“å‰å·¥ä½œç›®å½•å½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„ï¼šwd = os.getcwd()æ”¹å˜å½“å‰å·¥ä½œç›®å½•åˆ°å¦å¤–çš„è·¯å¾„ï¼šos.chdir(path)å‚æ•°å°±æ˜¯ æ–°çš„å½“å‰å·¥ä½œç›®å½• è·¯å¾„åœ°å€ã€‚\n###é€’å½’çš„éå†ç›®å½•ä¸‹é¢æ‰€æœ‰çš„æ–‡ä»¶è·å–æŸä¸ªç›®å½•ä¸­æ‰€æœ‰çš„ æ–‡ä»¶ï¼Œ åŒ…æ‹¬å­ç›®å½•é‡Œé¢çš„æ–‡ä»¶ã€‚ å¯ä»¥ä½¿ç”¨ osåº“ä¸­çš„walkæ–¹æ³•æ¯”å¦‚æˆ‘ä»¬è¦å¾—åˆ°æŸä¸ªç›®å½•ä¸‹é¢æ‰€æœ‰çš„å­ç›®å½• å’Œæ‰€æœ‰çš„æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨ä¸¤ä¸ªåˆ—è¡¨ä¸­ os.walk(top[, topdown=True[, onerror=None[, followlinks=False]]])    top ï¼šæ˜¯ä½ æ‰€è¦éå†çš„ç›®å½•çš„åœ°å€, è¿”å›çš„æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ (dirpath, dirnames, filenames)    topdown ï¼šå¯é€‰ï¼ŒTrueåˆ™ä¼˜å…ˆéå† top æ–‡ä»¶å¤¹ï¼Œä¸top æ–‡ä»¶å¤¹ä¸­æ¯ä¸€ä¸ªå­ç›®å½•ï¼›å¦åˆ™ä¼˜å…ˆéå† top çš„å­ç›®å½•(é»˜è®¤ä¸ºå¼€å¯)ã€‚    onerror ï¼šå¯é€‰ï¼Œéœ€è¦ä¸€ä¸ª callable å¯¹è±¡ï¼Œå½“ walk éœ€è¦å¼‚å¸¸æ—¶ï¼Œä¼šè°ƒç”¨    followlinks ï¼šå¯é€‰ï¼Œå¦‚æœä¸º Trueï¼Œåˆ™ä¼šéå†ç›®å½•ä¸‹çš„å¿«æ·æ–¹å¼(linux ä¸‹æ˜¯è½¯è¿æ¥ symbolic link )å®é™…æ‰€æŒ‡çš„ç›®å½•(é»˜è®¤å…³é—­)ï¼Œå¦‚æœä¸º Falseï¼Œåˆ™ä¼˜å…ˆéå† top çš„å­ç›®å½•ï¼›\n\nå¾—åˆ°æŸä¸ªç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„å…¨è·¯å¾„import os\n# ç›®æ ‡ç›®å½•\ntargetDir &#x3D; r&#39;d:\\tmp\\util\\dist\\check&#39;\nfor (dirpath, dirnames, filenames) in os.walk(targetDir):\n    for fn in filenames:\n        # æŠŠ dirpath å’Œ æ¯ä¸ªæ–‡ä»¶åæ‹¼æ¥èµ·æ¥ å°±æ˜¯å…¨è·¯å¾„\n        fpath &#x3D; os.path.join(dirpath, fn)\n# dirpath ä»£è¡¨å½“å‰éå†åˆ°çš„ç›®å½•å\n# dirnames æ˜¯åˆ—è¡¨å¯¹è±¡ï¼Œå­˜æ”¾å½“å‰dirpathä¸­çš„æ‰€æœ‰å­ç›®å½•å\n# filenames æ˜¯åˆ—è¡¨å¯¹è±¡ï¼Œå­˜æ”¾å½“å‰dirpathä¸­çš„æ‰€æœ‰æ–‡ä»¶å\nå¾—åˆ°ç›®å½•ä¸­æ‰€æœ‰çš„æ–‡ä»¶å’Œå­ç›®å½•ålistdirè¿”å›çš„æ˜¯è¯¥ç›®å½•ä¸‹é¢æ‰€æœ‰çš„æ–‡ä»¶å’Œå­ç›®å½•ã€‚# ç›®æ ‡ç›®å½•\ntargetDir &#x3D; r&#39;d:\\tmp\\util\\dist\\check&#39;\nfiles &#x3D;  os.listdir(targetDir)\nprint(files)\nå¦‚æœåªéœ€è¦è·å–ç›®å½•ä¸­æ‰€æœ‰çš„æ–‡ä»¶ï¼Œæˆ–è€…åªéœ€è¦å­ç›®å½•import os\nfrom os.path import isfile, join,isdir\n# ç›®æ ‡ç›®å½•\ntargetDir &#x3D; r&#39;d:\\tmp\\util\\dist\\check&#39;\n# æ‰€æœ‰çš„æ–‡ä»¶\nprint([f for f in os.listdir(targetDir) if isfile(join(targetDir, f))])\n# æ‰€æœ‰çš„ç›®å½•\nprint([f for f in os.listdir(targetDir) if isdir(join(targetDir, f))])\n###å¾—åˆ°ç›®å½•ä¸­æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶å’Œå­ç›®å½•å¯ä»¥ä½¿ç”¨globåº“import glob\nexes &#x3D; glob.glob(r&#39;d:\\tmp\\*.txt&#39;)\nprint(exes)\nhttp://www.byhy.net/tut/py/extra/file_dir\n\n","slug":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼šæ–‡ä»¶å’Œç›®å½•æ“ä½œ","date":"2021-03-06T15:07:45.000Z","categories_index":"","tags_index":"è‡ªåŠ¨åŒ–","author_index":"Aurora"},{"id":"917af4fce65ef9c1196ef8527f6229c9","title":"pythonå…³è”åˆ†æï¼ˆaprioriç®—æ³•ï¼‰","content":"è‹¥ä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡çš„å–å€¼ä¹‹é—´å­˜åœ¨æŸç§è§„å¾‹æ€§ï¼Œå°±ç§°ä¸ºå…³è”ã€‚å…³è”è§„åˆ™æ˜¯å¯»æ‰¾åœ¨åŒä¸€ä¸ªäº‹ä»¶ä¸­å‡ºç°çš„ä¸åŒé¡¹çš„ç›¸å…³æ€§ï¼Œæ¯”å¦‚åœ¨ä¸€æ¬¡è´­ä¹°æ´»åŠ¨ä¸­æ‰€ä¹°ä¸åŒå•†å“çš„ç›¸å…³æ€§ã€‚ä¾‹å¦‚ï¼šâ€œåœ¨è´­ä¹°è®¡ç®—æœºçš„é¡¾å®¢ä¸­ï¼Œæœ‰30ï¼…çš„äººä¹ŸåŒæ—¶è´­ä¹°äº†æ‰“å°æœºâ€ã€‚\n\nä¸€ä¸ªæ ·æœ¬ç§°ä¸ºä¸€ä¸ªâ€œäº‹åŠ¡â€æ¯ä¸ªäº‹åŠ¡ç”±å¤šä¸ªå±æ€§æ¥ç¡®å®šï¼Œè¿™é‡Œçš„å±æ€§ç§°ä¸ºâ€œé¡¹â€å¤šä¸ªé¡¹ç»„æˆçš„é›†åˆç§°ä¸ºâ€œé¡¹é›†â€####ç”±kä¸ªé¡¹æ„æˆçš„é›†åˆ{ç‰›å¥¶}ã€{å•¤é…’}éƒ½æ˜¯1-é¡¹é›†ï¼›{ç‰›å¥¶ï¼Œæœå†»}æ˜¯2-é¡¹é›†ï¼›{å•¤é…’ï¼Œé¢åŒ…ï¼Œç‰›å¥¶}æ˜¯3-é¡¹é›†####X==&gt;Yå«ä¹‰ï¼šXå’ŒYæ˜¯é¡¹é›†Xç§°ä¸ºè§„åˆ™å‰é¡¹ï¼ˆantecedentï¼‰Yç§°ä¸ºè§„åˆ™åé¡¹ï¼ˆconsequentï¼‰####æ”¯æŒåº¦ï¼ˆsupportï¼‰ï¼šä¸€ä¸ªé¡¹é›†æˆ–è€…è§„åˆ™åœ¨æ‰€æœ‰äº‹åŠ¡ä¸­å‡ºç°çš„é¢‘ç‡ï¼ŒÏƒ(X):è¡¨ç¤ºé¡¹é›†Xçš„æ”¯æŒåº¦è®¡æ•°é¡¹é›†Xçš„æ”¯æŒåº¦ï¼šs(X)=Ïƒ(X)/Nè§„åˆ™X==&gt;Yè¡¨ç¤ºç‰©å“é›†Xå¯¹ç‰©å“é›†Yçš„æ”¯æŒåº¦ï¼Œä¹Ÿå°±æ˜¯ç‰©å“é›†Xå’Œç‰©å“é›†YåŒæ—¶å‡ºç°çš„æ¦‚ç‡æŸå¤©å…±æœ‰100ä¸ªé¡¾å®¢åˆ°å•†åœºè´­ä¹°ç‰©å“ï¼Œå…¶ä¸­æœ‰30ä¸ªé¡¾å®¢åŒæ—¶è´­ä¹°äº†å•¤é…’å’Œå°¿å¸ƒï¼Œé‚£ä¹ˆä¸Šè¿°çš„å…³è”è§„åˆ™çš„æ”¯æŒåº¦å°±æ˜¯30ï¼…####ç½®ä¿¡åº¦ï¼ˆconfidenceï¼‰ï¼šç¡®å®šYåœ¨åŒ…å«Xçš„äº‹åŠ¡ä¸­å‡ºç°çš„é¢‘ç¹ç¨‹åº¦ã€‚c(X â†’ Y) = Ïƒ(XâˆªY)/Ïƒ(X)pï¼ˆYâ”‚Xï¼‰ï¼pï¼ˆXYï¼‰/p(X)ã€‚ç½®ä¿¡åº¦ååº”äº†å…³è”è§„åˆ™çš„å¯ä¿¡åº¦â€”è´­ä¹°äº†é¡¹ç›®é›†Xä¸­çš„å•†å“çš„é¡¾å®¢åŒæ—¶ä¹Ÿè´­ä¹°äº†Yä¸­å•†å“çš„å¯èƒ½æ€§æœ‰å¤šå¤§è´­ä¹°è–¯ç‰‡çš„é¡¾å®¢ä¸­æœ‰50ï¼…çš„äººè´­ä¹°äº†å¯ä¹,åˆ™ç½®ä¿¡åº¦ä¸º50ï¼…\n\n####(X , Y)==&gt;Z :æ”¯æŒåº¦:äº¤æ˜“ä¸­åŒ…å«{X ã€ Y ã€ Z}çš„å¯èƒ½æ€§ç½®ä¿¡åº¦:åŒ…å«{X ã€ Y}çš„äº¤æ˜“ä¸­ä¹ŸåŒ…å«Zçš„æ¡ä»¶æ¦‚ç‡####è®¾æœ€å°æ”¯æŒåº¦ä¸º50%, æœ€å°å¯ä¿¡åº¦ä¸º 50%, åˆ™å¯å¾—åˆ° :A==&gt;C (50%, 66.6%)C==&gt;A (50%, 100%)\nè‹¥å…³è”è§„åˆ™X-&gt;Yçš„æ”¯æŒåº¦å’Œç½®ä¿¡åº¦åˆ†åˆ«å¤§äºæˆ–ç­‰äºç”¨æˆ·æŒ‡å®šçš„æœ€å°æ”¯æŒç‡minsupportå’Œæœ€å°ç½®ä¿¡åº¦minconfidenceï¼Œåˆ™ç§°å…³è”è§„åˆ™X-&gt;Yä¸ºå¼ºå…³è”è§„åˆ™ï¼Œå¦åˆ™ç§°å…³è”è§„åˆ™X-&gt;Yä¸ºå¼±å…³è”è§„åˆ™ã€‚\n####æå‡åº¦ï¼ˆliftï¼‰ï¼šç‰©å“é›†Açš„å‡ºç°å¯¹ç‰©å“é›†Bçš„å‡ºç°æ¦‚ç‡å‘ç”Ÿäº†å¤šå¤§çš„å˜åŒ–liftï¼ˆA==&gt;Bï¼‰=confidenceï¼ˆA==&gt;Bï¼‰/support(B)=p(B|A)/p(B)ç°åœ¨æœ‰** 1000 ** ä¸ªæ¶ˆè´¹è€…ï¼Œæœ‰** 500** äººè´­ä¹°äº†èŒ¶å¶ï¼Œå…¶ä¸­æœ‰** 450äººåŒæ—¶** è´­ä¹°äº†å’–å•¡ï¼Œå¦** 50äºº** æ²¡æœ‰ã€‚ç”±äº** confidence(èŒ¶å¶=&gt;å’–å•¡)=450/500=90%** ï¼Œç”±æ­¤å¯èƒ½ä¼šè®¤ä¸ºå–œæ¬¢å–èŒ¶çš„äººå¾€å¾€å–œæ¬¢å–å’–å•¡ã€‚ä½†å¦‚æœå¦å¤–æ²¡æœ‰è´­ä¹°èŒ¶å¶çš„** 500äºº** ï¼Œå…¶ä¸­åŒæ ·æœ‰** 450äºº** è´­ä¹°äº†å’–å•¡ï¼ŒåŒæ ·æ˜¯å¾ˆé«˜çš„** ç½®ä¿¡åº¦90%** ,ç”±æ­¤ï¼Œå¾—åˆ°ä¸çˆ±å–èŒ¶çš„ä¹Ÿçˆ±å–å’–å•¡ã€‚è¿™æ ·çœ‹æ¥ï¼Œå…¶å®æ˜¯å¦è´­ä¹°å’–å•¡ï¼Œä¸æœ‰æ²¡æœ‰è´­ä¹°èŒ¶å¶å¹¶æ²¡æœ‰å…³è”ï¼Œä¸¤è€…æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå…¶** æå‡åº¦90%/[(450+450)/1000]=1** ã€‚ç”±æ­¤å¯è§ï¼Œliftæ­£æ˜¯å¼¥è¡¥äº†confidenceçš„è¿™ä¸€ç¼ºé™·ï¼Œif lift=1,Xä¸Yç‹¬ç«‹ï¼ŒXå¯¹Yå‡ºç°çš„å¯èƒ½æ€§æ²¡æœ‰æå‡ä½œç”¨ï¼Œå…¶å€¼è¶Šå¤§(lift&gt;1),åˆ™è¡¨æ˜Xå¯¹Yçš„æå‡ç¨‹åº¦è¶Šå¤§ï¼Œä¹Ÿè¡¨æ˜å…³è”æ€§è¶Šå¼ºã€‚####Leverage ä¸ Convictionçš„ä½œç”¨å’Œliftç±»ä¼¼ï¼Œéƒ½æ˜¯å€¼è¶Šå¤§ä»£è¡¨è¶Šå…³è”Leverage : P(A,B)-P(A)P(B)Conviction:P(A)P(!B)/P(A,!Bï¼‰####æ‰€æœ‰æŒ‡æ ‡çš„è®¡ç®—å…¬å¼ï¼š\næ¥ä¸‹æ¥è·å–ç”µå½±æ•°æ®é›†ä¸­ä¸ªç”µå½±ç±»å‹ä¹‹é—´çš„å…³è”å…³ç³»ï¼šanacondaå®‰è£…mlxtendåŒ…\nconda install -c conda-forge mlxtend\nimport pandas as pd\nfrom mlxtend.frequent_patterns import apriori\nfrom mlxtend.frequent_patterns import association_rules\nmovie_genres &#x3D; pd.DataFrame(data,columns&#x3D;[&#39;original_title&#39;,&#39;genres&#39;])\nmovies_ohe &#x3D; movie_genres.drop(&#39;genres&#39;,1).join(movie_genres.genres.str.get_dummies())\nmovies_ohe.shape#(10866, 21)\nmovies_ohe.set_index([&#39;original_title&#39;],inplace&#x3D;True)\nfrequent_itemsets_movies &#x3D; apriori(movies_ohe,use_colnames&#x3D;True, min_support&#x3D;0.025)\nresult &#x3D; [i for i in frequent_itemsets_movies.itemsets if len(i)&gt;1]\nlen(result)#37\nrules_movies &#x3D;  association_rules(frequent_itemsets_movies, metric&#x3D;&#39;lift&#39;, min_threshold&#x3D;1.25)\nrules_movies[(rules_movies.lift&gt;4)].sort_values(by&#x3D;[&#39;lift&#39;], ascending&#x3D;False)\n\nä¹ŸæŒºç¬¦åˆå¸¸ç†å“ˆã€‚\n","slug":"pythonå…³è”åˆ†æï¼ˆaprioriç®—æ³•ï¼‰","date":"2021-02-28T14:05:20.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"d3beaa185b8db8984fb4d7e370d2c9a0","title":"æˆ‘ä»¬è¿™æ ·çš„äººï¼Œè°ˆçˆ±éƒ½å¤ªå¥¢ä¾ˆ","content":"çˆ±æ˜¯äººç±»çš„æœ¬èƒ½ï¼Œå¯æ˜¯æˆå¹´äººçš„ä¸–ç•Œé‡Œï¼Œæ‰€è°“çš„çœŸå¿ƒï¼Œæ›´å¤šçš„æ¢æ¥çš„å´æ˜¯å¤±è½ä¸æ²®ä¸§ï¼Œæ¸æ¸çš„ä»–ä»¬å­¦ä¼šäº†ä¼ªè£…ä¸å…‹åˆ¶ï¼Œå˜å¾—æ²‰é»˜ä¸”å‡‰è–„ã€‚å‰å‡ å¤©å’Œæœ‹å‹é—²èŠï¼Œçªç„¶å¬åˆ°ç°å¦‚ä»Šæ‰¾å¥³æœ‹å‹å°±åƒæ‰¾å¤§ç†ŠçŒ«ä¸€æ ·ï¼Œå“ˆå“ˆå“ˆï¼Œè¿˜æ˜¯å¤§å­¦çš„æ—¶å€™æŠ•èµ„å¥½å•Šï¼Œç°åœ¨ä¼°è®¡æ—©éƒ½ä¸æ‹…å¿ƒäº†ã€‚\næˆ¿å­å¸¦æ¥çš„å®‰ç¨³ï¼Œæ±½è½¦å¸¦æ¥çš„ä¾¿æ·ï¼Œæ‰‹æœºå¹³æ¿å¸¦æ¥çš„æ—¶å°šï¼Œä¸æ—©ä¸æ™šçš„éƒ½è®©ä¹é›¶åèµ¶ä¸Šäº†ï¼Œä»–ä»¬ä¹Ÿè®¸æ˜¯ç‰©è´¨ä½“éªŒæœ€ä¸°å¯Œçš„ä¸€ä»£äººï¼Œä½†åŒæ—¶ä¹Ÿä¼šæ˜¯å¯¹ç‰©è´¨éœ€æ±‚æœ€æŒ‘å‰”çš„ä¸€ä»£äººã€‚åŒå­¦ä¸æ»¡é¢†å¯¼å®‰æ’æ¯…ç„¶è¾å»äº†å¹²äº†ä¸æ»¡äº”ä¸ªæœˆçš„å·¥ä½œï¼›æœ‹å‹ä¸Šæ¬¡åˆ†æ‰‹åï¼Œçªç„¶å‘Šè¯‰æˆ‘å†³å®šä»Šå¹´å›½åº†ç»“å©šï¼Œå’Œä¸€ä¸ªè®¤è¯†åŠå¹´å·¦å³çš„å¥³å­©ï¼›ä»å°ä¸€èµ·é•¿å¤§çš„å…„å¼Ÿåœ¨çŠ¹è±«è¯¥ä¸è¯¥ç•™åœ¨å¤§åŸå¸‚å‘å±•ï¼Œæ¯•ç«Ÿå¯¹äºæˆ¿ä»·æœ‰æ—¶å€™ä¹Ÿä¼šä½å£°è‹¦ç¬‘ã€‚\né›·å†›å…ˆç”Ÿè¯´è¿‡ï¼šâ€œç°åœ¨çš„ç‰©è´¨å·²ç»å¾ˆä¸°å¯Œäº†ï¼Œç°åœ¨çš„å¹´è½»äººé¢å¯¹çš„å¯èƒ½æ›´å¤šçš„æ˜¯ç²¾ç¥ä¸Šçš„ç—›è‹¦â€ã€‚äººå£æ¯”ä¾‹å¤±è¡¡å¸¦æ¥çš„çº¢åˆ©ï¼Œå°±åƒæ˜¯èµ„æœ¬å®¶çœ‹ä¸Šçš„è“æµ·å¸‚åœºï¼Œåœ¨ç‰©è´¨ä¸ç²¾ç¥çš„ä¸¤ç›¸æ–½å‹ä¸‹ï¼ŒçŒ«çŒ«ç‹—ç‹—éƒ½æˆäº†å®¶å±…å¿…å¤‡ç‰©ç§ã€‚è°èƒ½æƒ³åˆ°è®¸å¤šå¹´åçš„ä»Šå¤©äººç±»ä¼šéš”ç€å½©è‰²çš„å±å¹•å»æ„Ÿå—äººæƒ…å†·æš–ï¼Œä½“éªŒä¸–æ€ç‚å‡‰ã€‚ç‰©æ¬²æ¨ªæµçš„ä¸–ç•Œï¼Œæµ®èºæˆäº†è¿™ä¸ªæ—¶ä»£æœ€çœŸå®çš„å†™ç…§ã€‚æˆ‘ä»¬éƒ½æƒ³è¦ç‰µäº†æ‰‹å°±èƒ½ç»“å©šçš„çˆ±æƒ…ï¼Œå´æ´»åœ¨äº†ä¸€ä¸ªä¸Šäº†åºŠéƒ½ä¸ä¸€å®šæœ‰ç»“æœçš„å¹´ä»£ã€‚é‚£ä¸ªç”·äººä»–ç»ˆç©¶è¿˜æ˜¯æ²¡æœ‰æ´»æˆä½ å¸Œæœ›çš„æ ·å­ï¼Œå¯æ˜¯ä½ çŸ¥é“å—ï¼Œåœ¨ä»–ä¼šé¼“èµ·å‹‡æ°”å’Œä½ è¡¨è¾¾ä¹‹å‰ï¼ŒçœŸçš„æ˜¯ä¼šè€ƒè™‘ç°åœ¨å’Œæœªæ¥çš„å‘€ã€‚ä¸ºäº†èƒ½é…å¾—ä¸Šä½ ï¼Œéƒ½è¿˜åœ¨æ²‰ä½æ°”ä¸åœçš„åšæŒå‘¢ã€‚\næœ‰æ—¶å€™ä¼šæœ‰ä¸€ç§å¥‡æ€ªçš„æ„Ÿå—ï¼Œå¦‚æœè¯´è¯»ä¹¦æ—¶ä»£é‡åˆ°é—®é¢˜æ‰€é¢å¯¹çš„å¤±è½ï¼Œæ˜¯ä¸ºäº†é”»ç‚¼å…‹æœå›°éš¾çš„èƒ½åŠ›ï¼Œä»è€Œå­¦ä¹ åˆ°æ›´å¥½çš„æ€ç»´æ–¹å¼ï¼›å‚åŠ é«˜è€ƒä¸Šå¤§å­¦é­é‡å°±ä¸šå‹åŠ›æ‰€æ‰¿å—çš„ç„¦è™‘ï¼Œæ˜¯è¦é­ç­–è‡ªå·±ä¸ºäº†è¿‡ä¸Šæ›´å¥½çš„ç”Ÿæ´»å®ç°æ‰€è°“çš„ä¸ªäººç†æƒ³è€ŒåŠªåŠ›ã€‚ä½†å½“ä½ çœŸæ­£èµ°ä¸Šç¤¾ä¼šçš„é‚£ä¸€éœé‚£ï¼Œå‘ç°ä¸€åˆ‡éƒ½ä¸åƒä½ æƒ³è±¡å¾—é‚£ä¹ˆæœ‰æ¡æœ‰ç†ï¼Œä½ å¯èƒ½è¿˜æ˜¯ä¼šéœ€è¦è›°ä¼å¾ˆé•¿ä¸€æ®µæ—¶é—´ã€‚ä½ æ‹¼å°½å…¨åŠ›çš„æƒ³è¦å»ç¼©çŸ­éœ€è¦å¥‹æ–—çš„è·ç¦»ï¼Œå´è¿˜æ˜¯ä¼šéš¾ä»¥æ‰›ä½èµ„æœ¬å®¶æ„é€ è“å›¾æ—¶è¡Œä¸šç»™å‡ºçš„äº²æ°‘ä»·ã€‚æˆ‘ä»¬è¿™æ ·çš„äººï¼Œè°ˆçˆ±éƒ½å¤ªå¥¢ä¾ˆã€‚\nå°±å†™åˆ°è¿™å§ï¼Œé—²æ¥å‡ ç¬”ï¼Œä¸€ä¸ªäººè¿˜æ˜¯è¦å¿ƒæ— æ‰€æƒï¼Œéšé‡è€Œå®‰ã€‚\n","slug":"æˆ‘ä»¬è¿™æ ·çš„äººï¼Œè°ˆçˆ±éƒ½å¤ªå¥¢ä¾ˆ","date":"2020-09-24T03:17:06.000Z","categories_index":"","tags_index":"æˆé•¿ï¼Œæ—§æ—¶å…‰","author_index":"Aurora"},{"id":"c7aee1b1cd00f742e926b01d61d89c81","title":"python-å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼ˆå­¦çš„æ˜¯æ€ç»´ï¼‰","content":"å­¦ç”Ÿç®¡ç†ç³»ç»Ÿåº”å…·å¤‡çš„åŠŸèƒ½\næ·»åŠ å­¦ç”ŸåŠæˆç»©ä¿¡æ¯\nå°†å­¦ç”Ÿä¿¡æ¯ä¿å­˜åˆ°æ–‡ä»¶ä¸­\nä¿®æ”¹å’Œåˆ é™¤å­¦ç”Ÿä¿¡æ¯\næŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯\næ ¹æ®å­¦ç”Ÿæˆç»©è¿›è¡Œæ’åº\nç»Ÿè®¡å­¦ç”Ÿçš„æ€»åˆ†\n\n\nimport os\nfilename &#x3D; &#39;student.txt&#39;\ndef main():\n    while True:\n        menum()\n        choice &#x3D; int(input(&quot;è¯·é€‰æ‹©:&quot;))\n        if choice in [0,1,2,3,4,5,6,7]:\n            if choice&#x3D;&#x3D;0:\n                answer &#x3D; input(&quot;æ‚¨ç¡®å®šè¦é€€å‡ºç³»ç»Ÿå—?y&#x2F;n&quot;)\n                if answer &#x3D;&#x3D; &#39;y&#39; or answer &#x3D;&#x3D; &#39;Y&#39;:\n                    print(&quot;è°¢è°¢æ‚¨çš„ä½¿ç”¨ï¼&quot;)\n                    break #é€€å‡ºç³»ç»Ÿ\n                else:\n                    continue\n            elif choice&#x3D;&#x3D;1:\n                insert()\n            elif choice&#x3D;&#x3D;2:\n                search()\n            elif choice&#x3D;&#x3D;3:\n                delete()\n            elif choice&#x3D;&#x3D;4:\n                modify()\n            elif choice &#x3D;&#x3D;5:\n                sort()\n            elif choice &#x3D;&#x3D;6:\n                total()\n            elif choice&#x3D;&#x3D;7:\n                show()\ndef menum():\n    print(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)\n    print(&quot;----------------------------------åŠŸèƒ½èœå•-----------------------------------&quot;)\n    print(&quot;\\t\\t\\t\\t\\t\\t1.å½•å…¥å­¦ç”Ÿä¿¡æ¯&quot;)\n    print(&quot;\\t\\t\\t\\t\\t\\t2.æŸ¥æ‰¾å­¦ç”Ÿä¿¡æ¯&quot;)\n    print(&quot;\\t\\t\\t\\t\\t\\t3.åˆ é™¤å­¦ç”Ÿä¿¡æ¯&quot;)\n    print(&quot;\\t\\t\\t\\t\\t\\t4.ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯&quot;)\n    print(&quot;\\t\\t\\t\\t\\t\\t5.æ’åº&quot;)\n    print(&quot;\\t\\t\\t\\t\\t\\t6.ç»Ÿè®¡å­¦ç”Ÿæ€»äººæ•°&quot;)\n    print(&quot;\\t\\t\\t\\t\\t\\t7.æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿä¿¡æ¯&quot;)\n    print(&quot;\\t\\t\\t\\t\\t\\t0.é€€å‡º&quot;)\n    print(&quot;----------------------------------------------------------------------------&quot;)\n\ndef save(lst):\n    try:\n        stu_txt &#x3D; open(filename,&#39;a&#39;,encoding&#x3D;&#39;utf-8&#39;)#ä»¥è¿½åŠ çš„æ¨¡å¼è¿›è¡Œæ‰“å¼€\n    except:\n        stu_txt &#x3D; open(filename,&#39;w&#39;,encoding &#x3D; &#39;utf-8&#39;)\n    for item in lst:\n        stu_txt.write(str(item)+&#39;\\n&#39;)\n    stu_txt.close()\n\ndef insert():\n    student_list &#x3D; []\n    while True:\n        id &#x3D; input(&#39;è¯·è¾“å…¥ID(å¦‚1001):&#39;)\n        if not id:\n            break\n        name &#x3D; input(&quot;è¯·è¾“å…¥å§“å:&quot;)\n        if not name:\n            break\n        try:\n            english_score &#x3D; int(input(&quot;è¯·è¾“å…¥è‹±è¯­æˆç»©:&quot;))\n            python_score&#x3D; int(input(&quot;è¯·è¾“å…¥Pythonæˆç»©:&quot;))\n            java_score &#x3D; int(input(&quot;è¯·è¾“å…¥Javaæˆç»©:&quot;))\n        except:\n            print(&quot;è¾“å…¥æ— æ•ˆï¼Œä¸æ˜¯æ•´æ•°ç±»å‹ï¼Œè¯·é‡æ–°è¾“å…¥...&quot;)\n            continue\n        #å°†å½•å…¥çš„å­¦ç”Ÿä¿¡æ¯ä¿å­˜åˆ°å­—å…¸ä¸­\n        student &#x3D; &#123;&#39;id&#39;:id,&#39;name&#39;:name,&#39;english&#39;:english_score,&#39;python&#39;:python_score,&#39;java&#39;:java_score&#125;\n        #å°†å­¦ç”Ÿä¿¡æ¯æ·»åŠ åˆ°åˆ—è¡¨ä¸­\n        student_list.append(student)\n        answer &#x3D; input(&quot;æ˜¯å¦å°†ç»§ç»­æ·»åŠ ï¼Ÿy&#x2F;n\\n&quot;)\n        if answer&#x3D;&#x3D;&#39;y&#39;:\n            continue\n        else:\n            break\n    #è°ƒç”¨save()å‡½æ•°\n    save(student_list)\n    print(&quot;å­¦ç”Ÿä¿¡æ¯å½•å…¥å®Œæ¯•ï¼ï¼ï¼&quot;)\n\ndef search():\n    student_query &#x3D; []\n    while True:\n        id &#x3D; &#39;&#39;\n        name &#x3D; &#39;&#39;\n        if os.path.exists(filename):\n            mode &#x3D; input(&quot;æŒ‰IDæŸ¥æ‰¾è¯·è¾“å…¥1ï¼ŒæŒ‰å§“åæŸ¥æ‰¾è¯·è¾“å…¥2&quot;)\n            if mode &#x3D;&#x3D;&#39;1&#39;:\n                id &#x3D; input(&quot;è¯·è¾“å…¥å­¦ç”ŸID&quot;)\n            elif mode &#x3D;&#x3D;&#39;2&#39;:\n                name &#x3D; input(&quot;è¯·è¾“å…¥å­¦ç”Ÿå§“å&quot;)\n            else:\n                print(&quot;æ‚¨çš„è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&quot;)\n                search()\n            with open(filename,&#39;r&#39;,encoding&#x3D;&#39;utf-8&#39;) as rfile:\n                student &#x3D; rfile.readlines()\n                for item in student:\n                    d &#x3D; dict(eval(item))\n                    if id!&#x3D;&#39;&#39;:\n                        if d[&#39;id&#39;] &#x3D;&#x3D; id:\n                            student_query.append(d)\n                    if name!&#x3D;&#39;&#39;:\n                        if d[&#39;name&#39;] &#x3D;&#x3D;name:\n                            student_query.append(d)\n            #æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ\n            show_student(student_query)\n            #æ¸…ç©ºåˆ—è¡¨\n            student_query.clear()\n            answer &#x3D; input(&quot;æ˜¯å¦ç»§ç»­æŸ¥è¯¢y&#x2F;n\\n&quot;)\n            if answer&#x3D;&#x3D;&#39;y&#39; or answer&#x3D;&#x3D;&#39;Y&#39;:\n                continue\n            else:\n                break\n        else:\n            print(&quot;æš‚æœªä¿å­˜å­¦ç”Ÿä¿¡æ¯&quot;)\n            return\n\ndef show_student(lst):\n    if len(lst) &#x3D;&#x3D;0:\n        print(&quot;æ²¡æœ‰æŸ¥è¯¢åˆ°å­¦ç”Ÿä¿¡æ¯ï¼Œæ— æ•°æ®æ˜¾ç¤ºï¼ï¼ï¼&quot;)\n        return\n    #å®šä¹‰æ ‡é¢˜æ˜¾ç¤ºæ ¼å¼\n    format_title &#x3D; &#39;&#123;:^6&#125;\\t&#123;:^12&#125;\\t&#123;:^8&#125;\\t&#123;:^10&#125;\\t&#123;:^10&#125;\\t&#123;:^8&#125;&#39;\n    print(format_title.format(&#39;ID&#39;,&#39;å§“å&#39;,&#39;è‹±è¯­æˆç»©&#39;,&#39;Pythonæˆç»©&#39;,&#39;Javaæˆç»©&#39;,&#39;æ€»æˆç»©&#39;))\n    #å®šä¹‰å†…å®¹æ˜¾ç¤ºæ ¼å¼\n    format_data &#x3D; &#39;&#123;:^6&#125;\\t&#123;:^12&#125;\\t&#123;:^8&#125;\\t&#123;:^10&#125;\\t&#123;:^10&#125;\\t&#123;:^8&#125;&#39;\n    for item in lst:\n        print(format_data.format(item.get(&#39;id&#39;),\n                                item.get(&#39;name&#39;),\n                                  item.get(&#39;english&#39;),\n                                  item.get(&#39;python&#39;),\n                                  item.get(&#39;java&#39;),\n                                 int(item.get(&#39;english&#39;))+int(item.get(&#39;python&#39;))+int(item.get(&#39;java&#39;))\n                                 ))\n\ndef delete():\n    while True:\n        student_id &#x3D; input(&quot;è¯·è¾“å…¥è¦åˆ é™¤çš„å­¦ç”Ÿçš„IDï¼š&quot;)\n        if student_id !&#x3D;&#39;&#39;:\n            if os.path.exists(filename):\n                with open(filename,&#39;r&#39;,encoding&#x3D;&#39;utf-8&#39;) as file:\n                    student_old &#x3D; file.readlines()#é€è¡Œè¯»å–ï¼ŒæŒ‰è¡Œç”Ÿæˆä¸€ä¸ªåˆ—è¡¨\n            else:\n                student_old &#x3D;[]\n            flag &#x3D; False#æ ‡è®°æ˜¯å¦åˆ é™¤\n            if student_old:#åˆ¤æ–­åŸæœ‰æ–‡ä»¶å†…å®¹æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæœ‰å†…å®¹å°±æ‰“å¼€å¹¶å†™å…¥ä¸œè¥¿\n                with open(filename,&#39;w&#39;,encoding&#x3D;&#39;utf-8&#39;) as wfile:\n                    d&#x3D;&#123;&#125;\n                    for item in student_old:\n                        d &#x3D; dict(eval(item))#å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—å…¸\n                        if d[&#39;id&#39;]!&#x3D;student_id:\n                            wfile.write(str(d)+&quot;\\n&quot;)\n                        else:\n                            flag&#x3D;True#å®šä¹‰è¿™ä¸ªæ ‡å¿—ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰å°†å˜é‡è¿›è¡Œå†™å…¥ï¼Œå³ä¸ºåˆ é™¤\n                    if flag:\n                        print(f&quot;idä¸º&#123;student_id&#125;çš„å­¦ç”Ÿä¿¡æ¯å·²ç»è¢«åˆ é™¤ã€‚&quot;)\n                    else:\n                        print(f&quot;æ²¡æœ‰æ‰¾åˆ°IDä¸º&#123;student_id&#125;çš„å­¦ç”Ÿä¿¡æ¯ã€‚&quot;)\n            else:\n                print(&quot;æ— å­¦ç”Ÿä¿¡æ¯ã€‚&quot;)\n                break\n            show()#åˆ å®Œä¹‹åè¦é‡æ–°æ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯\n            answer &#x3D; input(&quot;æ˜¯å¦ç»§ç»­åˆ é™¤ï¼Ÿy&#x2F;n\\n&quot;)\n            if answer&#x3D;&#x3D;&#39;y&#39; or answer &#x3D;&#x3D; &quot;Y&quot;:\n                continue\n            else:\n                break\n\ndef modify():\n    show()\n    if os.path.exists(filename):\n        with open(filename,&#39;r&#39;,encoding&#x3D;&#39;utf-8&#39;) as rfile:\n            student_old &#x3D; rfile.readlines()\n    else:\n        return\n    student_id &#x3D; input(&quot;è¯·è¾“å…¥è¦ä¿®æ”¹çš„å­¦å‘˜çš„IDï¼š&quot;)\n    with open(filename,&#39;w&#39;,encoding&#x3D;&#39;utf-8&#39;) as wfile:\n        for item in student_old:\n            d &#x3D; dict(eval(item))\n            if d[&#39;id&#39;]&#x3D;&#x3D;student_id:#æ‰¾åˆ°è¦ä¿®æ”¹çš„ç›¸å…³id\n                print(&quot;æ‰¾åˆ°å­¦ç”Ÿä¿¡æ¯ï¼Œå¯ä»¥ä¿®æ”¹ä»–çš„ç›¸å…³ä¿¡æ¯äº†ï¼&quot;)\n                while True:\n                    try:\n                        d[&#39;name&#39;]&#x3D;input(&quot;è¯·è¾“å…¥å§“åï¼š&quot;)\n                        d[&#39;english&#39;] &#x3D;input(&quot;è¯·è¾“å…¥è‹±è¯­æˆç»©ï¼š&quot;)\n                        d[&#39;python&#39;] &#x3D; input(&quot;è¯·è¾“å…¥Pythonæˆç»©ï¼š&quot;)\n                        d[&#39;Java&#39;] &#x3D; input(&quot;è¯·è¾“å…¥Javaæˆç»©ï¼š&quot;)\n                    except:\n                        print(&quot;æ‚¨çš„è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼ï¼ï¼&quot;)\n                    wfile.write(str(d)+&quot;\\n&quot;)\n                    print(&quot;ä¿®æ”¹æˆåŠŸ&quot;)\n\n            else:\n                wfile.write(str(d)+&quot;\\n&quot;)\n        answer &#x3D; input(&quot;æ˜¯å¦ç»§ç»­ä¿®æ”¹å…¶ä»–å­¦æ ¡ä¿¡æ¯ï¼Ÿy&#x2F;n\\n&quot;)\n        if answer&#x3D;&#x3D;&#39;y&#39; or answer &#x3D;&#x3D;&#39;Y&#39;:\n            modify()\n\ndef sort():\n    if os.path.exists(filename):\n        with open(filename, &#39;r&#39;, encoding&#x3D;&#39;utf-8&#39;) as rfile:\n            student &#x3D; rfile.readlines()\n        student_new &#x3D; []\n        for item in student:\n            d &#x3D; dict(eval(item))\n            student_new.append(d)\n    else:\n        return\n    asc_or_desc &#x3D; input(&quot;è¯·é€‰æ‹©(0.å‡åº 1.é™åº)&quot;)\n    if asc_or_desc&#x3D;&#x3D;&#39;0&#39;:\n        asc_or_desc_bool &#x3D; False\n        pass\n    elif asc_or_desc&#x3D;&#x3D;&#39;1&#39;:\n        asc_or_desc_bool &#x3D; True\n        pass\n    else:\n        print(&quot;æ‚¨çš„è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ï¼&quot;)\n        sort()\n    mode &#x3D; input(&quot;è¯·é€‰æ‹©æ’åºæ–¹å¼(1.æŒ‰è‹±è¯­æˆç»©æ’åº 2.æŒ‰Pythonæˆç»©æ’åº 3.æŒ‰Javaç¨‹åºæ’åº 0.æŒ‰æ€»æˆç»©æ’åº)&quot;)\n    if mode&#x3D;&#x3D;&#39;1&#39;:\n        student_new.sort(key&#x3D;lambda x:x[&#39;english&#39;],reverse&#x3D;asc_or_desc_bool)\n    elif mode&#x3D;&#x3D;&#39;2&#39;:\n        student_new.sort(key&#x3D;lambda x:x[&#39;python&#39;],reverse&#x3D;asc_or_desc_bool)\n    elif mode&#x3D;&#x3D;3:\n        student_new.sort(key&#x3D;lambda x:x[&#39;java&#39;],reverse&#x3D;asc_or_desc_bool)\n    elif mode&#x3D;&#x3D;&#39;0&#39;:\n        student_new.sort(key&#x3D;lambda x:x[&#39;english&#39;]+x[&#39;python&#39;]+x[&#39;java&#39;],reverse&#x3D;asc_or_desc_bool)\n    else:\n        print(&quot;ä½ çš„è¾“å…¥æœ‰è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&quot;)\n        sort()\n    show_student(student_new)\n\ndef total():\n    if os.path.exists(filename):\n        with open(filename,&#39;r&#39;,encoding&#x3D;&#39;utf-8&#39;) as rfile:\n            students &#x3D; rfile.readlines()\n            if students:\n                print(f&quot;ä¸€å…±æœ‰&#123;len(students)&#125;åå­¦ç”Ÿ&quot;)\n            else:\n                print(&quot;è¿˜æ²¡æœ‰å½•å…¥å­¦ç”Ÿä¿¡æ¯&quot;)\n    else:\n        print(&quot;æš‚æœªå­˜å­¦ç”Ÿç›¸å…³ä¿¡æ¯&quot;)\ndef show():\n    student_ls &#x3D; []\n    if os.path.exists(filename):\n        with open(filename,&#39;r&#39;,encoding&#x3D;&#39;utf-8&#39;) as rfile:\n            students &#x3D; rfile.readlines()\n            for item in students:\n                student_ls.append(eval(item))\n            if student_ls:\n                show_student(student_ls)\n            else:\n                print(&quot;è¿˜æ²¡æœ‰ä¿å­˜å­¦ç”Ÿä¿¡æ¯&quot;)\n    else:\n        print(&quot;æ²¡æœ‰å‘ç°ç›¸åº”æ•°æ®æ–‡ä»¶&quot;)\n\n\nif __name__ &#x3D;&#x3D;&#39;__main__&#39;:\n    main()\n\næ‰“åŒ…æˆexeéœ€è¦åœ¨ç»ˆç«¯æ¿€æ´»ç¯å¢ƒåè¿è¡Œ pip install PyIntallerä¸‹è½½å¥½ä¹‹åå†æ‰§è¡Œ pyinstaller -F D:\\Studentsys\\stusystem.py  \n\n-Fåé¢æ˜¯å®Œæ•´è·¯å¾„ä»¥åŠæ–‡ä»¶åhttps://www.bilibili.com/video/BV1wD4y1o7AS?p=135&amp;spm_id_from=pageDriverå¨Ÿå§yyds! \n","slug":"python-å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼ˆå­¦çš„æ˜¯æ€ç»´ï¼‰","date":"2020-09-16T10:35:07.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"35324116e18b1ad18922119ba78fc7f6","title":"pythoné…’ç±»æ•°æ®åˆ†æ","content":"\nä¸€ã€æ•°æ®æ¦‚è¿°â€˜idâ€™,â€™nameâ€™,â€™priceâ€™,â€™salesâ€™,â€™ad_wordâ€™,â€™buy_actâ€™,â€™vote_countâ€™,â€™urlâ€™,â€™dateâ€™,â€™brandâ€™åˆ†åˆ«ä¸ºé”€å”®æ•°æ®çš„å•†å“IDï¼Œå•†å“åç§°ï¼Œå•ä»·ï¼Œé”€é‡ï¼Œå¹¿å‘Šè¯ï¼Œä¿ƒé”€æ´»åŠ¨ï¼Œé“¾æ¥ï¼Œæ—¥æœŸï¼Œå“ç‰Œã€‚ä»¥åŠè‡ªæ„å±æ€§â€˜amountâ€™ï¼šé”€å”®é¢ï¼Œâ€˜monthâ€™ï¼šæœˆä»½ï¼Œâ€˜price_levelâ€™ï¼šä»·æ ¼åŒºé—´ã€‚\näºŒã€æå‡ºé—®é¢˜1ã€è¡Œä¸šå¤§ç›˜è¿‘æœŸï¼ˆ2018/2/27ï¼‰è¡¨ç°ï¼Ÿå„ä»·ä½æ®µè¡¨ç°ï¼Ÿæ€»ä½“è¡¨ç°ï¼Œå„ä»·ä½è¡¨ç°ï¼Œå“ªä¸ªä»·ä½çš„äº§å“æœ€ç«ï¼Œå„å‚å®¶è¡¨ç°ï¼Ÿè¿‘æœŸå„è¡Œä¸šçš„å¹¿å‘Šè¯ã€ä¿ƒé”€æ´»åŠ¨æ€ä¹ˆæ ·2ã€è¡Œä¸šå¤§ç›˜æ€»ä½“æ€åŠ¿æ€æ ·ï¼Ÿé”€é‡ä¸è¯„è®ºæ•°ã€å•ä»·çš„å…³ç³»ï¼Ÿæ—¶é—´åºåˆ—ä¸‹çš„è¡Œä¸šäº§å“èµ°åŠ¿ï¼Ÿ3ã€å¦‚ä½•è¯„ä»·æ³¸å·è€çª–å“ç‰Œï¼Ÿ(å¯ä»å¤šè§’åº¦ï¼Œè§„æ¨¡å¢é•¿è¶‹åŠ¿ã€äº§å“ç»“æ„ç­‰)äº§å“è§„æ¨¡ã€å¢é•¿è¶‹åŠ¿ã€å‹å•†ç«äº‰ã€è¡Œä¸šæ°´å¹³ï¼Ÿ\nä¸‰ã€è¡Œä¸šå¤§ç›˜è¿‘å‘¨æœŸï¼ˆ2018/2/27ï¼‰è¡¨ç°ï¼Ÿå„ä»·ä½æ®µè¡¨ç°ï¼Ÿè¡Œä¸šå¤§ç›˜2018/2/27æ€»ä½“è¡¨ç°\n2018/2/27è¡Œä¸šçš„æ€»é”€å”®é‡ä¸º5.663030e+05ï¼Œæ€»è¯„ä»·æ•°ä¸º1.255655e+06ï¼Œæ€»é”€å”®é¢è¾¾1.842307e+08ã€‚å¹³å‡å•ä»·ä»·æ ¼ä¸º417å…ƒï¼Œå¹³å‡é”€å”®642ä»½ï¼Œå¹³å‡é”€å”®é¢è¾¾209115.4å…ƒå•ä»·ä¸­ä½æ•°199ï¼Œè¯´æ˜å°‘æ•°é«˜ä»·ä½çš„é…’æé«˜äº†æ€»ä½“å‡å€¼é”€é‡ä¸­ä½æ•°ä¸º148ï¼Œè¯´æ˜å°‘æ•°åŠé”€é‡é«˜çš„å¤©æ•°æå‡äº†å¹³å‡äº¤æ˜“é‡é”€å”®é¢ä¸­ä½æ•°ä½äºæ€»ä½“å‡å€¼ç›¸å·®å·¨å¤§ï¼Œå¯èƒ½å­˜åœ¨çˆ†å‘äº¤æ˜“çš„æƒ…å†µã€‚ä¸€å¤©ä¸­å‡ºç°çš„æœ€é«˜äº¤æ˜“é‡æ˜¯21685ä»½è®¢å•ï¼Œæœ€é«˜äº¤æ˜“é¢æ˜¯65011630å…ƒï¼Œæœ€é«˜å•ä»·çš„ç™½é…’ä¸º6588å…ƒï¼Œæœ€é«˜è¯„è®ºæ•°ä¸º67514æ¡ï¼Œæœ€ä½ä¸º0æ¡ã€‚å„ä»·ä½è¡¨ç°\nåœ¨è¡Œä¸šå¤§ç›˜æœ€è¿‘ä¸€ä¸ªå‘¨æœŸå†…ï¼Œå¯ä»¥çœ‹åˆ°é”€é‡æœ€å¥½å’Œè¯„è®ºæ•°æœ€é«˜çš„å‡æ˜¯æ˜¯100-200ä»·ä½çš„ç™½é…’ã€‚åœ¨ä»·ä½50ä»¥ä¸‹ç™½é…’é”€é‡å’Œè¯„è®ºæ•°å‡ºç°å¤§åå·®ï¼Œåœ¨é”€é‡å·®è·æ‚¬æ®Šçš„æƒ…å†µä¸‹ï¼Œè¯¥ç±»ç™½é…’çš„è¯„è®ºæ•°è¶…è¿‡200-500ä»·ä½ç™½é…’çš„è¯„è®ºæ•°ï¼Œä½†æ˜¯é”€é‡åä½è¯´æ˜è¯¥ç±»ç™½é…’åœ¨å¸‚åœºä¸­æœ‰è¾ƒé«˜æµè¡Œåº¦çš„åŒæ—¶å¯èƒ½ä¹Ÿå­˜åœ¨è¾ƒå¤šçš„æ§½ç‚¹ã€‚ä¸­ç­‰ä»·ä½ï¼ˆ100-500ï¼‰æ˜¯å¸‚åœºçš„ä¸»è¦æ½®æµæ‰€åœ¨ï¼Œç”±ä¸­ä»·ä½å‘ä½ä»·ä½è¿‡åº¦çš„äº§å“ï¼ˆ50-100ï¼‰åŒæ ·èƒ½ç¨³ä½å¸‚åœºï¼Œè·å¾—è¾ƒé«˜çš„é”€é‡ä¸äººæ°”ã€‚3000ä»¥ä¸Šçš„é”€é‡ä¸è¯„è®ºæ•°æä½ï¼Œç¬¦åˆå½“ä»Šç¤¾ä¼šäººä»¬è´¢å¯Œèµ„æºåˆ†é…æˆ–ç”Ÿæ´»æ¶ˆè´¹æ°´å¹³çš„å·®è·ï¼Œé«˜æ¶ˆè´¹äººç¾¤åªå æå°‘æ•°ã€‚\n\n1000-3000ä»·ä½å¸­å·å¸‚åœºï¼Œé«˜å•ä»·æƒ…å†µä¸‹å³æ—¶åœ¨ä½é”€é‡æ—¶ä¹Ÿèƒ½è¿œè¶…è¶Šå…¶ä»–ä»·ä½é”€å”®é¢ã€‚\n\nåŸºæœ¬å‘ˆç°å•ä»·è¶Šé«˜ï¼Œè¯„è®ºæ•°è¶Šå°‘ã€‚äººä»¬æ€»æ˜¯ä½ä»·å•†å“çš„è¦æ±‚è¿‡äºæ‰§ç€ï¼Ÿ\n\nç”±äºå…¶1000-3000å•ä»·åŸºæ•°å¤§ï¼Œå¯¼è‡´é‡‘é¢æœ€å¤§\nå„å‚å®¶è¡¨ç°\næœ€è¿‘ä¸€å‘¨æœŸäº”ç²®æ¶²é”€é‡æœ€é«˜è¾¾åˆ°10ä¸‡ç“¶ä»¥ä¸Šï¼Œè¿œé¢†å…ˆäºå…¶ä»–å‚å®¶ã€‚\n\näº”ç²®æ¶²äº§å“å¸‚åœºè¯„è®ºæ•°æœ€é«˜ï¼Œåº”è¯¥æ˜¯å¹¿å‘Šå®£ä¼ æˆ–è€…äº§å“è´¨é‡åšå¾—å¥½ã€‚\n\nèŒ…å°è¿‘æœŸé”€å”®æ€»é¢ä½äºè¡Œä¸šæœ€é«˜æ°´å¹³ï¼Œé”€å”®é¢è¿‘7500ä¸‡ã€‚äº”ç²®æ¶²å¯èƒ½ç”±äºäº§å“å•ä»·åä½ï¼Œé”€å”®æ€»é¢ä½å±…ç¬¬ä¸‰ï¼Œæ¥è¿‘2000ä¸‡ã€‚\næœ€è¿‘ä¸€ä¸ªå‘¨æœŸå¹¿å‘Šã€ä¿ƒé”€æ´»åŠ¨æ€ä¹ˆåšçš„ï¼Ÿ\nå¹¿å‘Šè¯ä¸€ä»¥â€˜å¤©çŒ«é…é€â€™ï¼Œâ€˜æ­£å“ä¿è¯â€™ç­‰ä¸ºä¸»è¦æ ‡è¯­ï¼Œâ€˜ä¸œæ–¹ä¹ é…’â€™ï¼Œâ€˜çŒ«è¶…è‡ªè¥â€™ï¼Œâ€˜åœ°é“åŒ—äº¬å‘³â€™ä¹Ÿæ˜¯ä¸»è¦å®£ä¼ æ–¹å‘ã€‚\n\nä¿ƒé”€æ´»åŠ¨ä¸»è¦ä»¥â€˜æ»¡ä¸€1æˆ–2é€ä»»æ„ä¸€ä»¶èµ å“ï¼Œèµ å®Œä¸ºæ­¢â€™ä½œä¸ºä¸»è¦ä¿ƒé”€æ´»åŠ¨ã€‚\nå››ã€è¡Œä¸šå¤§ç›˜æ€»ä½“æ€åŠ¿æ€æ ·ï¼Ÿé”€é‡ä¸å•ä»·ã€è¯„è®ºæ•°çš„å…³ç³»\nè¯„è®ºæ•°é‡å˜åŒ–ä¸é”€é‡åŸºæœ¬å‘ˆçº¿æ€§å˜åŒ–ã€‚è¯„è®ºæ•°ä»£è¡¨å¸‚åœºååº”ï¼Œå¸‚åœºçƒ­åº¦è¶Šé«˜ï¼Œé”€é‡è¶Šé«˜ã€‚\n\nå•ä»·ä¸é”€é‡åŸºæœ¬æˆåæ¯”ä¾‹å˜åŒ–ã€‚å•ä»·è¶Šé«˜ï¼Œé”€é‡è¶Šä½ï¼Œå•ä»·è¶Šä½ï¼Œé”€é‡è¶Šé«˜ã€‚###æ—¶é—´åºåˆ—ä¸‹çš„è¡Œä¸šäº§å“èµ°åŠ¿\n200-500ä»·ä½æ®µçš„å•†å“é”€é‡å‘ˆä¸Šå‡è¶‹åŠ¿ï¼Œ0-50å’Œ50-100çš„å•†å“åœ¨2017å¹´11æœˆä¸Šå‡åå‡ºç°æŒç»­ä¸‹é™ï¼Œ100-200çš„å•†å“åœ¨ä¸Šå‡åä¿æŒå¹³ç¨³ï¼ŒåŸºæœ¬ç«™ç¨³å¸‚åœºã€‚500-3000åŒºé—´å†…å•†å“åœ¨åŒå¹´12æœˆåå‡ºç°å°èŒƒå›´å¢é•¿ï¼Œå› å…¶å•ä»·åŸºæ•°è¾ƒå¤§ï¼Œå¯èƒ½å¼•èµ·é”€å”®é¢å¤§å¹…å¢é•¿ã€‚\n\né™¤0-50å’Œ3000ä»¥ä¸Šäº§å“å¤–ï¼Œå…¶ä»–å•†å“éƒ½åœ¨2017å¹´11æœˆåå‡ºç°é”€å”®é¢æ˜¾è‘—å¢é•¿ï¼Œæ¨æµ‹å¯èƒ½æ˜¯åŒåä¸€ä»¥åŠå…¶ä»–ä¿ƒé”€æ´»åŠ¨ï¼Œä½†æ˜¯å¯¹0-50å’Œ3000ä»¥ä¸Šçš„å•†å“é”€å”®çŠ¶æ€åŸºæœ¬æ— å½±å“ã€‚1000-3000åŒºé—´å•†å“åœ¨2017å¹´12æœˆè¿‡åå‡ºç°ç›´çº¿å¼å¢é•¿ï¼Œ100-500åŒºé—´äº§å“ä½œä¸ºå¸‚åœºä¸»åŠ›ä¹Ÿå‡ºç°å¢é•¿è¶‹åŠ¿ã€‚\n\n3000æœˆä»¥ä¸Šçš„é…’ç±»åœ¨11æœˆå‡ºç°ä»·æ ¼å¤§é¢ä¸‹è·Œï¼Œå…¶ä»–åŒºé—´å•†å“å•ä»·å‡èµ°åŠ¿å¹³ç¨³ã€‚\näº”ã€æ³¸å·è€çª–è‡ªèº«å¢é•¿çš„è¶‹åŠ¿ï¼Œäº§å“ç»“æ„ï¼Œè¡Œä¸šæ°´å¹³æ³¸å·è€çª–äº§å“è§„æ¨¡\næ³¸å·è€çª–å“ç‰Œä¸»æ‰“50-500ä»·ä½äº§å“è¦†ç›–å¸‚åœºï¼Œå…¶ä¸­3000+è¶…é«˜ä»·é…’ç±»å æ¯”ä¸0-50ä½ä»·å“ç±»å æ¯”æœ€ä½ï¼Œå‡ä½äº500-3000æ¡£ä½ï¼Œè¯´æ˜æ³¸å·è€çª–åœ¨å¸‚åœºçš„å“ç‰Œå½¢è±¡ä¸æˆ˜ç•¥ç›®æ ‡æ˜¯åšå¥½ä¸­é«˜ç«¯é…’ç±»äº§å“ã€‚\n\nåœ¨2017å¹´12æœˆäº§å“è§„æ¨¡çªç„¶å¢å¤§ï¼Œåº”è¯¥æ˜¯ä¸è¡Œä¸šç«äº‰æˆ–å¸‚åœºéœ€æ±‚ç›¸å…³ã€‚ \n\né”€é‡åœ¨åä¸€æœˆä»½å‡ºç°å¤§å¹…å¢é•¿ï¼ŒæŒç»­åˆ°æ¬¡å¹´ä¸€æœˆä»½å‡ºç°æ˜¾è‘—ä¸‹é™ã€‚\n\næ€»é”€å”®é¢ä¸é”€é‡è¡¨ç°ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯åœ¨åä¸€æœˆä»½å‡ºç°å¤§å¹…å¢é•¿ï¼ŒæŒç»­åˆ°æ¬¡å¹´ä¸€æœˆä»½å‡ºç°æ˜¾è‘—ä¸‹é™ã€‚\n\n0-50åŒºé—´äº§å“åœ¨åä¸€æœˆåå¤§å¹…å¢é•¿ï¼ŒåæŒç»­è¡°å¼±ã€‚50-500åŒºé—´å•†å“åŒæœŸå‡å‡ºç°æ˜¾è‘—å¢é•¿ï¼Œåç¼“æ…¢ä¸‹é™è¶‹äºç¨³å®šã€‚\n\n200-500ä¸1000-3000åŒºé—´å•†å“ç”±äºå…¶å•ä»·åŸºæ•°è¾ƒå¤§ï¼Œåœ¨åŒå¹´åä¸€æœˆé”€é‡ä¿è¯çš„å‰æä¸‹ï¼Œå‡ºç°å¤§å¹…å¢é•¿ã€‚\n\n3000+äº§å“åœ¨2017å¹´7æœˆ-9æœˆå‡ºç°æ³¢åŠ¨åè¶‹äºå¹³ç¨³ã€‚\n\n17å¹´9æœˆå¯èƒ½å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œé™¤500-1000åŒºé—´å¤–ï¼Œéƒ½å‡ºç°äº†å…ˆå¢åé™çš„è¶‹åŠ¿ã€‚\né‚£ç§å¹¿å‘Šè¯ã€ä¿ƒé”€æ ‡è¯­å‡ºç°çš„æœ€å¤š\nè¯¥å“ç‰Œä¸»æ‰“å¹¿å‘Šå…³é”®è¯ï¼š â€˜â€™é™æ—¶ç›´é™â€˜â€™ï¼Œâ€˜ç”„é€‰å¥½è´§â€™ï¼Œâ€˜å‚å®¶ç›´ä¾›â€™ã€‚\n\nä¸»æ‰“çš„ä¿ƒé”€æ ‡è¯­ä¸º â€˜â€™é€ä»»æ„ä¸€ä»¶èµ å“ï¼Œèµ å®Œå³æ­¢â€˜â€™ã€‚\né€‰æ‹©ç‰›æ å±±ä½œä¸ºæ³¸å·è€çª–ç«äº‰å¯¹æ‰‹\nç‰›æ å±±å“ç‰Œåœ¨äº§å“å¸ƒå±€ä¸Šå’Œæ³¸å·è€çª–éƒ½æ˜¯ä¸»æ‰“50-500ä»·ä½æ®µå•†å“å¸ƒå±€ï¼Œä½†æ˜¯ç‰›æ å±±åœ¨0-50ä¸Šçš„äº§å“æ•°å¤šäº500-1000ä»·ä½çš„äº§å“æ•°é‡ã€‚ä¸”æ²¡æœ‰3000å…ƒä»¥ä¸Šäº§å“ä¸Šå¸‚ï¼Œå¯è§ç‰›æ å±±å“ç‰Œè¯•å›¾ç•™ä½ä¸­ç«¯ä»·ä½äº§å“å®¢æˆ·ï¼Œæ‹‰æ‹¢ä½ä»·ä½äº§å“å®¢æˆ·çš„æˆ˜ç•¥æ–¹é’ˆã€‚\n\nä¸æ³¸å·è€çª–ç›¸ä¼¼å‡åœ¨åäºŒæœˆå‡ºç°äº†è¾ƒå¤§å¹…åº¦çš„å¢é•¿ã€‚\n\næ³¸å·è€çª–åªåœ¨200-300å’Œè¶…1000å…ƒä»¥ä¸Šçš„äº§å“é”€é‡å°èŒƒå›´é¢†å…ˆå‹å•†ï¼Œä½†ç”±äºå•ä»·åŸºæ•°è¾ƒå¤§ï¼Œå¯èƒ½ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ•ˆæœå“¦\n\næ³¸å·è€çª–é”€å”®é¢ä»…åœ¨200-500å’Œ1000å…ƒä»¥ä¸Šä¸‰ä¸ªä»·ä½æ®µé¢†å…ˆå‹å•†ï¼Œåœ¨50-200ä»·ä½ï¼Œé”€å”®é¢è¾ƒå¤§ç¨‹åº¦ä½äºå‹å•†ã€‚\n\né™¤äº†200-500å’Œ1000ä»¥ä¸Šä»·ä½çš„äº§å“ï¼Œæ³¸å·è€çª–å“ç‰Œäº§å“æ”¶åˆ°çš„å¸‚åœºè¯„è®ºä¸åé¦ˆå‡ä½äºå‹å•†ï¼Œå¯è§å‹å•†çš„å®£ä¼ åŠ›åº¦æˆ–äº§å“å£ç¢‘åœ¨å¸‚åœºä¸­å æœ‰è¾ƒé«˜çƒ­åº¦ ã€‚\n\n\nå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå“ç‰Œçš„é”€å”®é¢ä¸»è¦æ¥æºäº§å“ç±»åˆ«æœ‰æ˜æ˜¾å·®å¼‚ã€‚\næ³¸å·è€çª–åœ¨è¡Œä¸šçš„æ°´å¹³å¦‚ä½•\n\næ³¸å·è€çª–ä½äºè¡Œä¸šçš„ä¸Šæ¸¸æ°´å¹³ï¼Œäº§å“è§„æ¨¡å®Œå–„ï¼Œå„ä»·ä½å•†å“æ•°é‡å¸ƒå±€ä½“ç°äº†æ˜ç¡®çš„è¡Œä¸šç›®æ ‡ï¼šè¦åšä¸­é«˜ç«¯é…’ç±»äº§å“çš„ä½¼ä½¼è€…ã€‚ä¸”ä¸æ”¾å¼ƒä½ä»·ä½çš„0-50ç³»åˆ—äº§å“ï¼Œå…¨é¢è¦†ç›–å¸‚åœºï¼Œåœ¨ç»™å®šçš„æ—¶é—´æ•°æ®ä¸­ï¼Œå„åŒºé—´æ®µäº§å“é™¤0-50ä¸3000+ä»¥å¤–ï¼Œå…¶ä»–å•†å“çš„é”€é‡ä¸é”€å”®é¢å‡å‘ˆæŒç»­ç¼“æ…¢ä¸Šå‡è¶‹åŠ¿ã€‚å¯ä»¥çœ‹åˆ°è¯¥ä¼ä¸šå¤„äºä¸€ä¸ªè“¬å‹ƒå‘ä¸Šï¼Œé€æ­¥å†²å‘é«˜ç«¯çš„è¡Œä¸šå‘å±•çŠ¶æ€ã€‚\nå…­ã€åˆ†æç»“è®º1ã€è¿‘æœŸè¡Œä¸šå‘ˆç°è“¬å‹ƒå‘ä¸Šçš„å‘å±•çŠ¶æ€ï¼Œ0-50ä»·ä½äº§å“çš„é”€é‡ä¸è¯„è®ºæ•°å‡ºç°è¾ƒå¤§å¸‚åœºåå·®ï¼Œ100-200ä»·ä½æ®µçš„å•†å“é”€é‡æœ€ç«ï¼Œä½äºå¸‚åœºé”€é‡åŠé”€å”®é¢æ¦œé¦–çš„æ˜¯èŒ…å°å“ç‰Œï¼Œäº”ç²®æ¶²ä»¥å¸‚åœºè·è¯„æ•°æœ€é«˜ä½å±…æ¦œé¦–ã€‚è¡Œä¸šå¹¿å‘Šè¯ä»¥â€˜å¤©çŒ«é…é€â€™ï¼Œâ€˜æ­£å“ä¿è¯â€™ç­‰ä½œä¸ºä¸»è¦æ ‡è¯­ï¼Œä»¥â€˜æ»¡1æˆ–2ä»¶é€ä»»æ„ä¸€ä»¶èµ å“ï¼Œèµ å®Œä¸ºæ­¢â€™ä½œä¸ºä¸»è¦ä¿ƒé”€æ´»åŠ¨ã€‚2ã€è¡Œä¸šæ€»ä½“å‘å±•ååˆ†æˆç†Ÿï¼Œå„å“ç‰Œäº§å“ç«äº‰åŠ›éƒ½ååˆ†æ˜æ˜¾ï¼Œé”€é‡ä¸è¯„è®ºåŸºæœ¬å‘ˆæ­£ç›¸å…³çº¿æ€§å…³ç³»ï¼Œä¸å•ä»·æˆåæ¯”ä¾‹å…³ç³»ï¼Œ100-500åŒºé—´äº§å“é”€é‡ä½œä¸ºå¸‚åœºä¸»æµï¼Œ1000å…ƒä»¥ä¸Šäº§å“å¯èƒ½åœ¨é”€å”®é¢ä¸Šåè¶…å…¶ä»–é«˜é”€é‡äº§å“ï¼ŒåŒåä¸€å¯¹å¸‚åœºçš„åˆºæ¿€åå“æä¸ºå¼ºçƒˆã€‚3ã€æ³¸å·è€çª–ä¸»æ‰“ä¸­é«˜ç«¯é…’ç±»äº§å“ï¼Œå…¨ä»·ä½å“ç±»å¸ƒå±€å…¨é¢ï¼Œç»¼åˆå®åŠ›å¤„äºå…¨è¡Œä¸šä¸Šæ¸¸æ°´å¹³ã€‚é”€é‡å—åŒåä¸€å½±å“æ˜¾è‘—ï¼Œå¯¼è‡´200-500ä¸1000-3000åŒºé—´å•†å“é”€å”®é¢å¤§å¹…å¢é•¿ã€‚è¯¥å“ç‰Œä¸»æ‰“å¹¿å‘Šå…³é”®è¯ï¼š â€˜â€™é™æ—¶ç›´é™â€˜â€™ï¼Œâ€˜ç”„é€‰å¥½è´§â€™ï¼Œâ€˜å‚å®¶ç›´ä¾›â€™ã€‚ä¸»è¦ä¿ƒé”€æ´»åŠ¨ä¸º â€˜â€™é€ä»»æ„ä¸€ä»¶èµ å“ï¼Œèµ å®Œå³æ­¢â€˜â€™ã€‚å…¶æ€»ä½“é”€å”®é¢ä¸»è¦æ¥æºäº100-3000ä»·ä½äº§å“ï¼Œç›¸æ¯”ç‰›æ å±±ä¸ç›¸ä¸Šä¸‹ï¼Œåœ¨ä¸­é«˜ä»·ä½å“ç±»ä¼˜åŠ¿æ˜æ˜¾ï¼Œ0-100ä»·ä½æ®µè¿˜æœ‰è¾ƒå¤§è¿›æ­¥ç©ºé—´ã€‚\nä¸ƒã€pythonä»£ç å¯¼å…¥åŒ…ï¼Œè®¾å®šå­—ä½“å’Œç”»å›¾é£æ ¼import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nfrom wordcloud import WordCloud\nplt.rcParams[&#39;font.sans-serif&#39;] &#x3D; [&#39;SimHei&#39;]#æ˜¾ç¤ºä¸­æ–‡\nplt.style.use(&#39;ggplot&#39;)\nå¯¼å…¥å¹¶æ¸…æ´—æ•°æ®#å¯¼å…¥æ•°æ®\npath &#x3D; &#39;D:&#x2F;python_data_file&#x2F;Alcohol.xlsx&#39;\ndef load_alcohol_data(path):\n    df &#x3D; pd.read_excel(path)\n    df.columns &#x3D; [&#39;id&#39;,&#39;name&#39;,&#39;price&#39;,&#39;sales&#39;,&#39;ad_word&#39;,&#39;buy_act&#39;,&#39;vote_count&#39;,&#39;url&#39;,&#39;date&#39;,&#39;brand&#39;]\n    df &#x3D; df[df.price.notnull()]\n    df[&#39;amount&#39;] &#x3D; df[&#39;sales&#39;]*df[&#39;price&#39;]\n    df[&#39;month&#39;] &#x3D; df.date.values.astype(&#39;datetime64[M]&#39;)#æ—¥æœŸæ—¶é—´åºåˆ—è½¬åŒ–ä¸ºæœˆä»½æ—¶é—´åºåˆ—\n    return df\ndf &#x3D; load_alcohol_data(path)\n#å¯¹é…’ç±»å•ä»·åˆ†å±‚\ndef price_level(data):\n    a&#x3D;[]\n    for i in data.price:\n        if i &lt;50:\n            a.append(&#39;0-50&#39;)\n        elif i &lt;100:\n            a.append(&#39;50-100&#39;)\n        elif i &lt;200:\n            a.append(&#39;100-200&#39;)\n        elif i&lt;500:\n            a.append(&#39;200-500&#39;)\n        elif i &lt;1000:\n            a.append(&#39;500-1000&#39;)\n        elif i&lt;3000:\n            a.append(&#39;1000-3000&#39;)\n        else:\n            a.append(&#39;3000+&#39;)\n    data[&#39;price_level&#39;] &#x3D; a\n    data &#x3D; data.reset_index(drop&#x3D;True)\n    return data\ndf &#x3D; price_level(df)\nrecent_df &#x3D; df[df.date&#x3D;&#x3D;&#39;2018-02-27&#39;]\nrecent_df[[&#39;sales&#39;,&#39;vote_count&#39;,&#39;amount&#39;]].sum()\nrecent_df.describe()\nlzlj_df &#x3D; df[df.brand&#x3D;&#x3D;&#39;æ³¸å·è€çª–&#39;].reset_index(drop&#x3D;True)\nlzlj_df &#x3D; price_level(lzlj_df)\nlzlj_df.describe()\nè¿‘æœŸå„å‚å®¶çš„è¡¨ç°#å„å‚å®¶çš„è¡¨ç°å°±åœ¨è¿™äº†\nall_brand &#x3D; recent_df.groupby(&#39;brand&#39;)[[&#39;sales&#39;,&#39;vote_count&#39;,&#39;amount&#39;]].sum().sort_values(by&#x3D;\n&#39;amount&#39;,ascending &#x3D; True).reset_index()\nall_brand.sales.plot.bar()\nplt.title(&#39;å„å‚å®¶é”€é‡å¯¹æ¯”&#39;)\nall_brand.vote_count.plot.bar()\nplt.title(&#39;å„å‚å®¶è¯„è®ºæ•°&#39;)\nall_brand.amount.plot.bar()\nplt.title(&#39;å„å‚å®¶é”€å”®é¢&#39;)\n\nç”»æŸ±çŠ¶å›¾#xå†™ä¸ªç”»å›¾å‡½æ•°ï¼Œä¸ç„¶å¤ªéº»çƒ¦äº†\ndef pic_barh(data,tit,xbel,ybel):\n    data.sort_values().plot.barh(figsize&#x3D;(12,6))\n    plt.title(tit,fontsize &#x3D; 20)\n    plt.xlabel(xbel,fontsize &#x3D; 20)\n    plt.ylabel(ybel,fontsize &#x3D; 20)\n    plt.show()\npic_barh(level_performance_mean.price,&#39;è¿‘æœŸå¹³å‡ä»·æ ¼è¡¨ç°&#39;,&#39;ä»·æ ¼&#39;,&#39;åŒºé—´&#39;)\npic_barh(level_performance_sum.amount,&#39;è¿‘æœŸé”€å”®é¢è¡¨ç°&#39;,&#39;é‡‘é¢&#39;,&#39;åŒºé—´&#39;)\npic_barh(level_performance_mean.vote_count,&#39;è¿‘æœŸè¯„è®ºè¡¨ç°&#39;,&#39;è¯„è®ºæ•°&#39;,&#39;åŒºé—´&#39;)\npic_barh(level_performance_mean.amount,&#39;è¿‘æœŸå¹³å‡é‡‘é¢è¡¨ç°&#39;,&#39;é‡‘é¢&#39;,&#39;åŒºé—´&#39;)\nè¿‘æœŸå„ä»·ä½æ®µè¡¨ç°level_performance_sum &#x3D; recent_df.groupby(&#39;price_level&#39;)[\n&#39;sales&#39;,&#39;vote_count&#39;,&#39;amount&#39;].sum().sort_values(by&#x3D;&#39;sales&#39;,ascending&#x3D;False)\nlevel_performance_mean &#x3D; recent_df.groupby(&#39;price_level&#39;)[\n&#39;price&#39;,&#39;sales&#39;,&#39;vote_count&#39;,&#39;amount&#39;].mean().sort_values(by&#x3D;&#39;sales&#39;,ascending&#x3D;False)\n#ç»˜åˆ¶åˆ©æ¶¦ä¸è¯„è®ºæ•°æŸ±çŠ¶å›¾\nlevel_performance_sum.loc[:,[&#39;sales&#39;,&#39;vote_count&#39;]].plot.bar(figsize&#x3D;(12,6))\nå¯»æ‰¾ç«äº‰å“ç‰Œ#æƒ³å†™ä¸ªå‡½æ•°æ‰¾å‡ºæ³¸å·è€çª–çš„ä¸Šä¸‹å„ç›¸é‚»ä¸¤ä¸ªçš„å“ç‰Œï¼Œä¹Ÿå°±æ˜¯å®ƒçš„ç«äº‰å“ç‰Œ\ndef lookup_name(data):\n    for i in range(len(data)):\n        if data.loc[i,&#39;brand&#39;] &#x3D;&#x3D;&#39;æ³¸å·è€çª–&#39;:\n            return [data.loc[i-1,&#39;brand&#39;],data.loc[i-2,&#39;brand&#39;],data.loc[i+1,&#39;brand&#39;],data.loc[i+2,&#39;brand&#39;]]\n        else:\n            continue\n#æŒ‰å“ç‰Œåˆ†ç»„æ±‚å‡å€¼ï¼Œå†åˆ†åˆ«æŒ‰ä»·æ ¼ã€é”€é‡å’Œé‡‘é¢æ’åºï¼Œç„¶åæ‰¾å‡ºç«äº‰å“ç‰Œ\ndf_brand_price_mean &#x3D; df.groupby(&#39;brand&#39;,as_index&#x3D;False)[[\n    &#39;price&#39;,&#39;sales&#39;,&#39;amount&#39;]].mean().sort_values(by&#x3D;&#39;price&#39;,ascending&#x3D;True).reset_index(drop&#x3D;True)\nlookup_name(df_brand_price_mean)#[&#39;æ±¾é…’&#39;, &#39;çé…’&#39;, &#39;å‰‘å—æ˜¥&#39;, &#39;ç™½äº‘è¾¹&#39;]\ndf_brand_sales_mean&#x3D;df.groupby(&#39;brand&#39;,as_index&#x3D;False)[[\n    &#39;price&#39;,&#39;sales&#39;,&#39;amount&#39;]].mean().sort_values(by&#x3D;&#39;sales&#39;,ascending&#x3D;True).reset_index(drop&#x3D;True)\ndf_brand_amount_mean&#x3D; df.groupby(&#39;brand&#39;,as_index&#x3D;False)[[\n    &#39;price&#39;,&#39;sales&#39;,&#39;amount&#39;]].mean().sort_values(by&#x3D;&#39;amount&#39;,ascending&#x3D;True).reset_index(drop&#x3D;True)\n#æŒ‰å“ç‰Œåˆ†ç»„æ±‚å’Œï¼Œå†åˆ†åˆ«æŒ‰ä»·æ ¼ã€é”€é‡å’Œé‡‘é¢æ’åºï¼Œç„¶åæ‰¾å‡ºç«äº‰å“ç‰Œ\ndf_brand_amount_sum&#x3D;df.groupby(&#39;brand&#39;,as_index&#x3D;False)[[\n    &#39;sales&#39;,&#39;amount&#39;]].sum().sort_values(by&#x3D;&#39;amount&#39;,ascending &#x3D; True).reset_index(drop&#x3D;True)\ndf_brand_sales_sum&#x3D;df.groupby(&#39;brand&#39;,as_index&#x3D;False)[[\n    &#39;sales&#39;,&#39;amount&#39;]].sum().sort_values(by&#x3D;&#39;sales&#39;,ascending &#x3D; True).reset_index(drop&#x3D;True)\na_sums &#x3D; set(lookup_name(df_brand_amount_sum)+lookup_name(df_brand_sales_sum))\na_means &#x3D; set(lookup_name(df_brand_price_mean)+lookup_name(df_brand_sales_mean)+lookup_name(df_brand_amount_mean))\ns &#x3D; set(list(a_means)+list(a_sums))\n#&#123;&#39;ä¹ é…’&#39;,&#39;äº”ç²®æ¶²&#39;,&#39;å‰‘å—æ˜¥&#39;,&#39;åŠ²é…’&#39;,&#39;å¤äº•è´¡é…’&#39;, &#39;æ°´äº•åŠ&#39;, &#39;æ±Ÿå°ç™½&#39;, &#39;æ±¾é…’&#39;, &#39;æ´‹æ²³&#39;, &#39;ç‰›æ å±±&#39;,&#39;çé…’&#39;,\n# &#39;ç™½äº‘è¾¹&#39;,&#39;çº¢æ˜Ÿ&#39;,&#39;èŒ…å°&#39;&#125; é€‰å–å‰‘å—æ˜¥ å¤äº•è´¡é…’ ç‰›æ å±± äº”ç²®æ¶²ä½œä¸ºæ³¸å·è€çª–çš„ç«äº‰å¯¹æ‰‹\nç”Ÿæˆè¯äº‘å›¾#æå–å¹¿å‘Šè¯å­—ç¬¦ä¸²\ndef ad_words_str(data):\n    ad_words_list &#x3D; []\n    for x in data.ad_word.dropna():\n        ad_words_list.append(x)\n    ad_words_list &#x3D; &#39;&#39;.join(ad_words_list)\n    return ad_words_list\n#æå–ä¿ƒé”€æ´»åŠ¨å­—ç¬¦ä¸²\ndef buy_act_str(data):\n    buy_act_list&#x3D;[]\n    for x in data.buy_act.dropna():\n        buy_act_list.append(x)\n    buy_act_list &#x3D; &#39;&#39;.join(buy_act_list)\n    return buy_act_list\n#ç”Ÿæˆè¯äº‘\ndef pic_words(keywords_list):\n    keywords_list.replace(&#39;\\s&#39;,&#39;&#39;)#å»é™¤å­—ç¬¦ä¸²ä¸­ç©ºå­—ç¬¦ä¸²ï¼ˆ\\sç”¨äºåŒ¹é…ç©ºç™½å­—ç¬¦ï¼Œå¯èƒ½æ˜¯ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€å…¶ä»–ç©ºç™½ï¼‰ï¼‰\n    font &#x3D; &#39;C:\\Windows\\Fonts\\msyh.ttc&#39;\n    wordcloud &#x3D; WordCloud(background_color&#x3D;&#39;white&#39;,max_words&#x3D;3000,scale&#x3D;1.5,font_path&#x3D;font).generate(keywords_list)\n    plt.figure(figsize&#x3D;(14,8))\n    plt.imshow(wordcloud)\n    plt.axis(&#39;off&#39;)\n    plt.show()\nlistb &#x3D; ad_words_str(lzlj_df)+buy_act_str(lzlj_df)\n#è¡Œä¸šå¤§ç›˜æœ€è¿‘ä¸€ä¸ªå‘¨æœŸçš„è¯äº‘\npic_words(ad_words_str(recent_df))\npic_words(buy_act_str(recent_df))\npic_words(ad_words_str(lzlj_df))\npic_words(buy_act_str(lzlj_df))\nç”»èµ°åŠ¿å›¾df.plot.scatter(x&#x3D;&#39;price&#39;,y&#x3D;&#39;sales&#39;)\nplt.title(&#39;é”€é‡ä¸å•ä»·&#39;)\ndf.plot.scatter(x&#x3D;&#39;vote_count&#39;,y&#x3D;&#39;sales&#39;)\nplt.title(&#39;é”€é‡ä¸è¯„è®ºæ•°&#39;)\n#å†™ä¸ªç”»å›¾å‡½æ•°ï¼Œå®ƒä¸é¦™å—\ndef pic_trend(data,val,agg,tit,ylab):\n    a_sum &#x3D; data.pivot_table(\n        index&#x3D;&#39;price_level&#39;,columns&#x3D;&#39;month&#39;,values&#x3D;val,aggfunc&#x3D;agg).fillna(0).T\n    plt.figure(figsize&#x3D;(12,6))\n    a_sum.plot()\n    plt.title(tit,fontsize&#x3D;20)\n    plt.ylabel(ylab,fontsize&#x3D;15)\n    plt.show()\npic_trend(lzlj_df,&#39;sales&#39;,&#39;sum&#39;,&#39;æ³¸å·è€çª–å„åŒºé—´äº§å“é”€é‡èµ°åŠ¿&#39;,&#39;sales&#39;)\npic_trend(lzlj_df,&#39;amount&#39;,&#39;sum&#39;,&#39;æ³¸å·è€çª–é”€å”®é¢èµ°åŠ¿&#39;,&#39;amount&#39;)\npic_trend(lzlj_df,&#39;price&#39;,&#39;mean&#39;,&#39;æ³¸å·è€çª–äº§å“å•ä»·èµ°åŠ¿&#39;,&#39;price&#39;)\npic_trend(lzlj_df,&#39;vote_count&#39;,&#39;sum&#39;,&#39;æ³¸å·è€çª–äº§å“è¯„è®ºèµ°åŠ¿&#39;,&#39;vote_count&#39;)\npic_trend(df,&#39;sales&#39;,&#39;sum&#39;,&#39;æ€»ä½“å„åŒºé—´äº§å“é”€é‡èµ°åŠ¿&#39;,&#39;sales&#39;)\npic_trend(df,&#39;amount&#39;,&#39;sum&#39;,&#39;æ€»ä½“äº§å“é”€å”®é¢èµ°åŠ¿&#39;,&#39;amount&#39;)\npic_trend(df,&#39;price&#39;,&#39;mean&#39;,&#39;æ€»ä½“äº§å“å•ä»·èµ°åŠ¿&#39;,&#39;price&#39;)\npic_trend(df,&#39;vote_count&#39;,&#39;sum&#39;,&#39;æ€»ä½“äº§å“è¯„è®ºèµ°åŠ¿&#39;,&#39;vote_count&#39;)\nå¾—åˆ°å„å“ç‰Œæ•°æ®#å†™ä¸ªå‡½æ•°ç”¨æ¥å¯¹å„å“ç‰Œæ•°æ®æ‹†åˆ†\ndef df_brand(data,brand):\n    data &#x3D; data[data.brand&#x3D;&#x3D;brand].reset_index(drop&#x3D;True)\n    data &#x3D; price_level(data)\n    data[&#39;amount&#39;] &#x3D; data[&#39;sales&#39;]*data[&#39;price&#39;]\n    return data\n# list_brand &#x3D; [&#39;å‰‘å—æ˜¥&#39;,&#39;å¤äº•è´¡é…’&#39;,&#39;ç‰›æ å±±&#39;,&#39;äº”ç²®æ¶²&#39;,&#39;æ³¸å·è€çª–&#39;]\n# for i in list_brand:\n#     df_brand(df,i)\n#å¯¹è¯¥å“ç‰Œçš„å„ä»·ä½æ®µè¿›è¡Œåˆ†ç»„æ±‚å’Œ\ndef df_brand_groupby_sum(data):\n    data &#x3D; data.groupby(&#39;price_level&#39;).sum().loc[:,[&#39;sales&#39;,&#39;vote_count&#39;,&#39;amount&#39;]]\n    return data\n\n# å‰‘å—æ˜¥ å¤äº•è´¡é…’ ç‰›æ å±± äº”ç²®æ¶² #å„ä¸ªä»·æ ¼æ®µçš„é”€é‡ã€è¯„è®ºé‡ã€é”€å”®é¢æ±‡æ€»\nlzlj_sum &#x3D; df_brand_groupby_sum(df_brand(df,&#39;æ³¸å·è€çª–&#39;))\njlc_sum &#x3D; df_brand_groupby_sum(df_brand(df,&#39;å‰‘å—æ˜¥&#39;))\ngjgj_sum &#x3D; df_brand_groupby_sum(df_brand(df,&#39;å¤äº•è´¡é…’&#39;))\nnls_sum &#x3D; df_brand_groupby_sum(df_brand(df,&#39;ç‰›æ å±±&#39;))\nwly_sum &#x3D; df_brand_groupby_sum(df_brand(df,&#39;äº”ç²®æ¶²&#39;))\nç”»é¥¼å›¾def pic_pie(data,gby,tit):\n    price_count &#x3D; data.groupby(gby).count().reset_index(drop&#x3D;False)\n    fig &#x3D; plt.figure(figsize&#x3D;(16,8))\n    plt.pie(price_count.price,labels&#x3D;price_count[gby],autopct&#x3D;&#39;%.1f%%&#39;)\n    plt.title(tit,fontsize &#x3D; 15)\npic_pie(nls_df,&#39;price_level&#39;,&#39;ç‰›æ å±±äº§å“ä»·ä½è§„æ¨¡&#39;)\npic_pie(nls_df,&#39;month&#39;,&#39;ç‰›æ å±±äº§å“æœˆä»½è§„æ¨¡&#39;)\npic_pie(lzlj_df,&#39;price_level&#39;,&#39;æ³¸å·è€çª–äº§å“ä»·ä½è§„æ¨¡&#39;)\npic_pie(lzlj_df,&#39;month&#39;,&#39;æ³¸å·è€çª–äº§å“æœˆä»½è§„æ¨¡&#39;)\n\nfig &#x3D; plt.figure(figsize&#x3D;(16,8))\nplt.pie(lzlj_sum.sales,labels&#x3D;lzlj_sum.index,autopct&#x3D;&#39;%.1f%%&#39;)\nplt.title(&#39;æ³¸å·è€çª–å„ä»·ä½é”€é‡å›¾&#39;,fontsize &#x3D; 15)\nfig &#x3D; plt.figure(figsize&#x3D;(16,8))\nplt.pie(nls_sum.vote_count,labels&#x3D;nls_sum.index,autopct&#x3D;&#39;%.1f%%&#39;)\nplt.title(&#39;ç‰›æ å±±å„ä»·ä½è¯„è®ºæ•°å›¾&#39;,fontsize &#x3D; 15)\n\n#æŒ‰æœˆä»½é”€é‡å˜åŒ–\nlzlj_df.groupby(&#39;month&#39;).sales.sum().plot()\nplt.title(&#39;é”€é‡æŒ‰æœˆä»½å˜åŒ–&#39;)\n#æ€»é”€å”®é¢éšæ—¶é—´å˜åŒ–\nlzlj_df.groupby(&#39;month&#39;).amount.sum().plot()\nplt.title(&#39;æ€»é”€å”®é¢éšæ—¶é—´å˜åŒ–&#39;)\n\ndef pic_bar2(arg):\n    sales_dif &#x3D; nls_sum.sales.reset_index().merge(lzlj_sum[arg].reset_index(),on&#x3D;&#39;price_level&#39;,how&#x3D;&#39;outer&#39;,suffixes&#x3D;[&#39;_nls&#39;,&#39;_lzlj&#39;])\n    sales_dif &#x3D; sales_dif.set_index(&#39;price_level&#39;)\n    plt.figure(figsize&#x3D;(12,10))\n    sales_dif.plot.bar()\n    plt.title(&#39;æ³¸å·è€çª–ä¸ç‰›æ å±±&#39;+str(arg)+&#39;å¯¹æ¯”&#39;)\npic_bar2(&#39;sales&#39;)\npic_bar2(&#39;amount&#39;)\npic_bar2(&#39;vote_count&#39;)\n\npic_barh(df_brand_sum.sales,&#39;å„å“ç‰Œé”€å”®æ€»é‡å¯¹æ¯”&#39;,&#39;é”€é‡&#39;,&#39;å“ç‰Œ&#39;)\npic_barh(df_brand_sum.amount,&#39;å„å“ç‰Œé”€å”®æ€»é‡‘é¢å¯¹æ¯”&#39;,&#39;é‡‘é¢&#39;,&#39;å“ç‰Œ&#39;)\npic_barh(df_brand_sum.vote_count,&#39;å„å“ç‰Œäº§å“è¯„è®ºæ•°å¯¹æ¯”&#39;,&#39;è¯„è®ºæ•°&#39;,&#39;å“ç‰Œ&#39;)\n","slug":"pythoné…’ç±»æ•°æ®åˆ†æ","date":"2020-05-06T12:54:54.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"3e2cb49607eb328dbcf69849d600f074","title":"sqläº’è”ç½‘æ¸¸æˆæ•°æ®åˆ†æ","content":"ä¸€ã€æ•°æ®æ¦‚è§ˆæ•°æ®å…±æœ‰828934æ¡ï¼Œ108åˆ—æ ‡ç­¾\n\næœ¬æ–‡ä¸»è¦å¯¹ä»¥ä¸‹10ä¸ªå­—æ®µè¿›è¡Œåˆ†æ\n\nä½¿ç”¨å·¥å…·ï¼šNavicat Premium ï¼Œjupyter notebookæŠ€èƒ½è¦æ±‚ï¼šSQLæŒæ¡åˆ°å­æŸ¥è¯¢ï¼ŒPythonè¿æ¥æ•°æ®åº“ï¼ˆä¸è¿ä¹Ÿå¯ä»¥ï¼‰\näºŒã€æå‡ºé—®é¢˜ï¼š1ã€æ–°å¢ç©å®¶åˆ†æï¼šä»ç©å®¶æ•°é‡ã€ç©å®¶å æ¯”ã€æ¯æ—¥æ–°å¢ç©å®¶æ•°å±•å¼€åˆ†æ2ã€ç©å®¶æ´»è·ƒåº¦åˆ†æï¼šä»ä¸åŒç”¨æˆ·åœ¨çº¿æ—¶é•¿ã€åˆ†å¸ƒç‰¹å¾å±•å¼€åˆ†æ3ã€ç©å®¶ä»˜è´¹æƒ…å†µåˆ†æï¼šä»PURï¼ˆä»˜è´¹æ¯”ç‡ï¼‰ã€ARPPUï¼ˆæ´»è·ƒä»˜è´¹ç”¨æˆ·å¹³å‡æ¶ˆè´¹é‡‘é¢ï¼‰ç­‰å…³é”®æŒ‡æ ‡å±•å¼€åˆ†æ4ã€ç©å®¶æ¸¸æˆä¹ æƒ¯åˆ†æï¼šä»ä¸åŒç©å®¶ç±»å‹ã€æ¸¸æˆæ¨¡å¼ï¼ˆPVPä¸PVEï¼‰å¾—å‡ºçš„æƒ…å†µæ¥å±•å¼€åˆ†æ\nä¸‰ã€æ–°å¢ç©å®¶åˆ†ææ–°å¢ç©å®¶æ•°é‡ï¼š828934äºº\nSELECT count(DISTINCT user_id) æ–°å¢ç©å®¶æ•°é‡ FROM &#96;tap_fun_test&#96;\næ–°å¢ä»˜è´¹ç©å®¶æ•°é‡ï¼š19549\nselect count(DISTINCT(user_id))  æ–°å¢ä»˜è´¹ç©å®¶æ•°é‡ from tap_fun_test where pay_price &gt;0;\nä»˜è´¹ç©å®¶å æ¯”:0.0236\nselect æ–°å¢ä»˜è´¹ç©å®¶&#x2F;æ–°å¢ç©å®¶æ•° as ä»˜è´¹ç©å®¶å æ¯” from \n(SELECT count(distinct user_id) æ–°å¢ç©å®¶æ•° from tap_fun_test) as t1 ,\n(SELECT count(DISTINCT user_id)  æ–°å¢ä»˜è´¹ç©å®¶ from tap_fun_test where pay_price&gt;0) as t2 ;\næ¯æ—¥æ–°å¢ç”¨æˆ·æ•°é‡\nselect date(register_time) æ—¥æœŸ,count(DISTINCT(user_id)) from tap_fun_test GROUP BY æ—¥æœŸ;\n\næ¯æ—¥æ–°å¢ä»˜è´¹ç”¨æˆ·æ•°\nselect date(register_time) æ—¥æœŸ,count(DISTINCT(user_id)) from tap_fun_test where pay_price&gt;0 GROUP BY æ—¥æœŸ;\n\n\næ¯æ—¥æ–°å¢ç©å®¶åœ¨3æœˆ10æ—¥æœ‰ä¸€æ¬¡å¤§é«˜å³°å¢é•¿ï¼Œå¯èƒ½ä¸¾åŠæ´»åŠ¨ï¼Œä½†æ´»åŠ¨ä¸€è¿‡åç»­æ–°å¢ç©å®¶æ•°å¹¶æ²¡æœ‰æ˜¾è‘—æå‡ï¼Œå¯è§æ´»åŠ¨æ²¡æœ‰æ¸¸æˆçš„äººæ°”å¸¦æ¥å®è´¨æ€§çš„å¸®åŠ©ã€‚æ´»åŠ¨éœ€è¦åŠ›åº¦åŠ å¼ºå¹¶ä¿æŒä¸€å®šæ—¶é—´ç»´åº¦ï¼Œç»™ç©å®¶å……åˆ†æ—¶é—´äº†è§£æ¸¸æˆï¼Œæ‰èƒ½æé«˜ç§€é€¸çƒ­åº¦ã€‚\nå…¨éƒ¨ç©å®¶å¹³å‡åœ¨çº¿æ—¶é•¿:11.741103057664969\nSELECT avg(avg_online_minutes)  as å…¨éƒ¨ç©å®¶å¹³å‡åœ¨çº¿æ—¶é•¿ from tap_fun_test;\nä»˜è´¹ç©å®¶å¹³å‡åœ¨çº¿æ—¶é•¿:135.8732415946089\nselect avg(avg_online_minutes) from tap_fun_test where pay_price&gt;0;\nå››ã€ç©å®¶æ´»è·ƒåº¦åˆ†æå¹³å‡åœ¨çº¿æ—¶é•¿çš„åˆ†å¸ƒç‰¹ç‚¹###å…¨éƒ¨ç©å®¶äººæ•°çš„ä¸­ä½æ•°ã€ä¸Šä¸‹å››åˆ†ä½æ•°\nselect round(count(distinct user_id)&#x2F;4) as ä¸‹å››åˆ†ä½æ•°,\nround(count(distinct user_id)&#x2F;2) as ä¸­ä½æ•°,\nround(count(distinct user_id)&#x2F;4*3) as ä¸Šå››åˆ†ä½æ•°\nfrom tap_fun_test;\nä¸‹å››åˆ†ä½æ•°ï¼š207234    ä¸­ä½æ•°ï¼š414467    ä¸Šå››åˆ†ä½æ•°ï¼š621701å…¨éƒ¨ç©å®¶åœ¨çº¿æ—¶é•¿ç®±çº¿å›¾å…³é”®å€¼SELECT min(avg_online_minutes) æœ€å°å€¼,\n(select avg_online_minutes from tap_fun_test ORDER BY avg_online_minutes LIMIT 207233,1) as ä¸‹å››åˆ†ä½æ•°,\n(select avg_online_minutes from tap_fun_test ORDER BY avg_online_minutes LIMIT 414466,1) as ä¸­ä½æ•°,\n(select avg_online_minutes from tap_fun_test ORDER BY avg_online_minutes LIMIT 621700,1) as ä¸Šå››åˆ†ä½æ•°,\nmax( avg_online_minutes) æœ€å¤§å€¼\nFROM &#96;tap_fun_test&#96;\t\næœ€å°å€¼0.0,ä¸‹å››åˆ†ä½æ•°:0.5,ä¸­ä½æ•°:1.666667ï¼Œä¸Šå››åˆ†ä½æ•°ï¼š5ï¼Œæœ€å¤§å€¼ï¼š1605.833333ä»˜è´¹ç©å®¶çš„äººæ•°æœ€å¤§å€¼æœ€å°å€¼ã€ä¸­ä½æ•°ã€ä¸Šä¸‹å››åˆ†ä½æ•°select round(count(distinct user_id)&#x2F;4) as ä¸‹å››åˆ†ä½æ•°,\nround(count(distinct user_id)&#x2F;2) as ä¸­ä½æ•°,\nround(count(distinct user_id)&#x2F;4*3) as ä¸Šå››åˆ†ä½æ•°\nfrom tap_fun_test \nWHERE pay_price&gt;0;\nä¸‹å››åˆ†ä½æ•°ï¼š4887ï¼Œ    ä¸­ä½æ•°ï¼š9775    ä¸Šå››åˆ†ä½æ•°ï¼š14662ä»˜è´¹ç©å®¶åœ¨çº¿æ—¶é•¿ç®±çº¿å›¾å…³é”®å€¼SELECT min(avg_online_minutes) æœ€å°å€¼,\n(select avg_online_minutes from tap_fun_test where pay_price&gt;0 ORDER BY avg_online_minutes LIMIT 4886,1) as ä¸‹å››åˆ†ä½æ•°,\n(select avg_online_minutes from tap_fun_test where pay_price&gt;0 ORDER BY avg_online_minutes LIMIT 9774,1) as ä¸­ä½æ•°,\n(select avg_online_minutes from tap_fun_test where pay_price&gt;0 ORDER BY avg_online_minutes LIMIT 14661,1) as ä¸Šå››åˆ†ä½æ•°,\nmax( avg_online_minutes) æœ€å¤§å€¼\nFROM &#96;tap_fun_test&#96; \nwhere pay_price&gt;0;\næœ€å°å€¼ï¼š0.3333 ,ä¸‹å››åˆ†ä½æ•°:30.6667,ä¸­ä½æ•°:84.5ï¼Œä¸Šå››åˆ†ä½æ•°ï¼š191.1667ï¼Œæœ€å¤§å€¼ï¼š1081.5\nå…¨éƒ¨ç©å®¶çš„åœ¨çº¿æ—¶é•¿ç®±çº¿å›¾ä¸­å‘ä¸‹å‹ç¼©çš„å¾ˆå‰å®³ï¼Œå…¨éƒ¨ç©å®¶ä¸Šå››åˆ†ä½æ•°ä¸º5ï¼Œè¯´æ˜75%çš„ç©å®¶å¹³å‡åœ¨çº¿åªæœ‰å¤§çº¦5åˆ†é’Ÿï¼Œå¯èƒ½ä¸€å±€æ¸¸æˆéƒ½æ²¡æœ‰ç©å®Œï¼Œå¯è§ç©å®¶æµå¤±æƒ…å†µæ¯”è¾ƒä¸¥é‡ã€‚ä»˜è´¹ç”¨æˆ·çš„ç®±å‹å›¾ä¸­ä¸‹å››åˆ†ä½æ•°ä¸º30ï¼Œä¸­ä½æ•°84ï¼Œä¸Šå››åˆ†ä½æ•°ä¸º191ï¼Œè¯´æ˜ä»˜è´¹ç”¨æˆ·ä¸­75%ä»¥ä¸Šçš„ç”¨æˆ·åœ¨çº¿æ—¶é•¿éƒ½è¶…è¿‡äº†30åˆ†é’Ÿã€‚\näº”ã€ç©å®¶ä»˜è´¹æƒ…å†µåˆ†æå…³é”®æŒ‡æ ‡AUï¼ˆactive usersï¼‰æ´»è·ƒç”¨æˆ·ï¼šæ¸¸æˆæ—¶é•¿è¶…è¿‡15åˆ†é’Ÿ PUï¼ˆPaying usersï¼‰ä»˜è´¹ç”¨æˆ·APAï¼ˆActive Paying Accountï¼‰:æ´»è·ƒä»˜è´¹ç”¨æˆ·æ•°ARPUï¼šå¹³å‡æ¯ä¸ªæ´»è·ƒç”¨æˆ·çš„æ”¶å…¥ï¼Œæ€»æ”¶å…¥/AU ARPPUï¼šå¹³å‡æ´»è·ƒä»˜è´¹ç”¨æˆ·æ”¶å…¥,æ€»æ”¶å…¥/APU PUR(ä»˜è´¹æ¯”ç‡)ï¼šAPA/AU\næ¯ä¸ªæ´»è·ƒç©å®¶çš„æ”¶å…¥select count(DISTINCT user_id) as AU,\n(select sum(pay_price) from tap_fun_test as æ€»æ”¶å…¥),\n(select sum(pay_price) from tap_fun_test) &#x2F;count(DISTINCT user_id) as æ¯ä¸ªæ´»è·ƒç©å®¶æ”¶å…¥ \nfrom tap_fun_test \nwhere avg_online_minutes &gt; 15;\n#and pay_price&gt;0;æ¯ä¸ªæ´»è·ƒä»˜è´¹ç©å®¶çš„æ”¶å…¥\nAUï¼š99846ï¼Œæ€»æ”¶å…¥ï¼š556900.04ï¼Œæ¯ä¸ªæ´»è·ƒç©å®¶æ”¶å…¥ARPUï¼š5.57758989æ¯ä¸ªæ´»è·ƒä»˜è´¹ç©å®¶çš„æ”¶å…¥APAï¼š16982ï¼Œæ€»æ”¶å…¥ï¼š556900.04ï¼Œæ¯ä¸ªæ´»è·ƒä»˜è´¹ç©å®¶æ”¶å…¥ARPPUï¼š32.79354846\nä»˜è´¹æ¯”ç‡select count(DISTINCT user_id) as APA ,\n(SELECT count(DISTINCT user_id) from tap_fun_test WHERE avg_online_minutes&gt;&#x3D;15) as AU ,\ncount(DISTINCT user_id)&#x2F;(select count(DISTINCT user_id) from tap_fun_test \nwhere avg_online_minutes&gt;&#x3D;15) as PUR\nfrom tap_fun_test \nwhere avg_online_minutes&gt;&#x3D;15 and pay_price &gt;0;\nAPAï¼š17005ï¼›AUï¼š100649ï¼›æ´»è·ƒç©å®¶çš„ä»˜è´¹ç‡PURï¼š0.169ï¼Œå…¨éƒ¨ç©å®¶çš„ä»˜è´¹æ¯”ç‡ï¼š0.021\nè¯¥æ¸¸æˆçš„PURï¼ˆäººå‡ä»˜è´¹ç‡ï¼‰ä¸º0.169è¾ƒä½ï¼Œä¸”ARPUï¼ˆæ´»è·ƒç©å®¶å¹³å‡æ¶ˆè´¹é¢ï¼‰ä¸º5.58ï¼Œè¯´æ˜æ”¶å…¥è¡¨ç°å·®ï¼›ç›¸å¯¹äºARPPUï¼Œæ´»è·ƒä»˜è´¹ç”¨æˆ·æ¶ˆè´¹å¾ˆé«˜ï¼Œæ˜¯ARPUçš„6å€å·¦å³ï¼Œé’ˆå¯¹è¿™ç‚¹æˆ‘ä»¬å¯ä»¥åšé¦–æ¬¡æ¶ˆè´¹é—¨æ§›å’Œä¸“å±å¤§Vç©å®¶çš„ç¦åˆ©ä¸æ´»åŠ¨è¿›è¡Œè°ƒæ•´ä¸ä¼˜åŒ–ã€‚\nå…­ã€ç©å®¶æ¸¸æˆä¹ æƒ¯åˆ†æselect AVG(pvp_battle_count) as å¹³å‡PVPæ¬¡æ•° ,\nsum(pvp_lanch_count)&#x2F;sum(pvp_battle_count) as ä¸»åŠ¨å‘èµ·PVPæ¦‚ç‡,\nsum(pvp_win_count)&#x2F;sum(pvp_battle_count) as PVPè·èƒœæ¦‚ç‡\nfrom tap_fun_test\nwhere avg_online_minutes&gt;&#x3D;15;\nPVPæ´»è·ƒç©å®¶\nå¹³å‡PVPæ¬¡æ•°ï¼š15.164651412333953ï¼›ä¸»åŠ¨å‘èµ·PVPæ¦‚ç‡ï¼š0.5688357584679884ï¼›PVPè·èƒœæ¦‚ç‡ï¼š0.532222547626395\nPVPæ´»è·ƒä»˜è´¹ç©å®¶(åŠ ä¸€ä¸ªpay_price&gt;0)\nå¹³å‡PVPæ¬¡æ•°ï¼š27.301911202587473ï¼›ä¸»åŠ¨å‘èµ·PVPæ¦‚ç‡ï¼š0.6553937480210826ï¼›PVPè·èƒœæ¦‚ç‡ï¼š0.6872459716242092\n\nPVEæ´»è·ƒç©å®¶å¹³å‡PVEæ¬¡æ•°ï¼š28ï¼›ä¸»åŠ¨å‘èµ·PVEæ¦‚ç‡ï¼š0.9967ï¼›PVEè·èƒœæ¦‚ç‡ï¼š0.9041PVEæ´»è·ƒä»˜è´¹ç©å®¶å¹³å‡PVEæ¬¡æ•°ï¼š52ï¼›ä¸»åŠ¨å‘èµ·PVEæ¦‚ç‡ï¼š0.9957ï¼›PVEè·èƒœæ¦‚ç‡ï¼š0.9110\n\n\n\nAPAï¼ˆä»˜è´¹æ´»è·ƒç”¨æˆ·ï¼‰ç©å®¶çš„å¹³å‡PVEå’ŒPVPæ¬¡æ•°éƒ½æ˜¯AUï¼ˆæ´»è·ƒï¼‰ç©å®¶æ¬¡æ•°çš„ä¸¤å€å·¦å³ï¼Œæ˜¾ç„¶APAç©å®¶æ˜¯é‡è¦çš„å‘å±•å¯¹è±¡ã€‚PVPæ´»åŠ¨ä¸­ï¼ŒAPAç©å®¶ä¸»åŠ¨å‘èµ·å’Œèƒœåˆ©çš„æ¦‚ç‡éƒ½æ˜æ˜¾é«˜äºAUç©å®¶ã€‚PVEæ´»åŠ¨ä¸­ï¼ŒAPAç©å®¶ä¸»åŠ¨å‘èµ·å’Œèƒœåˆ©çš„æ¦‚ç‡ä¸AUç©å®¶éƒ½åŸºæœ¬æŒå¹³ï¼Œå…¶ä¸­ä¸»åŠ¨å‘èµ·PVEçš„æ¦‚ç‡éå¸¸é«˜ï¼Œä¸”äºŒè€…çš„PVEèƒœç‡é«˜è¾¾90%ï¼Œæ¸¸æˆä½“éªŒè¾ƒå¥½ã€‚\n","slug":"sqläº’è”ç½‘æ¸¸æˆæ•°æ®åˆ†æ","date":"2020-04-19T17:45:16.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"defb5a725379b00e673d55a61c52ceb3","title":"pythonç”µå½±æ•°æ®åˆ†æ","content":"\nä¸€ã€æ•°æ®æ¦‚è¿°idï¼šæ ‡è¯†å·imdb_idï¼šIMDB æ ‡è¯†å·popularityï¼šåœ¨ Movie Database ä¸Šçš„ç›¸å¯¹é¡µé¢æŸ¥çœ‹æ¬¡æ•°budgetï¼šé¢„ç®—ï¼ˆç¾å…ƒï¼‰revenueï¼šæ”¶å…¥ï¼ˆç¾å…ƒï¼‰original_titleï¼šç”µå½±åç§°castï¼šæ¼”å‘˜åˆ—è¡¨ï¼ŒæŒ‰ | åˆ†éš”ï¼Œæœ€å¤š 5 åæ¼”å‘˜homepageï¼šç”µå½±é¦–é¡µçš„ URLdirectorï¼šå¯¼æ¼”åˆ—è¡¨ï¼ŒæŒ‰ | åˆ†éš”ï¼Œæœ€å¤š 5 åå¯¼æ¼”taglineï¼šç”µå½±çš„æ ‡è¯­keywordsï¼šä¸ç”µå½±ç›¸å…³çš„å…³é”®å­—ï¼ŒæŒ‰ | åˆ†éš”ï¼Œæœ€å¤š 5 ä¸ªå…³é”®å­—overviewï¼šå‰§æƒ…æ‘˜è¦runtimeï¼šç”µå½±æ—¶é•¿genresï¼šé£æ ¼åˆ—è¡¨ï¼ŒæŒ‰ | åˆ†éš”ï¼Œæœ€å¤š 5 ç§é£æ ¼production_companiesï¼šåˆ¶ä½œå…¬å¸åˆ—è¡¨ï¼ŒæŒ‰ | åˆ†éš”ï¼Œæœ€å¤š 5 å®¶å…¬å¸release_dateï¼šé¦–æ¬¡ä¸Šæ˜ æ—¥æœŸvote_countï¼šè¯„åˆ†æ¬¡æ•°vote_averageï¼šå¹³å‡è¯„åˆ†based on novel æ˜¯å¦ç”±å°è¯´æ”¹ç¼–\näºŒã€æå‡ºé—®é¢˜æ¯å¹´ä¸Šæ˜ ç”µå½±æ•°é‡ã€ç”µå½±æ€»ç¥¨æˆ¿è¡¨ç°ï¼Ÿç”µå½±ç¥¨æˆ¿ä¸å“ªäº›å› ç´ æœ€ç›¸å…³ï¼Ÿå„ç±»å‹ç”µå½±è¡¨ç°ï¼Ÿå„ç”µå½±ç±»å‹ä¹‹é—´çš„å…³è”æ€§åŸåˆ›ç”µå½±ä¸æ”¹ç¼–ç”µå½±æœ‰ä½•å·®å¼‚ï¼Ÿå—ä¼—å–œå¥½ä¸é‚£äº›å› ç´ æœ‰å…³ï¼Ÿç”µå½±æ—¶é•¿ä¸ºå¤šå°‘æœ€åˆé€‚ï¼ŸUniversal Picturesä¸Paramount Picturesä¸¤å®¶è¡Œä¸šå·¨å¤´çš„ä¸šç»©å¦‚ä½•ï¼Ÿ\nä¸‰ã€æ¯å¹´ä¸Šæ˜ ç”µå½±æ•°é‡ã€ç”µå½±æ€»ç¥¨æˆ¿æ˜¯å¤šå°‘ï¼Ÿ\n\n\nç”µå½±å·¥ä¸šåœ¨æœ€è¿‘ä¸‰åå‡ å¹´å‘ˆç°ç¨³æ­¥å¼å¢é•¿ï¼Œ2014å¹´æ•°é‡æœ€å¤šã€‚è™½ç„¶ç”µå½±æ•°é‡æœ€è¿‘äºŒåå¹´å†…æœ‰3æ¬¡è¾ƒå¤§çš„æ³¢åŠ¨ï¼Œä½†ç”µå½±æ€»ç¥¨æˆ¿ä»ç„¶ä¿æŒåœ¨è¾ƒé«˜çš„æ°´å‡†ï¼Œè¯´æ˜ç”µå½±å¸‚åœºå·²ç»æˆç†Ÿï¼Œæœ‰å›ºå®šçš„æ¶ˆè´¹äººç¾¤ï¼Œå¯è§æŠ•èµ„ç”µå½±ä»ç„¶æ˜¯å¾ˆå¥½çš„æŠ•èµ„æ–¹å¼ã€‚\nå››ã€ç”µå½±ç¥¨æˆ¿ä¸å“ªäº›å› ç´ æœ€ç›¸å…³ï¼Ÿ\nç”±ä»¥ä¸Šå¯çŸ¥ï¼Œç”µå½±ç¥¨æˆ¿ä¸ç”µå½±é¢„ç®—ï¼ˆ0.73ï¼‰ï¼Œå—æ¬¢è¿åº¦ï¼ˆ0.66ï¼‰ï¼Œè¯„ä»·æ¬¡æ•°ï¼ˆ0.78ï¼‰å­˜åœ¨å¼ºç›¸å…³ã€‚ ç»˜åˆ¶ç”µå½±ç¥¨æˆ¿ä¸å—æ¬¢è¿åº¦ï¼Œè¯„ä»·æ¬¡æ•°ï¼Œç”µå½±é¢„ç®—çš„ç›¸å…³æ€§æ•£ç‚¹å›¾åŠå…¶çº¿æ€§å›å½’çº¿ã€‚\n\nå¦‚å›¾ï¼Œç”µå½±é¢„ç®—ã€è¯„åˆ†åŸºæœ¬ä¸ç”µå½±ç¥¨æˆ¿å‘ˆæ­£çº¿æ€§ç›¸å…³çš„å…³ç³»ï¼Œè¿™ä¹Ÿç¬¦åˆæ­£å¸¸ç»æµè§„å¾‹ã€‚\näº”ã€å„ç±»å‹ç”µå½±è¡¨ç°ï¼Ÿ\nçº¦ä»1992å¼€å§‹ï¼Œç”µå½±å¸‚åœºå¼€å§‹çˆ†å‘å¼å¢é•¿ï¼Œå…¶ä¸­æˆå‰§ç±»ï¼ˆDramaï¼‰å’Œå–œå‰§ç±»ï¼ˆComedyï¼‰è¿™ä¸¤ä¸ªç±»å‹æ˜¯éšæ—¶é—´å¢é•¿å¹…åº¦æœ€å¤§çš„ï¼Œç°åœ¨ä¹Ÿæ¯”è¾ƒçƒ­é—¨ã€‚\n\nå¦‚ä¸Šå›¾ï¼Œå¯è§æŠ•èµ„ä¸€éƒ¨ç”µå½±çš„è¯ï¼Œä¸Šå›¾ä¸­çš„ç±»å‹æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œå°¤ä»¥comedyå’Œdramaæœ€ä½³ã€‚é‚£ä¸åŒç±»å‹ç”µå½±çš„ç›ˆåˆ©èƒ½åŠ›å¦‚ä½•å‘¢ï¼Ÿ\n\nç”µå½±å…³é”®è¯ä¸»è¦ä»¥based on novelï¼ˆåŸºäºå°è¯´ï¼‰ã€womenï¼ˆå¥³æ€§ï¼‰ã€independent filmï¼ˆç‹¬ç«‹ç”µå½±ï¼‰ã€murderï¼ˆè°‹æ€ï¼‰ä¸ºä¸»\n\nç”±å›¾å¯çŸ¥ï¼Œå¹³å‡æ”¶ç›Šå‰3çš„ç”µå½±ç±»å‹ä¸ºï¼šå†’é™©ç±»ï¼ˆAdventureï¼‰ã€ç§‘å¹»ç±»ï¼ˆFantasyï¼‰ã€åŠ¨ç”»ç±»ï¼ˆAnimationï¼‰ï¼Œè€Œå¤–å›½ç”µå½±ç±»ï¼ˆForeignï¼‰å’Œç”µè§†ç”µå½±ç±»ï¼ˆTV Movieï¼‰æœ‰äºæŸçš„é£é™©ã€‚\nå…­ã€å„ç”µå½±ç±»å‹ä¹‹é—´å…³è”æ€§\n(Animation)ä¸(Family)ã€(Adventure, Thriller)ä¸(Action)ã€(Fantasy) ä¸(Family)ã€(Thriller, Drama)ä¸(Crime) åœ¨æ”¯æŒåº¦é˜ˆå€¼2.5%ï¼Œæå‡åº¦ä¸º3 çš„æƒ…å†µä¸‹ï¼Œè¡¨ç°å‡ºè¾ƒå¼ºçš„å…³è”æ€§ï¼Œä¹Ÿç¬¦åˆäººä»¬çš„ç”Ÿæ´»å¸¸è¯†\nä¸ƒã€åŸåˆ›ç”µå½±ä¸æ”¹ç¼–ç”µå½±æœ‰ä½•å·®å¼‚ï¼Ÿ\nå¯è§ï¼Œç»å¤§éƒ¨åˆ†ç”µå½±è¿˜æ˜¯åŸåˆ›ä¸ºä¸»ã€‚\n\nåŸåˆ›ç”µå½±çš„åˆ©æ¶¦ä¸æ”¹ç¼–ç”µå½±ç›¸å·®ä¸€å€å¤šã€‚\nå…«ã€å—ä¼—å–œå¥½ä¸é‚£äº›å› ç´ æœ‰å…³ï¼Ÿç”µå½±æ—¶é•¿ä¸ºå¤šå°‘æœ€åˆé€‚ï¼Ÿ\nå—ä¼—æ¬¢è¿åº¦è¾ƒé«˜çš„ç”µå½±ç±»å‹ä¸ºAdventureï¼ŒScience Fiction ï¼ŒFantasyã€‚\n\nå—ä¼—æ¬¢è¿åº¦è¾ƒé«˜çš„ç”µå½±çš„æ—¶é•¿åŸºæœ¬åœ¨90-200åˆ†é’Ÿä¹‹é—´ã€‚\n\nå—æ¬¢è¿åº¦é«˜çš„ç”µå½±ï¼Œè¯„åˆ†è‚¯å®šé«˜ã€‚åä¹‹è¯„åˆ†é«˜çš„ç”µå½±ï¼Œå—æ¬¢è¿åº¦å¯èƒ½ä½ï¼Œè¿™å°±æ˜¯å†·é—¨å¥½ç‰‡çš„å¤©åœ°ã€‚\nä¹ã€Universal Picturesä¸Paramount Picturesä¸¤å®¶è¡Œä¸šå·¨å¤´çš„ä¸šç»©å¦‚ä½•ï¼Ÿ\n\nä¸¤å®¶å…¬å¸åˆ¶ä½œçš„ä¸»è¦ç”µå½±ç±»å‹å‡ ä¹ä¸€è‡´ï¼Œæˆå‰§ç±»ï¼ˆDramaï¼‰ã€å–œå‰§ç±»ï¼ˆComedyï¼‰ã€æƒŠæ‚šç±»ï¼ˆThrillerï¼‰ã€åŠ¨ä½œç±»ï¼ˆActionï¼‰å æ®äº†ä¸¤å®¶å…¬å¸åˆ¶ä½œæ€»é‡çš„60%å·¦å³ï¼Œè¿™ä¸æ€»çš„å„ç±»å‹ç”µå½±æ•°é‡åˆ†å¸ƒä¹Ÿæ˜¯ç›¸ä¼¼çš„ï¼Œå¯ä¾›å…¶ä»–å…¬å¸å‚è€ƒå…¶å¸ƒå±€ç­–ç•¥ã€‚\nåã€ç»“è®ºç›®å‰ç”µå½±å¸‚åœºæˆç†Ÿï¼Œäº§é‡å’Œç¥¨æˆ¿éƒ½å¤„äºè¾ƒé«˜çš„æ°´å¹³ï¼›ç”µå½±çš„é¢„ç®—ã€è¯„ä»·ä¼šç›´æ¥å½±å“ç”µå½±ç¥¨æˆ¿ï¼Œæ•…ä¸€å®šçš„ç”µå½±é¢„ç®—æ˜¯ç”µå½±ç¥¨æˆ¿æˆåŠŸçš„åŸºç¡€ï¼›(Animation)ä¸(Family)ã€(Adventure, Thriller)ä¸(Action)ã€(Fantasy) ä¸(Family)ã€(Thriller, Drama)ä¸(Crime) åœ¨ç»™å®šé˜ˆå€¼ä¸‹æœ‰è¾ƒå¼ºçš„å…³è”æ€§ã€‚æœ€å—æ¬¢è¿çš„ç”µå½±ç±»å‹æ˜¯comedyå’Œdramaï¼ŒæŠ•èµ„è¿™ä¸¤ä¸ªç±»å‹çš„ç”µå½±æ˜¯ä¸é”™çš„é€‰æ‹©ï¼›(Universal Pictures)çš„ç”µå½±æ•°é‡å¤šäº(Paramount Pictures)ï¼Œä¸¤è€…ç¥¨æˆ¿è¡¨ç°ä¸ç›¸ä¸Šä¸‹ã€‚åŸåˆ›ç”µå½±åœ¨ç”µå½±å·¥ä¸šä¸­å ç»å¯¹ä¸»å¯¼åœ°ä½ï¼Œå› æ­¤åº”é‡è§†ç¼–å‰§å’Œå‰§æœ¬çš„é€‰æ‹©ï¼›ç”µå½±æ—¶é•¿åº”æ§åˆ¶åœ¨90ï½200åˆ†é’Ÿï¼Œæœ€ç¬¦åˆè§‚ä¼—çš„è§‚å½±ä¹ æƒ¯ï¼Œä¹Ÿæœ€æ˜“è·å¾—æˆåŠŸã€‚\nåä¸€ã€Pythonä»£ç å¯¼å…¥åŒ…import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n%matplotlib inline\nimport seaborn as sns\nfrom wordcloud import WordCloud\nfrom mlxtend.frequent_patterns import apriori\nfrom mlxtend.frequent_patterns import association_rules\nplt.rcParams[&#39;font.sans-serif&#39;] &#x3D; [&#39;SimHei&#39;]#æ˜¾ç¤ºä¸­æ–‡\nplt.style.use(&#39;ggplot&#39;)\nä½¿ç”¨aprioriç®—æ³•è¿›è¡Œå…³è”è§„åˆ™æŒ–æ˜path &#x3D; &#39;D:&#x2F;python_data_file&#x2F;based_on_novel.csv&#39;\ndata &#x3D; pd.read_csv(path)\n\nmovie_genres &#x3D; pd.DataFrame(data,columns&#x3D;[&#39;original_title&#39;,&#39;genres&#39;])\nmovies_ohe &#x3D; movie_genres.drop(&#39;genres&#39;,1).join(movie_genres.genres.str.get_dummies())\n# print(movies_ohe.shape)#(10866, 21)\nmovies_ohe.set_index([&#39;original_title&#39;],inplace&#x3D;True)\n\nfrequent_itemsets_movies &#x3D; apriori(movies_ohe,use_colnames&#x3D;True, min_support&#x3D;0.025)\nresult &#x3D; [i for i in frequent_itemsets_movies.itemsets if len(i)&gt;1]\n# len(result)#37\nrules_movies &#x3D;  association_rules(frequent_itemsets_movies, metric&#x3D;&#39;lift&#39;, min_threshold&#x3D;1.25)\n# print(rules_movies)\nrules_movies[(rules_movies.lift&gt;3)].sort_values(by&#x3D;[&#39;lift&#39;], ascending&#x3D;False)\nå¤„ç†æ•°æ®xdata &#x3D; data[[&#39;id&#39;,&#39;popularity&#39;,&#39;production_companies&#39;,\n              &#39;budget&#39;,&#39;revenue&#39;,&#39;original_title&#39;,&#39;runtime&#39;,&#39;release_date&#39;,&#39;genres&#39;,&#39;vote_count&#39;,&#39;vote_average&#39;,&#39;based on novel&#39;]]\n#è¦æ±‚åˆ¶é€ å•†å’Œç”µå½±ç±»å‹ä¸èƒ½ä¸ºç©º\nclean_xdata &#x3D; xdata[xdata.production_companies.notnull()&amp;xdata.genres.notnull()].reset_index(drop&#x3D;True)\n# æ¯å¹´æ€»ç¥¨æˆ¿\nclean_xdata[&#39;year&#39;] &#x3D; pd.to_datetime(clean_xdata.release_date,format&#x3D;&#39;%Y-%m-%d&#39;).dt.year\nyear_revenue &#x3D; clean_xdata.groupby(&#39;year&#39;)[&#39;revenue&#39;].sum()\ndef pic_trend(data,tit,xlab,ylab):\n    plt.figure(figsize&#x3D;(12,6))\n    data.plot()\n    plt.title(tit,fontsize &#x3D; 20)\n    plt.xlabel(xlab,fontsize&#x3D;15)\n    plt.ylabel(ylab,fontsize&#x3D;15)\n    plt.show()\npic_trend(year_revenue,&#39;æ¯å¹´æ€»ç¥¨æˆ¿ç»Ÿè®¡&#39;,&#39;å¹´ä»½&#39;,&#39;æ€»ç¥¨æˆ¿&#39;)\n#æ¯å¹´ä¸Šæ˜ ç”µå½±æ•°é‡ç»Ÿè®¡\nyear_count &#x3D; clean_xdata.groupby(&#39;year&#39;).id.count()\npic_trend(year_count,&#39;æ¯å¹´ä¸Šæ˜ ç”µå½±æ•°é‡ç»Ÿè®¡&#39;,&#39;å¹´ä»½&#39;,&#39;ä¸Šæ˜ ç”µå½±æ•°é‡&#39;)\n#æ¯å¹´ä¸Šæ˜ ç”µå½±æ•°é‡é¥¼å›¾\ndef pic_pie(data,val,gby,tit):\n    data &#x3D; data.reset_index(drop&#x3D;False)\n    fig &#x3D; plt.figure(figsize&#x3D;(16,8))\n    plt.pie(data[val],labels&#x3D;data[gby],autopct&#x3D;&#39;%.1f%%&#39;)\n    plt.title(tit,fontsize &#x3D; 15)\npic_pie(year_count,&#39;id&#39;,&#39;year&#39;,&#39;æ¯å¹´ä¸Šæ˜ ç”µå½±æ•°é‡&#39;)\nç”»èµ°åŠ¿å›¾# éšæ—¶é—´æ¨ç§»å¦‚ä½•å‘ç”Ÿå˜åŒ–çš„\ngenre_df &#x3D; clean_xdata.genres.str.get_dummies()#æ„å»ºè™šæ‹Ÿå˜é‡ï¼Œç›¸å½“äºæŠŠå„ç”µå½±ç±»å‹ä½œä¸ºåˆ—åå±•å¼€ä¸ºä¸€ä¸ªç¨€ç–çŸ©é˜µ\ngenre_df[&#39;release_date&#39;] &#x3D; clean_xdata[&#39;year&#39;]\ngenre_by_year &#x3D; genre_df.groupby(&#39;release_date&#39;).sum()\nfig &#x3D; plt.figure(figsize&#x3D;(12,6))\nplt.plot(genre_by_year,label &#x3D; genre_by_year.columns)\nplt.legend(genre_by_year)\nplt.xticks(range(1950,2020,10))\nplt.title(&#39;ç”µå½±ç±»å‹éšæ—¶é—´å˜åŠ¨è¶‹åŠ¿å›¾&#39;,fontsize&#x3D;20)\nplt.xlabel(&#39;å¹´ä»½&#39;,fontsize &#x3D; 20)\nplt.ylabel(&#39;æ•°é‡&#39;,fontsize &#x3D; 20)\n\n# â‘¡ç”µå½±ç±»å‹æ•°é‡åˆ†å¸ƒ\ngenre_sum &#x3D; genre_by_year.sum().sort_values(ascending &#x3D; False)\n#è¿™é‡Œçš„labelå‚æ•°åŠ ä¸åŠ åœ¨å›¾ä¸­æ²¡æœ‰ä»»ä½•å˜åŒ–\ngenre_sum.plot.barh(label&#x3D;&#39;genre&#39;,figsize &#x3D; (12,6))\nplt.title(&#39;ç”µå½±ç±»å‹æ•°é‡åˆ†å¸ƒå›¾&#39;,fontsize &#x3D; 20)\nplt.xlabel(&#39;æ•°é‡&#39;,fontsize&#x3D;20)\nplt.ylabel(&#39;ç”µå½±ç±»å‹&#39;,fontsize&#x3D;20)\nplt.show()\nè®¡ç®—æŒ‡æ ‡# ï¼ˆäºŒï¼‰ä¸åŒç±»å‹ç”µå½±çš„ç›ˆåˆ©èƒ½åŠ›å¦‚ä½•ï¼Ÿ\n# å»ºç«‹ç”µå½±ç±»å‹-åˆ©æ¶¦æ•°æ®æ¡†ï¼Œè®¡ç®—å„ç”µå½±ç±»å‹å¹³å‡æ”¶ç›Šï¼š\na &#x3D; clean_xdata.revenue - clean_xdata.budget\nprofit_df &#x3D; genre_df.join(pd.DataFrame(a,columns&#x3D;[&#39;profit&#39;]))\n\n#è®¡ç®—ä¸ªç”µå½±ç±»å‹çš„åˆ©æ¶¦å¹³å‡å€¼\n#ä¼ é€’as_index&#x3D;Falseï¼ŒæŠŠåˆ†ç»„é”®çš„ç±»å‹ä½œä¸ºä¸€åˆ—è¿”å›åœ¨DataFrameä¸­ï¼Œè€Œä¸æ˜¯é»˜è®¤Trueæ—¶ä½œä¸ºSeriesçš„ç´¢å¼•è¿”å›\ngenre_set &#x3D; clean_xdata[&#39;genres&#39;].str.get_dummies().columns.unique()\nprofit_by_genre &#x3D; pd.Series(index&#x3D;genre_set)\nfor genre in genre_set:\n    profit_by_genre[genre] &#x3D; profit_df.groupby(genre,as_index &#x3D; False).profit.mean().loc[1,&#39;profit&#39;]\n#ç”»å‡ºå„ç”µå½±ç±»å‹å¹³å‡æ”¶ç›Šåˆ†å¸ƒå›¾\nprofit_by_genre.sort_values().plot.barh(label&#x3D;&#39;genre&#39;,figsize&#x3D;(12,6))\nplt.title(&#39;å„ç”µå½±ç±»å‹å¹³å‡æ”¶ç›Šåˆ†å¸ƒå›¾&#39;,fontsize&#x3D;20)\nplt.xlabel(&#39;åˆ©æ¶¦&#39;,fontsize&#x3D;20)\nplt.ylabel(&#39;ç”µå½±ç±»å‹&#39;,fontsize&#x3D;20)\nplt.show()\n\noriginal_recompose &#x3D; pd.DataFrame(clean_xdata[&#39;budget&#39;])\noriginal_recompose.loc[:,&#39;profit&#39;] &#x3D; profit_df.profit\noriginal_recompose[&#39;type&#39;] &#x3D; clean_xdata[&#39;based on novel&#39;].map(lambda x :1 if x&#x3D;&#x3D;&#39;based on novel&#39; else 0)\n#åŸåˆ›æˆ–æ”¹ç¼–ç”µå½±çš„é¢„ç®—ä¸åˆ©æ¶¦\n#è¿™ä¸ªåœ°æ–¹é‡æ–°å®šä¹‰æ–°çš„DataFrame --original_recompose_groupbyç”¨æ¥å­˜å‚¨å„ä¸ªæŒ‡æ ‡åˆ†ç»„åçš„å‡å€¼ï¼ˆåŸåˆ›ä¸æ”¹ç¼–ç”µå½±æ¦‚è¦ï¼‰\noriginal_recompose_groupby &#x3D; original_recompose.groupby(&#39;type&#39;).mean()\noriginal_recompose_groupby[&#39;count&#39;] &#x3D; original_recompose.groupby(&#39;type&#39;).type.count()\noriginal_recompose_groupby[&#39;profit_rate&#39;] &#x3D; original_recompose_groupby.profit&#x2F;original_recompose_groupby.budget#è¿™é‡Œæœ‰ç»†èŠ‚,å¹³å‡åˆ©æ¶¦ç‡\noriginal_recompose_groupby.rename(index &#x3D; &#123;0:&#39;original&#39;,1:&#39;recompose&#39;&#125;,inplace &#x3D; True)#ä¼ é€’inplace&#x3D;Trueä¼šåˆ å»åŸæ¥çš„ç´¢å¼•ï¼Œå¦åˆ™ä¼šä¿ç•™\n#æ˜¯å¦åŸåˆ›ç”µå½±æ•°é‡å¯¹æ¯”å›¾\nplt.figure(figsize &#x3D;(12,6))\noriginal_recompose_groupby.loc[original_recompose_groupby.index,&#39;count&#39;].plot.bar()#ä¼ å…¥locã€ã€‘é‡Œé¢çš„å‚æ•°ä¸èƒ½æ˜¯ï¼›&#39;type&#39;,ä¼šæŠ¥é”™\nplt.title(&#39;åŸåˆ›æ”¹ç¼–ç”µå½±æ•°é‡å¯¹æ¯”&#39;,fontsize &#x3D; 20)\nplt.xlabel(&#39;åŸåˆ›-æ”¹å˜&#39;,fontsize &#x3D; 20)\nplt.ylabel(&#39;æ•°é‡&#39;,fontsize &#x3D; 20)\nplt.show()\n\n#ç»˜åˆ¶åˆ©æ¶¦æŸ±çŠ¶å›¾\nx&#x3D; list(range(len(original_recompose_groupby.index)))#ç´¢å¼•é•¿åº¦åºåˆ—\nxl &#x3D; original_recompose_groupby.index#xlä¸ºç´¢å¼•å®é™…å€¼\nfig &#x3D; plt.figure()\nax1&#x3D;fig.add_subplot(111)\nplt.bar(x,original_recompose_groupby.profit)\n#æ¥ä¸‹æ¥æœ‰ç–‘é—®ï¼Ÿ\nplt.xticks(x,xl,rotation &#x3D; 0,fontsize&#x3D;12)\nplt.yticks(fontsize&#x3D;15)\nax1.set_title(&#39;åŸåˆ›ä¸æ”¹ç¼–ç”µå½±å¹³å‡åˆ©æ¶¦å¯¹æ¯”&#39;,fontsize &#x3D; 20)\nax1.set_xlabel(&#39;åŸåˆ›-æ”¹å˜&#39;,fontsize &#x3D; 18)\nax1.set_ylabel(&#39;åˆ©æ¶¦&#39;,fontsize &#x3D; 18)\nax1.legend(loc&#x3D;2,labels&#x3D;&#39;åˆ©æ¶¦&#39;)\n\n#ç»˜åˆ¶åˆ©æ¶¦æŠ˜çº¿å›¾\nimport matplotlib.ticker as mtick\nax2 &#x3D; ax1.twinx()\nax2.plot(x,original_recompose_groupby[&#39;profit_rate&#39;],&#39;go-&#39;,lw&#x3D;2)\nfmt&#x3D;&#39;%.2f%%&#39;\nyticks &#x3D; mtick.FormatStrFormatter(fmt)\nax2.yaxis.set_major_formatter(yticks)#æ¬¡çºµåæ ‡æ ‡ç­¾è®¾ç½®ä¸ºç™¾åˆ†æ¯”æ˜¾ç¤º\nplt.yticks(fontsize &#x3D; 15)\nax2.set_ylabel(&#39;åˆ©æ¶¦ç‡&#39;,fontsize &#x3D; 18)\nax2.legend(loc&#x3D;4,labels &#x3D; &#39;profit_rate&#39;)#ä¼ é€’labelså‚æ•°é¿å…è­¦å‘Š\n#####ç”Ÿæˆè¯äº‘\nkeywords_data &#x3D; data[[&#39;id&#39;,&#39;popularity&#39;,&#39;production_companies&#39;,&#39;budget&#39;,&#39;revenue&#39;,&#39;original_title&#39;,&#39;runtime&#39;,&#39;release_date&#39;,&#39;genres&#39;,&#39;vote_count&#39;,&#39;vote_average&#39;,&#39;based on novel&#39;,&#39;keywords&#39;]]\nkeywords_data &#x3D; data[data.production_companies.notnull()&amp;data.genres.notnull()].reset_index(drop&#x3D;True)#å¾—åˆ° åŒ…å«å…³é”®å­—keywordsæ•°æ®çš„åˆ—è¡¨\nkeywords_list1 &#x3D; []\nfor x in keywords_data.keywords.dropna():\n    keywords_list1.append(x)\nkeywords_list1 &#x3D; &#39;&#39;.join(keywords_list1)\nkeywords_list1 &#x3D; keywords_list1.replace(&#39;\\s&#39;,&#39;&#39;)#å»é™¤å­—ç¬¦ä¸²ä¸­ç©ºå­—ç¬¦ä¸²ï¼ˆ\\sç”¨äºåŒ¹é…ç©ºç™½å­—ç¬¦ï¼Œå¯èƒ½æ˜¯ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€å…¶ä»–ç©ºç™½ï¼‰ï¼‰\n\nwordcloud &#x3D; WordCloud(background_color&#x3D;&#39;black&#39;,max_words&#x3D;3000,scale&#x3D;1.5).generate(keywords_list1)\nplt.figure(figsize&#x3D;(14,8))\nplt.imshow(wordcloud)\nplt.axis(&#39;off&#39;)\nplt.show()\npopular_genre_df &#x3D; pd.concat([genre_df.iloc[:,:-1],clean_xdata.popularity],axis&#x3D;1)\n#è®¡ç®—å„ç±»å‹ç”µå½±å—æ¬¢è¿åº¦å‡å€¼\nlist &#x3D; []\nfor genre in genre_set:\n    list.append(popular_genre_df.groupby(genre,as_index &#x3D; False).popularity.mean().loc[1,&#39;popularity&#39;])\npopular_by_genre&#x3D; pd.DataFrame(index&#x3D;genre_set)\npopular_by_genre[&#39;popularity_mean&#39;] &#x3D; list\n#ç”µå½±ç±»å‹å—æ¬¢è¿åº¦åˆ†å¸ƒå›¾\npopular_by_genre.sort_values(by&#x3D;&#39;popularity_mean&#39;).plot.barh(figsize&#x3D;(14,8))\nplt.title(&#39;ç”µå½±ç±»å‹å—æ¬¢è¿åº¦åˆ†å¸ƒå›¾&#39;,fontsize&#x3D;20)\nplt.xlabel(&#39;å—æ¬¢è¿åº¦&#39;,fontsize&#x3D;20)\nplt.ylabel(&#39;ç”µå½±ç±»å‹&#39;,fontsize&#x3D;20)\nplt.show()\n# â‘¡ç”µå½±æ—¶é•¿ä¸å—ä¼—æ¬¢è¿åº¦\nplt.scatter(clean_xdata.runtime,clean_xdata.popularity)\nplt.title(&#39;æ—¶é•¿ä¸æ¬¢è¿åº¦æ•£ç‚¹å›¾&#39;,fontsize&#x3D;20)\nplt.xlabel(&#39;ç”µå½±æ—¶é•¿&#39;,fontsize&#x3D;20)\nplt.ylabel(&#39;å—æ¬¢è¿åº¦&#39;,fontsize&#x3D;20)\nplt.show()\n# â‘¢ç”µå½±è¯„åˆ†ä¸å—ä¼—æ¬¢è¿åº¦\nplt.scatter(clean_xdata.vote_average,clean_xdata.popularity)\nplt.title(&#39;è¯„åˆ†ä¸æ¬¢è¿åº¦æ•£ç‚¹å›¾&#39;,fontsize&#x3D;20)\nplt.xlabel(&#39;ç”µå½±è¯„åˆ†&#39;,fontsize&#x3D;20)\nplt.ylabel(&#39;å—æ¬¢è¿åº¦&#39;,fontsize&#x3D;20)\nplt.show()\nUniversal Picturesä¸Paramount Picturescompanies_list &#x3D;[&#39;Universal Pictures&#39;,&#39;Paramount Pictures&#39;]\ncompanies_df &#x3D; pd.DataFrame()\nfor company in companies_list:#å„ç”µå½±çš„ç”µå½±å•†æ˜¯å¦åŒ…å«ä¸¤è€…ä¸­å…¶ä¸­ä¸€ä¸ªï¼Œæ˜¯åˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0\n    companies_df[company] &#x3D;clean_xdata.production_companies.str.contains(company).map(lambda x :1 if x else 0)\ncompanies_df &#x3D; pd.concat([companies_df,genre_df.iloc[:,:-1],profit_df.profit],axis&#x3D;1)\nlist &#x3D; []\nfor company in companies_list:\n    list.append(companies_df.groupby(company,as_index&#x3D;False).profit.sum().loc[1,&#39;profit&#39;])\ncompanies_profit&#x3D; pd.DataFrame(list,index &#x3D; companies_list,columns&#x3D;[&#39;profit_sum&#39;])\ncompanies_profit.plot.bar(label &#x3D; companies_profit.index,figsize&#x3D;(8,6))\nplt.title(&#39;ä¸¤å®¶å…¬å¸åˆ©æ¶¦å¯¹æ¯”&#39;,fontsize&#x3D;20)\nplt.xticks(rotation &#x3D; 0)\nplt.ylabel(&#39;åˆ©æ¶¦&#39;,fontsize &#x3D; 20)\nplt.show()\n\ncompanies_df_1 &#x3D; companies_df.groupby(&#39;Universal Pictures&#39;)[[&#39;Action&#39;, &#39;Adventure&#39;, &#39;Animation&#39;, &#39;Comedy&#39;, &#39;Crime&#39;, &#39;Documentary&#39;,\n       &#39;Drama&#39;, &#39;Family&#39;, &#39;Fantasy&#39;, &#39;Foreign&#39;, &#39;History&#39;, &#39;Horror&#39;, &#39;Music&#39;,\n       &#39;Mystery&#39;, &#39;Romance&#39;, &#39;Science Fiction&#39;, &#39;TV Movie&#39;, &#39;Thriller&#39;, &#39;War&#39;,\n       &#39;Western&#39;]].sum().loc[1,:]\ncompanies_df_2 &#x3D; companies_df.groupby(&#39;Paramount Pictures&#39;)[[&#39;Action&#39;, &#39;Adventure&#39;, &#39;Animation&#39;, &#39;Comedy&#39;, &#39;Crime&#39;, &#39;Documentary&#39;,\n       &#39;Drama&#39;, &#39;Family&#39;, &#39;Fantasy&#39;, &#39;Foreign&#39;, &#39;History&#39;, &#39;Horror&#39;, &#39;Music&#39;,\n       &#39;Mystery&#39;, &#39;Romance&#39;, &#39;Science Fiction&#39;, &#39;TV Movie&#39;, &#39;Thriller&#39;, &#39;War&#39;,\n       &#39;Western&#39;]].sum().loc[1,:]\ncompany_genre_df &#x3D; pd.DataFrame([companies_df_1,companies_df_2],index &#x3D; [&#39;Universal Pictures&#39;,&#39;Paramount Pictures&#39;]).T\nfig &#x3D; plt.figure(figsize&#x3D;(16,8))\nax1 &#x3D; fig.add_subplot(121)\nplt.pie(company_genre_df[&#39;Universal Pictures&#39;],labels&#x3D;company_genre_df.index,autopct&#x3D;&#39;%.1f%%&#39;)\nplt.title(&#39;Universal Pictures&#39;,fontsize &#x3D; 15)\n\nax2 &#x3D; fig.add_subplot(122)\nplt.pie(company_genre_df[&#39;Paramount Pictures&#39;],labels&#x3D;company_genre_df.index,autopct&#x3D;&#39;%.1f%%&#39;)\nplt.title(&#39;Paramount Pictures&#39;,fontsize&#x3D;15)\n# ç”µå½±ç¥¨æˆ¿ä¸å“ªäº›å› ç´ æœ€ç›¸å…³ï¼Ÿ\nclean_xdata[[&#39;budget&#39;,&#39;popularity&#39;,&#39;release_date&#39;,&#39;runtime&#39;,&#39;vote_average&#39;,&#39;vote_count&#39;,&#39;revenue&#39;]].corr()\nimport seaborn as sns\nrevenue_corr &#x3D; clean_xdata[[&#39;budget&#39;,&#39;popularity&#39;,&#39;vote_count&#39;,&#39;revenue&#39;]]\nfig &#x3D; plt.figure(figsize&#x3D;(18,6))\n#ç”µå½±ç¥¨ç¥¨æˆ¿ä¸ç”µå½±é¢„ç®—ç›¸å…³æ€§æ•£ç‚¹å›¾\n\nax1 &#x3D; plt.subplot(1,3,1)\nax1 &#x3D; sns.regplot(x&#x3D;&#39;popularity&#39;, y&#x3D;&#39;revenue&#39;, data&#x3D;revenue_corr, x_jitter&#x3D;.1)\nax1.text(400,2e9,&#39;r&#x3D;0.64&#39;,fontsize&#x3D;15)\nplt.title(&#39;revenue by popularity&#39;,fontsize&#x3D;15)\nplt.xlabel(&#39;popularity&#39;,fontsize&#x3D;13)\nplt.ylabel(&#39;revenue&#39;,fontsize&#x3D;13)\n \nax2 &#x3D; plt.subplot(1,3,2)\nax2 &#x3D; sns.regplot(x&#x3D;&#39;vote_count&#39;, y&#x3D;&#39;revenue&#39;, data&#x3D;revenue_corr, x_jitter&#x3D;.1,color&#x3D;&#39;g&#39;,marker&#x3D;&#39;+&#39;)\nax2.text(6800,1.1e9,&#39;r&#x3D;0.78&#39;,fontsize&#x3D;15)\nplt.title(&#39;revenue by vote_count&#39;,fontsize&#x3D;15)\nplt.xlabel(&#39;vote_count&#39;,fontsize&#x3D;13)\nplt.ylabel(&#39;revenue&#39;,fontsize&#x3D;13)\n \nax3 &#x3D; plt.subplot(1,3,3)\nax3 &#x3D; sns.regplot(x&#x3D;&#39;budget&#39;, y&#x3D;&#39;revenue&#39;, data&#x3D;revenue_corr, x_jitter&#x3D;.1,color&#x3D;&#39;r&#39;,marker&#x3D;&#39;^&#39;)\nax3.text(1.6e8,2.2e9,&#39;r&#x3D;0.73&#39;,fontsize&#x3D;15)\nplt.title(&#39;revenue by budget&#39;,fontsize&#x3D;15)\nplt.xlabel(&#39;budget&#39;,fontsize&#x3D;13)\nplt.ylabel(&#39;revenue&#39;,fontsize&#x3D;13)\næ€è·¯è¦æ˜ç¡®ï¼Œä»£ç è¦ç®€æ´ï¼Œä»¥åå°½é‡éƒ½å†™æˆå‡½æ•°ã€‚\n","slug":"pythonç”µå½±æ•°æ®åˆ†æ","date":"2020-03-11T05:25:31.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"1eac341c429c84a40e6d901f88df1212","title":"pythoné¢å‘å¯¹è±¡ä¹ é¢˜","content":"å†™å®Œå¯¹å¯¹è±¡è¿™ä¸ªä¸œè¥¿äº†è§£å¾ˆå¤šäº†\n# coding&#x3D;utf-8\n&quot;&quot;&quot;\nä¸€ï¼šå®šä¹‰ä¸€ä¸ªå­¦ç”Ÿç±»ã€‚æœ‰ä¸‹é¢çš„ç±»å±æ€§ï¼š\n1 å§“å\n2 å¹´é¾„\n3 æˆç»©ï¼ˆè¯­æ–‡ï¼Œæ•°å­¦ï¼Œè‹±è¯­)[æ¯è¯¾æˆç»©çš„ç±»å‹ä¸ºæ•´æ•°]\nç±»æ–¹æ³•ï¼š\n1 è·å–å­¦ç”Ÿçš„å§“åï¼šget_name() è¿”å›ç±»å‹:str\n2 è·å–å­¦ç”Ÿçš„å¹´é¾„ï¼šget_age() è¿”å›ç±»å‹:int\n3 è¿”å›3é—¨ç§‘ç›®ä¸­æœ€é«˜çš„åˆ†æ•°ã€‚get_course() è¿”å›ç±»å‹:int\nå†™å¥½ç±»ä»¥åï¼Œå¯ä»¥å®šä¹‰2ä¸ªåŒå­¦æµ‹è¯•ä¸‹:\nzm &#x3D; Student(&#39;zhangming&#39;,20,[69,88,100])\nè¿”å›ç»“æœï¼š\nzhangming\n20\n100\n&quot;&quot;&quot;\nclass Student(object):\n    def __init__(self, name, age, scores):\n        self.name &#x3D; name\n        self.age &#x3D; age\n        self.scores &#x3D; scores\n    def get_name(self):\n        return self.name\n    def get_age(self):\n        return self.age\n    def get_course(self):\n        return max(self.scores)\nzm &#x3D; Student(&#39;zhangming&#39;, 20, [69, 88, 100])\nprint zm.get_name()\nprint zm.get_age()\nprint zm.get_course()\n\n&quot;&quot;&quot;\näºŒï¼šå®šä¹‰ä¸€ä¸ªå­—å…¸ç±»ï¼šdictclassã€‚å®Œæˆä¸‹é¢çš„åŠŸèƒ½ï¼š\ndict &#x3D; dictclass(&#123;ä½ éœ€è¦æ“ä½œçš„å­—å…¸å¯¹è±¡&#125;)\n1 åˆ é™¤æŸä¸ªkey\ndel_dict(key)\n2 åˆ¤æ–­æŸä¸ªé”®æ˜¯å¦åœ¨å­—å…¸é‡Œï¼Œå¦‚æœåœ¨è¿”å›é”®å¯¹åº”çš„å€¼ï¼Œä¸å­˜åœ¨åˆ™è¿”å›&quot;not found&quot;\nget_dict(key)\n3 è¿”å›é”®ç»„æˆçš„åˆ—è¡¨ï¼šè¿”å›ç±»å‹;(list)\nget_key()\n4 åˆå¹¶å­—å…¸ï¼Œå¹¶ä¸”è¿”å›åˆå¹¶åå­—å…¸çš„valuesç»„æˆçš„åˆ—è¡¨ã€‚è¿”å›ç±»å‹:(list)\nupdate_dict(&#123;è¦åˆå¹¶çš„å­—å…¸&#125;)\n&quot;&quot;&quot;\nclass dictclass(object):\n    def __init__(self, dict):\n        self.dict &#x3D; dict\n    def get_dict(self, key):\n        if self.dict. has_key(key):\n            return self.dict[key]\n        return &#39;not found&#39;\n    def del_dict(self, key):\n        if self.dict.has_key(key):\n            self.dict.pop(key)\n        else:\n            return &#39;no that key&#39;\n    def get_key(self):\n        return self.dict.keys()\n    def updata_dict(self, dict2):\n        self.dict &#x3D; dict(self.dict, **dict2)\n        return self.dict.values()\n \nA &#x3D; dictclass(&#123;&#39;a&#39;: 1, &#39;b&#39;: 2&#125;)\nprint A.get_dict(&#39;c&#39;)\nprint A.del_dict(&#39;c&#39;)\nprint A.get_key()\nprint A.updata_dict(&#123;&#39;c&#39;: 3, &#39;d&#39;: 4&#125;)\n \n# å…³äºåˆ é™¤å­—å…¸ä¸­çš„å…ƒç´ \n# pop åˆ é™¤å¹¶è¿”å›å¯¹åº”çš„valueå€¼\nB &#x3D; &#123;&#39;a&#39;: 1, &#39;b&#39;: 2&#125;\nprint B.pop(&#39;b&#39;)\nprint B\n# del voidä¸è¿”å›å€¼\nC &#x3D; &#123;&#39;a&#39;: 1, &#39;b&#39;: 2&#125;\ndel C[&#39;a&#39;]\nprint C\n# del dict åˆ é™¤å­—å…¸ï¼Œä¸å­˜åœ¨è¿™ä¸ªå­—å…¸\n# dict.clear()åˆ é™¤å­—å…¸å†…æ‰€æœ‰å…ƒç´ ä½†å­—å…¸è¿˜æ˜¯å­˜åœ¨åªæ˜¯æ²¡æœ‰å…ƒç´ \nD &#x3D; &#123;&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3&#125;\nD.clear()\n# å…³äºåˆå¹¶å­—å…¸\nA &#x3D; &#123;&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3&#125;\nB &#x3D; &#123;&#39;d&#39;: 4, &#39;e&#39;: 5, &#39;f&#39;: 6&#125;\nC &#x3D; dict(A.items() + B.items())\nD &#x3D; dict(A, **B)  # è¿™ç§åˆå¹¶æ–¹æ³•ä¼šæ¯”ä¸Šä¸€ç§å¿«å¾ˆå¤šå¯¹äºé‡å¤çš„keyï¼ŒBä¼šè¦†ç›–A\n&quot;&quot;&quot;\nå®šä¹‰ä¸€ä¸ªåˆ—è¡¨çš„æ“ä½œç±»ï¼šListinfo\nåŒ…æ‹¬çš„æ–¹æ³•:\n1 åˆ—è¡¨å…ƒç´ æ·»åŠ : add_key(keyname)  [keyname:å­—ç¬¦ä¸²æˆ–è€…æ•´æ•°ç±»å‹]\n2 åˆ—è¡¨å…ƒç´ å–å€¼ï¼šget_key(num) [num:æ•´æ•°ç±»å‹]\n3 åˆ—è¡¨åˆå¹¶ï¼šupdate_list(list)\t  [list:åˆ—è¡¨ç±»å‹]\n4 åˆ é™¤å¹¶ä¸”è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ï¼šdel_key()\nlist_info &#x3D; Listinfo([44,222,111,333,454,&#39;sss&#39;,&#39;333&#39;])\n&quot;&quot;&quot;\nclass Listinfo(object):\n    def __init__(self, list_val):\n        self.varlist &#x3D; list_val\n \n    def add_key(self, key_name):\n        if isinstance(key_name, (str, int)):\n            self.varlist.append(key_name)\n            return self.varlist\n        else:\n            return &#39;error&#39;\n \n    def get_key(self, num):\n        if num &gt;&#x3D; 0 and num &lt; len(self.varlist):\n            return self.varlist[num]\n        else:\n            return &#39;error&#39;\n \n    def update_list(self, List_et):\n        self.varlist.extend(List_et)\n        return self.varlist\n \n    def del_key(self):\n        if len(self.varlist) &gt;&#x3D; 0:\n            return self.varlist.pop(-1)\n        else:\n            return &#39;error&#39;\nlist_info &#x3D; Listinfo([44, 222, 111, 333, 454, &#39;sss&#39;, &#39;333&#39;])\nprint list_info.add_key(&#39;1111&#39;)\nprint list_info.get_key(4)\nprint list_info.update_list([&#39;1&#39;, &#39;2&#39;, &#39;3&#39;])\nprint list_info.del_key()\n&quot;&quot;&quot;\nå®šä¹‰ä¸€ä¸ªé›†åˆçš„æ“ä½œç±»ï¼šSetinfo\nåŒ…æ‹¬çš„æ–¹æ³•:\n1 é›†åˆå…ƒç´ æ·»åŠ : add_setinfo(keyname)  [keyname:å­—ç¬¦ä¸²æˆ–è€…æ•´æ•°ç±»å‹]\n2 é›†åˆçš„äº¤é›†ï¼šget_intersection(unioninfo) [unioninfo :é›†åˆç±»å‹]\n3 é›†åˆçš„å¹¶é›†ï¼š get_union(unioninfo)[unioninfo :é›†åˆç±»å‹]\n4 é›†åˆçš„å·®é›†ï¼šdel_difference(unioninfo) [unioninfo :é›†åˆç±»å‹]\nset_info &#x3D;  Setinfo(ä½ è¦æ“ä½œçš„é›†åˆ)\n&quot;&quot;&quot;\nclass Setinfo(object):\n    def __init__(self, my_Set):\n        self.Sett &#x3D; my_Set\n \n    def add_setinfo(self, keyname):\n        if isinstance(keyname, (int, str)):\n            self.Sett.add(keyname)\n            return self.Sett\n        return &#39;error&#39;\n \n    def get_intersection(self, unioninfo):\n        if isinstance(unioninfo, set):\n            return self.Sett &amp; unioninfo\n        return &#39;error&#39;\n \n    def get_union(self, unioninfo):\n        if isinstance(unioninfo, set):\n            return self.Sett | unioninfo\n        return &#39;error&#39;\n \n    def del_difference(self, unioninfo):\n        if isinstance(unioninfo, set):\n            return self.Sett - unioninfo\n        return &#39;error&#39;\n \nA &#x3D; set([1, 2, 3, 4, 5, 2])\nB &#x3D; set([5, 6, 3])\nset_info &#x3D; Setinfo(A)\nprint set_info.add_setinfo(&#39;f&#39;)\nprint set_info.get_intersection(B)\nprint set_info.get_union(B)\nprint set_info.del_difference(B)\n&quot;&quot;&quot;\né¢˜ç›®ä¸€ï¼š å†™ä¸€ä¸ªç½‘é¡µæ•°æ®æ“ä½œç±»ã€‚å®Œæˆä¸‹é¢çš„åŠŸèƒ½ï¼š\næç¤ºï¼šéœ€è¦ç”¨åˆ°urllibæ¨¡å—\nget_httpcode()è·å–ç½‘é¡µçš„çŠ¶æ€ç ï¼Œè¿”å›ç»“æœä¾‹å¦‚ï¼š200,301,404ç­‰ ç±»å‹ä¸ºint\nget_htmlcontent() è·å–ç½‘é¡µçš„å†…å®¹ã€‚è¿”å›ç±»å‹:str\nget_linknum()è®¡ç®—ç½‘é¡µçš„é“¾æ¥æ•°ç›®ã€‚\n&quot;&quot;&quot;\nimport urllib\nimport urllib2\nclass page_data(object):\n    def __init__(self, url_add):\n        self.url &#x3D; url_add\n \n    def get_httpcode(self):\n        status &#x3D; urllib.urlopen(self.url).code\n        return status\n \n    def get_htmlcontent(self):\n        contentstr &#x3D; urllib2.urlopen(self.url).read()\n        return contentstr\n \n    def get_linknum(self):\n        content &#x3D; urllib2.urlopen(self.url).read()\n        return len(content.split(&#39;&lt;a href&#x3D;&#39;)) - 1\n \nA &#x3D; page_data(&quot;http:&#x2F;&#x2F;www.baidu.com&quot;)\nprint A.get_httpcode()\nprint A.get_htmlcontent()\nprint A.get_linknum()\n\n# coding&#x3D;utf-8\nclass SchoolMember:\n    # Represents any school member.\n    def __init__(self, name, age):\n        self.name &#x3D; name\n        self.age &#x3D; age\n        print &#39;(Initialized SchoolMember: %s)&#39; % self.name\n \n    def tell(self):\n        # Tell my details.\n        print &#39;Name:&quot;%s&quot; Age:&quot;%s&quot;&#39; % (self.name, self.age),\n \n \nclass Teacher(SchoolMember):\n    # Represents a teacher.\n    def __init__(self, name, age, salary):\n        SchoolMember.__init__(self, name, age)\n        self.salary &#x3D; salary\n        print &#39;(Initialized Teacher: %s)&#39; % self.name\n \n    def tell(self):\n        SchoolMember.tell(self)\n        print &#39;Salary: &quot;%d&quot;&#39; % self.salary\n \n \nclass Student(SchoolMember):\n    # Represents a student.\n    def __init__(self, name, age, marks):\n        SchoolMember.__init__(self, name, age)\n        self.marks &#x3D; marks\n        print &#39;(Initialized Student: %s)&#39; % self.name\n \n    def tell(self):\n        SchoolMember.tell(self)\n        print &#39;Marks: &quot;%d&quot;&#39; % self.marks\n \nt &#x3D; Teacher(&#39;Mrs. Shrividya&#39;, 40, 30000)\ns &#x3D; Student(&#39;Swaroop&#39;, 22, 75)\nc &#x3D; SchoolMember(&#39;Swar&#39;, 22)\nt.tell()\ns.tell()\nc.tell()\n\nhttps://blog.csdn.net/bullpride/article/details/52022701\n","slug":"pythoné¢å‘å¯¹è±¡ä¹ é¢˜","date":"2019-07-19T04:59:17.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"a602a3ffbe3a3d828d4555b8d6284dc6","title":"è®°ä¸€æ¬¡é¢è¯•é¢˜ï¼šexcelæ•°æ®å¤„ç†","content":"Salesè¡¨ï¼š\n\nInstitutionè¡¨ï¼š\n\nProductè¡¨ï¼š\n\nPriceè¡¨ï¼š\n\nQuestionï¼šæ±‚å„çœä»½2017å…¨å¹´é”€å”®é‡‘é¢(å…¨éƒ¨äº§å“)Top1çš„åŒ»é™¢ï¼›(è¯·ä¿ç•™è®¡ç®—è¿‡ç¨‹)\nimport pandas as pd\nimport openpyxl \npath &#x3D; r&#39;C:\\Users\\supermanzwg\\Desktop\\Excelèƒ½åŠ›æµ‹è¯•è§£ç­”.xlsx&#39;\ndf &#x3D; pd.read_excel(path,sheet_name&#x3D; &#39;Sales&#39;)\ndf &#x3D; df[pd.to_datetime(df.SalesDate,format&#x3D;&#39;%Y-%m-%d&#39;).dt.year&#x3D;&#x3D;2017]\ndf2 &#x3D; pd.read_excel(path,sheet_name&#x3D; &#39;Institution&#39;)\n# print(df2.info())\n#æ£€æŸ¥å¹¶å‘ç°ä¸¤è¡¨ä¹‹é—´è¿æ¥é”®å‡ºç°ä¸ä¸€è‡´\nfor i in range(len(df)):\n    if df.loc[i,&#39;InstitutionCode&#39;]&#x3D;&#x3D; &#39;F6302 &#39;:\n        df.loc[i,&#39;InstitutionCode&#39;] &#x3D; &#39;F6302&#39;\n    else:\n        pass\ndf_12 &#x3D; pd.merge(df,df2,on&#x3D;&#39;InstitutionCode&#39;,how&#x3D;&#39;left&#39;)\n# print(df_12.info())\n# a &#x3D; df_12[df_12.Province.isnull()] æ£€æŸ¥æ˜¯å¦è¿˜å­˜åœ¨ç¼ºå¤±å€¼\n# a.InstitutionCode.unique()\ndf4 &#x3D; pd.read_excel(path,sheet_name&#x3D; &#39;Price&#39;)\ndf4 &#x3D; df4[pd.to_datetime(df4.EffectiveDate,format&#x3D;&#39;%Y-%m-%d&#39;).dt.year&#x3D;&#x3D;2017]\ndf4 &#x3D; df4.drop_duplicates([&#39;SKU&#39;])#åˆ å»é‡å¤SKUå€¼\nddff &#x3D; pd.merge(df_12,df4,on&#x3D;&#39;SKU&#39;)\nddff[&#39;money&#39;] &#x3D; ddff[&#39;Quantity&#39;]*ddff[&#39;Price&#39;]\n# print(ddff.money.sum())#é”€å”®é¢æ€»å’Œ\ngroupby_ddff &#x3D; ddff.groupby([&#39;Province&#39;,&#39;InstitutionName&#39;])[&#39;money&#39;].sum().reset_index()\ngroupby_ddff[&#39;group_sort&#39;]&#x3D;groupby_ddff[&#39;money&#39;].groupby(groupby_ddff[&#39;Province&#39;]).rank(ascending&#x3D;False,method&#x3D;&#39;first&#39;)\ngroupby_ddff_top1 &#x3D; groupby_ddff[groupby_ddff[&#39;group_sort&#39;]&#x3D;&#x3D;1]\ngroupby_ddff_top1\nå†™å…¥åˆ°åŸexcel\n# import xlwings as xw\nbook &#x3D; openpyxl.load_workbook(path)   #è¯»å–ä½ è¦å†™å…¥çš„workbook\n#å’Œpd.read_excel() ç”¨äºå°†Dataframeå†™å…¥excelã€‚xlsç”¨xlwtã€‚xlsxç”¨openpyxl\nwriter &#x3D; pd.ExcelWriter(path, engine&#x3D;&#39;openpyxl&#39;)   \n##æ­¤æ—¶çš„writeré‡Œè¿˜åªæ˜¯è¯»å†™å™¨. ç„¶åå°†ä¸Šé¢è¯»å–çš„bookå¤åˆ¶ç»™writer  \nwriter.book &#x3D; book\n#è½¬åŒ–ä¸ºå­—å…¸çš„å½¢å¼\nwriter.sheets &#x3D; dict((ws.title, ws) for ws in book.worksheets)\n#å°†dataå†™å…¥writer\ngroupby_ddff_top1.to_excel(writer,sheet_name&#x3D;&quot;Answer_Python&quot;,index&#x3D;False)\nwriter.save()\n\n\n","slug":"è®°ä¸€æ¬¡é¢è¯•é¢˜ï¼šexcelæ•°æ®å¤„ç†","date":"2019-03-19T08:43:39.000Z","categories_index":"","tags_index":"æ•°æ®åˆ†æ","author_index":"Aurora"},{"id":"cf1675b4714191423290b7ca7c89a04a","title":"å¤§å­¦ä¸‰å¹´ï¼Œå†™ç»™é‚£ä¸ªè¿Ÿåˆ°çš„äºº","content":"äº²çˆ±çš„Xå§‘å¨˜ï¼š\nä½ å¥½ï¼ç»™ä½ å†™è¿™å°ä¿¡çš„æ—¶å€™ï¼Œæˆ‘æ­£åœ¨å­¦æ ¡çš„æœºç”µæ¥¼B301ä¸Šç¬¬ä¸€èŠ‚è¯¾ã€‚çœ‹äº†ç®€ä¹¦é‡Œå¥½å¤šç»™å¼‚æ€§æœ‹å‹å†™ä¿¡çš„æ–‡ç« ï¼Œæˆ‘ä¹Ÿå¿ƒè¡€æ¥æ½®ï¼Œå¿ä¸ä½æƒ³è¦å’Œä½ è¯´è¯´è¯äº†ã€‚\nâ€”1â€”\næ—©ä¸Šé†’çš„å¾ˆæ—©ï¼Œåœ¨åºŠä¸Šå¹³èººåˆ°é—¹é“ƒå£°å“èµ·ï¼Œä¾æ—§ç…§å¸¸çš„èµ·åºŠï¼Œæ´—æ¼±ï¼Œæ•´ç†å¥½å‡ºé—¨ã€‚\næ²¡æœ‰èƒƒå£ï¼Œä¸å¤ªæƒ³åƒé¥­ã€‚ä½†æƒ³åˆ°å°†æ¥è¦åœ¨ä½ é¢å‰å‘ˆç°ä¸€ä¸ªå¥åº·é˜³å…‰çš„è‡ªå·±ï¼Œè¿˜æ˜¯ä¹°äº†ä¸€ä»½è±†æµ†å’Œä¸¤ä¸ªæ—©é¤åŒ…ã€‚\nåƒå®Œèµ°è¿›æ•™å®¤ï¼Œå·²ç»é›¶é›¶æ•£æ•£çš„åæ»¡äº†ä¸€äº›äººï¼Œæˆ‘æ‰“å¼€è€³æœºé‡Œçš„çº¯éŸ³ä¹ï¼Œæƒ³ç€èˆ’ç¼“ä¸‹æƒ…ç»ªï¼Œæ¥è¿æ¥è¿™èŠ‚å¹¶ä¸æ€ä¹ˆè®©æˆ‘å¿ƒåŠ¨çš„è¯¾ç¨‹ã€‚\né‚»æ¡Œæœ‰ä¸€å¯¹æƒ…ä¾£åå¾—å¾ˆè¿‘ï¼Œæˆ‘çœ‹ç€è€å¸ˆèµ°è¿›æ•™å®¤ï¼Œç´§æ¥ç€ç”¨ä½™å…‰ä¸€ç¥åˆ°ä»–ä»¬æœ‰è¯´æœ‰ç¬‘çš„æ ·å­ï¼Œé¡¿æ—¶å¿ƒç”Ÿæ€…æƒ˜ã€‚\nå¦‚æœï¼Œæˆ‘æƒ³è¯´æ˜¯å¦‚æœï¼Œä½ åœ¨åé¢è½»è½»åœ°æ‹ä¸€ä¸‹æˆ‘çš„è‚©è†€ï¼Œæˆ‘å›å¤´çœ‹åˆ°ä¸€ä¸ªå˜´è§’å¾®å¾®ä¸Šæ‰¬çš„å¼§åº¦ï¼Œé‚£è¿™èŠ‚è¯¾æˆ‘ä¸€å®šå¸¦ç€æ»¡æ»¡çš„èƒ½é‡ã€‚\næˆ–è€…ï¼Œä½ å°±åªæ˜¯é™é™åœ°ååœ¨æˆ‘çš„å‰é¢ï¼Œæˆ‘çœ‹ç€ä½ ï¼Œå¿ƒç”Ÿæ¬¢å–œï¼Œè„¸ä¸Šä¹Ÿåº”è¯¥ä¼šä¸è‡ªè§‰çš„æ³›èµ·ç¬‘å®¹â€¦â€¦\næœ‰æ—¶å€™æˆ‘ä¼šä¸€ä¸ªäººååœ¨ä¸‰ä¸ªåº§ä½çš„ä¸­é—´ï¼Œå°±å¥½åƒæ½œæ„è¯†é‡Œç»™ä½ ç•™äº†ä¸€ä¸ªä½ç½®ä¸€æ ·ã€‚\nå…¶å®ï¼Œä¸€ä¸ªäººï¼Œä¸€ä¸ªåº§ä½ï¼Œä¸€æ”¯æ²™æ²™ä½œå“çš„ç¬”ï¼Œä¸€ä¸ªä½ä¸‹è§†çº¿çš„èƒŒå½±ã€‚æ€»æ˜¯ä¼šæ˜¾å¾—å­¤é›¶é›¶çš„ï¼Œåœ¨å‘¨å›´æ•´é½çš„äººç¾¤èƒŒæ™¯ä¸‹ï¼Œä¸å…ä¼šæœ‰äº›æ ¼æ ¼ä¸å…¥â€¦\nâ€”2â€”\nä½ çŸ¥é“å—ï¼Œæˆ‘å·²ç»ä¹ æƒ¯äº†ä¸€ä¸ªäººèµ°åœ¨å»å›¾ä¹¦é¦†çš„è·¯ä¸Šï¼Œæˆ‘å¬ç€éŸ³ä¹ï¼Œçœ‹ç€ä¸€è·¯æ²¿é€”çš„é£æ™¯ï¼Œä¸ºäº†åŒ…è£¹ä½å¿ƒä¸­çš„å­¤ç‹¬ï¼Œæˆ‘æ˜‚é¦–æŒºèƒ¸ï¼Œç•¥æ˜¾æ‚ é—²ã€æƒ¬æ„çš„èµ°ç€ã€‚\nä½†æ˜¯ï¼Œå¦‚æœæ˜¯ä½ å’Œæˆ‘ä¸€èµ·ï¼Œæˆ‘å¯èƒ½ä¼šæ»¡å«ç¬‘æ„åœ°å’Œä½ è°ˆå¤©è¯´åœ°ï¼Œåƒä¸ªå­©å­ä¸€æ ·å¤§å¤§æ–¹æ–¹çš„èµ°ç€â€¦\nåˆæˆ–æ˜¯ï¼Œä½ æŒ½ç€æˆ‘çš„æ‰‹ï¼Œä¸éœ€è¦è®²å¤ªå¤šè¯ï¼Œä¸€èµ·æ…¢æ‚ æ‚ çš„èµ°åœ¨çŸ³å¤´å°è·¯ä¸Šã€‚å°±åƒã€Šæˆéƒ½ã€‹é‡Œæç»˜çš„æ„å¢ƒé‚£æ ·ï¼šâ€ä½ ä¼šæŒ½ç€æˆ‘çš„è¡£è¢–ï¼Œæˆ‘ä¼šæŠŠæ‰‹æ£è¿›è£¤å…œâ€¦â€¦â€\næœ‰ä¸€ä¸ªç§˜å¯†è¦å‘Šè¯‰ä½ ï¼Œæˆ‘ä¼šç”¨å‰ä»–å¼¹å”±è¿™é¦–æ­Œäº†ï¼Œä¸çŸ¥é“åœ¨ä½ é¢å‰çš„æ—¶å€™ï¼Œæˆ‘èƒ½ä¸èƒ½é¥±å«æ·±æƒ…çš„å”±å‡ºæ¥å¸¦ç»™ä½ æµªæ¼«çš„æ„Ÿè§‰ã€‚\nä»å›¾ä¹¦é¦†å‡ºæ¥ï¼Œæˆ‘ä»¬ä¸€èµ·å»é£Ÿå ‚ä¹°é¥­ï¼Œæˆ‘ä¼šæƒ³å…ˆå»ä½ å–œæ¬¢çš„çª—å£æ’é˜Ÿï¼Œä½ æ˜¯æƒ³æ‹¿ç€ä¹¦åŒ…å»å¯»æ‰¾ç©ºç€çš„åº§ä½ï¼Œè¿˜æ˜¯æƒ³å’Œæˆ‘èµ°åœ¨ä¸€èµ·å‘¢â€¦\nä½ çŸ¥é“å—ï¼Œå¹³æ—¶éƒ½æ˜¯å’Œèˆå‹ä¸€èµ·åƒé¥­ï¼ŒèŠçš„ä¹Ÿéƒ½æ˜¯å„è‡ªçš„äº‹æƒ…ã€‚ä½†æ˜¯å¦‚æœæ˜¯å’Œä½ ä¸€èµ·ï¼Œæˆ‘æƒ³ä¸ä½†èƒƒå£ä¼šå¤§æ¶¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æœ‰æ›´å¤šçš„æ•…äº‹ä¸€èµ·å›å¿†â€¦\nåƒå®Œé¥­ï¼Œæˆ‘ä»¬ååœ¨å›¾ä¹¦é¦†æ—æ—è«å°é“çš„é•¿å‡³ä¸Šï¼Œå¬å¾®é£æ‹‚è¿‡è€³è¾¹çš„å£°éŸ³ï¼Œçœ‹é‚£é˜³å…‰æ²æµ´ä¸‹çš„ä¸€ç‰‡ç»¿æ—ã€‚\nä½ æ…¢æ…¢åœ°æŠŠå¤´é åœ¨æˆ‘çš„è‡‚å¼¯ï¼Œæˆ‘ä½å¤´æ•æ‰ä½ çœ¸åº•ä¼¼æµ·ä¸€èˆ¬çš„æ¸©æŸ”â€¦\næˆ‘ä¼šæƒ³è°ƒçš®åœ°åˆ®ä½ çš„é¼»å­ï¼Œä½ ä¼šé—­ä¸Šçœ¼ç›æ»¡æ„åœ°ç¬‘å—ï¼Œè¿˜æ˜¯è½»è½»çš„æˆ³æˆ‘ä¸€ä¸‹ã€‚\nä½ çŸ¥é“å—ï¼Œå°±è¿™æ ·ä¸€ä¸ªç®€å•çš„åŠ¨ä½œï¼Œä¹Ÿä¼šè®©æˆ‘çš„æ•´ä¸ªä¸–ç•Œéƒ½å¼€æ»¡äº†èŠ±ã€‚\nâ€”3â€”\nï»¿å‡æœŸçš„æ—¶å€™ä½ ä¼šå»å“ªç©å‘¢ï¼æ˜¯åœ¨å®¿èˆåˆ·åˆ·å‰§ï¼Œå’Œæœ‹å‹èŠèŠå¤©ï¼Œè¿˜æ˜¯å‡ºå»æ—…æ¸¸ï¼Œæ‹ç…§ï¼Œå‘æœ‹å‹åœˆï¼Œæˆ–æ˜¯å’Œæˆ‘ä¸€æ ·ä¼šå»å•†ä¸šè¡—å…¼èŒå‘¢ï¼ï»¿\nï»¿æˆ‘ä¹Ÿä¼šæƒ³ç€æŒ£é’±å»ä¹°è‡ªå·±å–œæ¬¢çš„ä¸œè¥¿å‘€ï¼Œæˆ–æ˜¯æ—…æ¸¸å»ä¸€ä¸ªå¿ƒé©°ç¥å¾€çš„åœ°æ–¹å‘¢ï¼Œåˆæˆ–è€…æ˜¯ï¼Œå’Œæˆ‘çˆ±çš„äººä¸€èµ·å»åƒé¡¿ç«é”…æ€ä¹ˆæ ·ï¼ohï¼ thatâ€™s a good idea!ï»¿\nï»¿å½“ç„¶ï¼Œæœ‰æ—¶å€™ä»–ä¹Ÿä¼šæŠŠæ¡ä¸å¥½åˆ†å¯¸ï¼Œç”šè‡³ä¸æ„¿æ„å®‰æ’è‡ªå·±å­¦ä¹ çš„æ—¶é—´ï¼Œé€ƒè¯¾å»åšä¸€äº›ä»–æ„Ÿå…´è¶£çš„ä¸œè¥¿å‘¢ã€‚ï»¿\nï»¿ä»–è§‰å¾—ï¼Œè¦æ˜¯æœ‰ä¸ªå¿ƒæ€ç»†è…»çš„ä½ åœ¨èº«è¾¹çš„è¯ï¼Œä»–ä»¬ä¸€èµ·ï¼Œä¸€å®šèƒ½è¿‡ç€æ›´æœ‰èŠ‚å¥ã€å……å®çš„ç”Ÿæ´»ï¼ï»¿\nï»¿èŠ‚æ—¥çš„æ—¶å€™æˆ‘ä»¬å»çœ‹åœºç”µå½±å§ï¼è¦æ˜¯å»çš„æ¯”è¾ƒæ—©ï¼Œé‚£å°±åœ¨ä¼‘æ¯åŒºç©ä¸€ä¸ªè¶…çº§æœ‰è¶£çš„åŒäººå°æ¸¸æˆæ€ä¹ˆæ ·ï¼ä½ çŸ¥é“æ€ä¹ˆç©å—ï¼Œä¸ä¼šï¼Ÿé‚£æˆ‘æ•™ä½ å¥½äº†â€¦ï»¿\nï»¿æˆ‘ä¼šå® çˆ±åœ°å–‚ä½ çˆ†ç±³èŠ±ï¼Œä½ ä¼šä¸ä¼šä¾ååœ¨æˆ‘çš„è‚©è†€å‘¢ï¼ä¸ç„¶çš„è¯æˆ‘å¯èƒ½ä¼šæŠŠé€åˆ°ä½ å˜´è¾¹çš„é›¶é£Ÿé©¬ä¸Šç¼©å›åˆ°æˆ‘å˜´è¾¹å“¦ï¼å•Šï¼ä½ åˆ«ç”Ÿæ°”ï¼Œè¿˜æ˜¯ç»™ä½ åƒå¥½äº†â€¦\nï»¿ä½ çŸ¥é“å—ï¼Œä»è¿™ä¸ªæ—¶å€™èµ·ï¼Œåœ¨ä»–æœŸå¾…çš„æœªæ¥é‡Œï¼Œå…¨éƒ½å°†æ˜¯ä½ â€¦â€¦\nâ€”4â€”\næ™šä¸Šä½ å–œæ¬¢å‡ºå»é€›é€›å—ï¼ä¸‹è‡ªä¹ åæˆ‘å¸¸å¸¸ä¼šå»è¶…å¸‚ï¼Œå³ä¾¿åªä¹°é‚£å‡ æ ·ä¸œè¥¿ï¼Œæˆ‘ä¹Ÿä¼šåœ¨é‡Œé¢å¤šé€›ä¸€å°ä¼šå„¿ï¼Œå¯èƒ½æ˜¯å› ä¸ºé‚£é‡Œæœ‰æµ“æµ“çš„ç”Ÿæ´»æ°”æ¯å§ã€‚\næ„¿åœ¨å°†æ¥çš„æŸä¸€å¤©ï¼Œæˆ‘æ¨ç€è´­ç‰©è½¦ï¼Œä½ ç‰µç€æˆ‘çš„æ‰‹ï¼Œèµ°åœ¨å–§é—¹çš„å•†åœºã€‚æˆ‘æ‚„æ‚„æŠŠä½ å–œæ¬¢çš„é›¶é£Ÿæ”¾è¿›è½¦é‡Œï¼Œä½ è®¤çœŸåœ°æŒ‘ç€æˆ‘çˆ±åƒçš„æ°´æœï¼Œç„¶åæˆ‘ä»¬æ‹ç€è¿™ç®€å•è€Œå¹³å‡¡çš„å¹¸ç¦ï¼Œæ»¡è½½è€Œå½’ã€‚\næˆ‘è¿˜æœ‰ä¸ªå¤œè·‘çš„å°ä¹ æƒ¯ï¼Œæˆ‘ä¹Ÿå¸Œæœ›å’Œä½ ä¸€èµ·ï¼Œè¶ç€å¤œå¹•é™ä¸´ï¼Œå»è‰åªä¸Šç¹æ˜Ÿç‚¹ç‚¹çš„æ“åœºã€‚æˆ´ä¸Šè€³æœºï¼Œè·Ÿç€éŸ³ä¹çš„èŠ‚å¥ï¼Œåœ¨çšæ´çš„æœˆå…‰ä¸‹æŒ¥æ´’æ±—æ°´ã€‚\nä¸€åœˆä¸€åœˆçš„è½®å›ï¼Œç”©æ‰å¿ƒä¸­æ‰€æœ‰çš„ä¸æ„‰å¿«ï¼Œæ¥ç€å†å»æ¾¡å ‚ï¼Œå†²å»ä¸€å¤©ä¸­çº·ä¹±çš„å°æƒ…ç»ªâ€¦\nåˆæˆ–æ˜¯ï¼Œæˆ‘å¸¦ç€å‰ä»–ï¼Œä½ å½“æˆ‘çš„ä¸“å±è§‚ä¼—ï¼Œåœ¨æŸ”è½¯èˆ’é€‚çš„è‰åªå¸­åœ°è€Œåï¼Œå¼¹å”±é‚£äº›ä¸ºä½ å­¦è¿‡çš„æ­Œå¥½ä¸å¥½å‘¢ï¼\nä½ å’Œæˆ‘ä¸€èµ·å”±æ€ä¹ˆæ ·ï¼Œå¯ä¸èƒ½æ”¾è¿‡ä½ é‚£è¢«å¤©ä½¿å»è¿‡çš„å—“å­ï¼Œè¿˜æœ‰æˆ‘å¯èƒ½ä¼šè·‘è°ƒå“¦ï¼Œä½ ä¼šç¬‘å—ï¼Œè¿˜æ˜¯å¤§å£°ä¸€ç‚¹ï¼Œå¸¦å›æˆ‘è·‘åçš„éƒ¨åˆ†å‘¢â€¦\næƒ³åˆ°è¿™ä¸ªå”¯ç¾çš„ç”»é¢ï¼Œä¹Ÿä¼šè®©æˆ‘æ„ŸåŠ¨çš„çº¢äº†çœ¼ã€‚\nå¿™ç€ä¸ºä¸‹ä¸€æ®µäººç”Ÿåšå‡†å¤‡ï¼Œå¥½ä¹…éƒ½ä¸å»KTVäº†ï¼Œå¥½åƒä¹Ÿæ²¡æœ‰é‚£ç§æƒ³åœ¨äººå‰è¡¨ç°çš„å†²åŠ¨äº†ï¼Œåªå¸Œæœ›ç°åœ¨çš„æ‹¼æèƒ½ä¸ºä½™ç”Ÿå‘æ˜å‡ºä¸ä¼—ä¸å‡¡çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚\nä¸çŸ¥é“ä½ æ˜¯ä¸æ˜¯ä¹Ÿæ­£å¤„äºäººç”Ÿçš„æŸä¸€ä¸ªé£å£æµªå°–å‘¢ï¼Œä½ æ˜¯ä¸æ˜¯å·²ç»å®Œæˆèœ•å˜äº†å‘¢ï¼Œä½ æ†§æ†¬çš„æœªæ¥é‡Œæœ‰æ²¡æœ‰ä¸€ä¸ªåƒæˆ‘è¿™æ ·çš„äººå‘¢ã€‚\næˆ‘ç›¸ä¿¡ï¼Œä½ è‚¯å®šæ­£èµ°åœ¨å’Œæˆ‘ç›¸é‡çš„è·¯ä¸Šå‘¢ã€‚è€Œæˆ‘ï¼Œä¹Ÿæ­£åœ¨å¯»æ‰¾ç€é‚£ä¸€ä»½æ‡‚ä½ çš„èµ„æ ¼å‘€ã€‚\nï»¿çªç„¶é—´ï¼Œæ¸…æ™¨çš„ä¸€ç¼•é˜³å…‰æ è¿‡çª—å¸˜çš„ç¼éš™æ’åˆ°æˆ‘çš„æ‰‹ä¸Šï¼Œç…§åœ¨è¿™äº›çƒ­çƒˆè€ŒåˆæŠ½è±¡çš„æ–‡å­—ä¸Šï¼Œæˆ‘é¡¿ä¸‹ç¬”æ¥ï¼Œå¤šæƒ³èƒ½æ°¸è¿œä¿å­˜æ­¤åˆ»å¿ƒé‡Œæ­£è¯ç”Ÿçš„é˜µé˜µæš–æ„â€¦\nä»–å¤šä¹ˆå¸Œæœ›å¯ä»¥æœ‰ä¸€ä¸ªäººé™ªä»–çœ‹é™Œç”ŸåŸå¸‚é‡Œçš„æ¯ä¸€ä¸ªè½æ—¥ï¼Œä»–ä»¬ä¸€èµ·å»å¬å–œæ¬¢çš„è¯¾ç¨‹ã€‚ä¸€èµ·è§„åˆ’æœªæ¥ï¼Œä¸€èµ·å¸¦ç€è¶³å¤Ÿçš„çŸ¥è¯†ï¼Œå»é—¯è¡è¿™è‰²å½©æ–‘æ–“çš„å¹³å‡¡ä¸–ç•Œã€‚\nâ€”â€”ä½ ä¸œåŠçƒå®˜æ–¹æŒ‡å®šå”¯ä¸€çš„ç”·æœ‹å‹\n","slug":"å¤§å­¦ä¸‰å¹´ï¼Œå†™ç»™é‚£ä¸ªè¿Ÿåˆ°çš„äºº","date":"2018-11-19T08:28:23.000Z","categories_index":"","tags_index":"æˆé•¿ï¼Œæ—§æ—¶å…‰","author_index":"Aurora"},{"id":"6919b9fcac48b5491910463656acfa3a","title":"è‡³å°‘ä½ ï¼Œå­˜åœ¨è¿‡æˆ‘çš„è®°å¿†","content":"äººæµ·ä¸­é”™è¿‡çš„é‚£ä¸ªäººï¼Œè‡³å°‘ï¼Œåœ¨æˆ‘å¤±çœ æ¢¦å‘“é—´ï¼Œè„‘æµ·é‡Œè¿˜æ˜¯ä¼šä¾ç¨€æµ®ç°å‡ºä½ çš„å®¹é¢œã€‚\nè´è’‚ï¼Œæˆ‘æ˜¯é‡Œå…‹ã€‚æœ€è¿‘ä½ çš„åŸå¸‚ä¸‹é›¨äº†å—ï¼Œæˆ‘è¿™é‡Œçš„æ¸©åº¦æœ‰äº›éš¾è¿‡ï¼Œä¸çŸ¥é“ä½ è¿‡å¾—æ€ä¹ˆæ ·ã€‚\næµå—çš„å¤©ç…§æ—§é‚£æ ·è°ƒçš®ï¼Œå°±åƒä¸–ç•Œæœ«æ—¥é‡Œçš„é‚£å¥æ­Œè¯ï¼ŒWhy dose the sun go on shiningä¸€æ ·ï¼Œä¸€æ¬¡åˆä¸€æ¬¡åœ°æŒ‘æˆ˜ç€æˆ‘å‡ºé—¨çš„å‹‡æ°”ï¼Œè¿˜å¥½æˆ‘åçš„åœ°æ–¹é˜³å…‰æœ‰æ‰€æ”¶æ•›ï¼Œä¸ç„¶æˆ‘ç‚½çƒ­çš„å†…å¿ƒæš´éœ²åœ¨çƒˆæ—¥ä¸‹ï¼ŒçœŸä¸çŸ¥é“ä¼šå‘ç”Ÿä»€ä¹ˆåŒ–å­¦ååº”ã€‚\nå®¶åº­ç”Ÿæ´»çš„åŸå› ï¼Œæˆ‘å¾ˆæ—©å°±å¼€å§‹äº†ä¸€ä¸ªäººçš„ç”Ÿæ´»ï¼Œå¯èƒ½é™¤äº†è‡ªå·±ï¼Œæ²¡æœ‰è°èƒ½å·¦å³æˆ‘çš„æƒ³æ³•äº†ã€‚ä¸€ä¸ªäººæ— æ‹˜æ— æŸï¼Œä¸€ä¸ªäººå¤©é©¬è¡Œç©ºï¼Œä¸€ä¸ªäººæ¡€éªœä¸é©¯ï¼Œä¸€ä¸ªäººèƒ†æ€¯å¦‚é¼ ã€‚\nå‘¨å›½å¹³è¯´ï¼Œåœ¨å¤šæ•°åœºåˆï¼Œæˆ‘ä¸æ˜¯è§‰å¾—å¯¹æ–¹ä¹å‘³ï¼Œå°±æ˜¯å®³æ€•å¯¹æ–¹è§‰å¾—æˆ‘ä¹å‘³ï¼Œæˆ‘æ—¢ä¸æ„¿æ„å¿å—å¯¹æ–¹çš„ä¹å‘³ï¼Œåˆä¸æ„¿æ„è´¹åŠ²ä½¿è‡ªå·±æœ‰è¶£ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©ç‹¬å¤„ï¼Œé‚£å°±è‡ªå·±æ‰¿å—è‡ªå·±çš„ä¹å‘³ï¼Œä¸ç´¯åŠä»–äººã€‚æˆ‘å¤§æ¦‚å°±æ˜¯è¿™æ ·ä¸€ç§äººå§ï¼Œå¾—æ„çš„æ—¶å€™æ‰‹èˆè¶³è¹ˆï¼Œé€¢åœºä½œæˆï¼Œå¯ç¨ä¸å¦‚æ„å°±é»¯ç„¶å¤±è‰²ï¼Œå†·è‹¥å†°éœœï¼Œä½ è¯´ä¹å‘³ä¸ä¹å‘³ã€‚\næµ®èºçš„ç”Ÿæ´»ä¸­è®©äººæœ‰å¤ªå¤šæ— æ³•æ§åˆ¶çš„éæƒ³ï¼Œä¹Ÿè®¸ï¼Œæˆ‘åº”è¯¥æ‰¾åˆ°ä¸€ä¸ªæ›´å¥½çš„å¨±ä¹æ–¹å¼ï¼Œä»¥è‡³äºä¸ä¼šåœ¨ä¼‘æ¯çš„æ—¶å€™ï¼Œä¸ç”±è‡ªä¸»çš„æ²¦é™·ã€‚\næ¯æ¬¡å¬åˆ°å»–ä¿Šæ¶›çš„é‚£é¦–ã€Šè°ã€‹ï¼Œç‰¹åˆ«æƒ³æ‹¿èµ·å‰ä»–ç»ƒç´ï¼Œå¼¹ç€å¼¹ç€ï¼Œå°±å¿˜è®°äº†åå¤©è¿˜è¦è€ƒè¯•çš„æŸç¼šæ„Ÿã€‚æœ‰æ—¶å€™çœŸå¸Œæœ›æ—¶é—´å®šæ ¼åœ¨è¿™ä¸€åˆ»ï¼Œä¸ç”¨å»æƒ³å…¶ä»–ä»»ä½•äº‹æƒ…ã€‚\nå½“ç„¶ä¹Ÿå¥½ç¾¡æ…•é‚£äº›åœ¨æ¶å­é¼“ä¸Šä¸å¯ä¸€ä¸–çš„ä¹æ‰‹ä»¬ï¼Œæƒ³å­¦ä¹ æ‰“é¼“ï¼Œä¸€ç›´è¿½æ±‚è¿™æ ·çš„å‘æ³„æ–¹å¼ï¼Œå¯æ˜¯ç”Ÿæ´»æ€»å½’ä¼šæœ‰äº›å°é—æ†¾ï¼Œä¹ æƒ¯äº†æ—¶å…‰é™å¥½ï¼Œå¿ƒæƒ…ä¼¼ä¹ä¸€ç›´éƒ½æ³¢æ¾œä¸æƒŠã€‚\næœ€è¿‘ç»å†äº†ä¸€è¿ä¸²çš„è€ƒæ ¸ï¼Œå¸¦ç€æ»¡æ»¡çš„ç”¨å¿ƒï¼Œå’Œä¸€ä¸ç‚¹æ…Œå¼ ï¼Œå®Œæˆç€ä¹‹å‰æ„Ÿè§‰æƒŠå¤©åŠ¨åœ°çš„äº‹æƒ…ã€‚\nå‰æ®µæ—¶é—´å¸®é©¾æ ¡æ‹›ç”Ÿï¼Œæ‹¿åˆ°äº†è¾›è‹¦æ¢æ¥çš„ä¸€ç‚¹å°å›æŠ¥ã€‚ä¸è¿‡è´è’‚ï¼Œå¾ˆå¤šæ¬¡çš„ç¤¾ä¼šç»éªŒä½¿æˆ‘è§‰å¾—ï¼Œäººä»¬å¥½åƒéƒ½ä¸æ„¿æ„çœ‹åˆ°åˆ«äººå˜å¥½çš„æ ·å­ï¼Œä»–ä»¬å°½å¯èƒ½ä¸é­é‡è‹¦éš¾çš„äººæ‰¾åˆ°å…±é¸£ï¼Œè¦ä¹ˆä¿æŒç¼„é»˜ï¼Œè¦ä¹ˆæ–½ä»¥æ€œæ‚¯ã€‚å½“ä»–ä»¬å‘ç°åˆ«äººçš„å¥½æ—¶ï¼Œå®ƒä»¬ç«‹åˆ»æ„Ÿåˆ°æ¯›éª¨æ‚šç„¶ã€‚\nè´è’‚ï¼Œä½ è¯´åƒæˆ‘è¿™æ ·çš„äººï¼Œä¼šæ´»æˆè‡ªå·±æƒ³è¦æˆä¸ºçš„æ ·å­å—ï¼Œæˆ‘è¦å­¦ä¹ çš„ä¸œè¥¿åœ¨éœ€è¦é€šè¿‡è€ƒè¯•æ‹¿åˆ°çš„å­¦åˆ†é¢å‰ï¼Œå·²ç»ææµ…äº†ä¸€é˜µæ—¶é—´ã€‚æˆ‘æƒ³ï¼Œè¿‡å®Œè¿™ä¸€é˜µï¼Œæˆ‘ä¼šç»§ç»­åšæŒã€‚å› ä¸ºï¼Œåœ¨è¿™åœºæ¸¸æˆä¸­ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå…¶ä»–çš„è§’è‰²ä¾›æˆ‘é€‰æ‹©ã€‚\nå½“ç„¶æˆ‘ç›¸ä¿¡ï¼Œè¿™äº›å¾ˆå¿«å°±ä¼šè¿‡å»çš„ã€‚æ—¶é—´æ€»æ˜¯è¿™æ ·æ— æƒ…åœ°åˆ‡å‰²æˆ‘ä»¬çš„ç”Ÿå‘½ï¼Œå¤œé‡Œæƒ³ç€å¿ƒäº‹ï¼Œç¬¬äºŒå¤©çš„é—¹é“ƒå°±å“äº†ï¼›ä¸‹å‡ æ¬¡é›¨ï¼Œå¤å¤©ä¹Ÿç»“æŸäº†ï¼›ç­‰ååº”è¿‡æ¥çš„æ—¶å€™ï¼Œé‚£ä¸ªç©¿ç€å¼€è£†è£¤åœ¨é‚»å±…å®¶ä¹±è·‘çš„å°å±å­©ï¼Œéƒ½é•¿è¿™ä¹ˆå¤§äº†ã€‚\n","slug":"è‡³å°‘ä½ ï¼Œå­˜åœ¨è¿‡æˆ‘çš„è®°å¿†","date":"2018-10-19T08:31:17.000Z","categories_index":"","tags_index":"æˆé•¿ï¼Œæ—§æ—¶å…‰","author_index":"Aurora"},{"id":"830c703305ad4b55b8b0f615c2c13739","title":"å¤§å­¦é‡Œï¼Œæœ€ä¸§çš„æ—¶å€™","content":"â€”1â€”\nçœ‹åˆ°é¦™æ¸¯å¤§å­¦å­™æ•™æˆçš„ä¸€æ®µè¯ï¼š\nï»¿ï»¿â€œå¤§å­¦ï¼Œå°±åº”è¯¥æ˜¯æ—©èµ·åƒç‚¹æ—©é¤ï¼›è·‘è·‘æ­¥ï¼›ä¸“ä¸šè¯¾è®¤çœŸå¬ï¼›å…¬å…±è¯¾çœ‹çœ‹è‡ªå·±å–œæ¬¢çš„æ‚å¿—ï¼›ä¸­åˆå°ç¡ä¸€ä¼šå„¿ï¼›ä¸‹åˆå‚åŠ ä¸ªç¤¾å›¢æ´»åŠ¨æˆ–æ‰“æ‰“ç¯®çƒï¼›æ™šä¸Šé™ªç€å–œæ¬¢çš„äººæ•£æ•£æ­¥ï¼›æˆ–å»è‡ªä¹ å®¤å®‰é™åœ°çœ‹çœ‹ä¹¦â€¦â€¦  ç¤¾ä¼šä¸éœ€è¦å­¦éœ¸ï¼Œä¹Ÿä¸è®¤ä»€ä¹ˆå­¦ç”Ÿä¼šä¸»å¸­ï¼Œæ›´ä¸å¸Œæœ›çœ‹åˆ°å­¦ç”Ÿæ”¾å¼ƒå­¦ä¸šå»åˆ›ä¸šã€‚ä½ åªè¦èƒ½å¹³ç¨³å®Œæ•´åœ°è¯»å®Œå¤§å­¦ï¼Œå¯»æ‰¾åˆ°è‡ªå·±æ‰€çˆ±çš„äººå’Œå…´è¶£ï¼Œå¤šå»æ²¡æœ‰ç›®çš„çš„çœ‹äº›èƒ½ä¸°å¯Œè‡ªå·±æ€æƒ³çš„ä¹¦ï¼Œè®¤è¯†å‡ ä¸ªå¥½çš„ä¸æˆæ ·å­çš„æœ‹å‹ï¼Œé”»ç‚¼æˆ–æ˜¯å¡‘é€ è‡ªå·±çš„èº«ä½“ï¼Œå­¦ç²¾è‡ªå·±æƒ³è¦ä»äº‹äº‹ä¸šçš„ä¸“ä¸šçŸ¥è¯†â€¦â€¦ åšåˆ°è¿™äº›ï¼Œå¹³æ·¡åœ°åº¦è¿‡å¤§å­¦è¿™å‡ å¹´ä½ å°±å·²ç»è¶³å¤Ÿä¼˜ç§€äº†ã€‚ â€\nå¯ä¸ºä»€ä¹ˆä»Šå¹´å¤§ä¸‰çš„æˆ‘ï¼Œæ„Ÿè§‰è¿™è¾ˆå­ç®—æ˜¯å®Œäº†ã€‚\nâ€”2â€”\nå¤§å­¦ï¼Œæ˜¯ä¸€æ®µæ²¡æœ‰çƒŸç«æ°”çš„ç”Ÿæ´»ï¼Œæ˜¯ä¸€ä¸ªæ¯”æ¯•ä¸šåèˆ’æœçš„çŠ¶æ€ã€‚\nè°ƒå‰‚åˆ°ä¸€ä¸ªä¸€çœ¼æ— ç¼˜çš„ç†ç§‘ä¸“ä¸šï¼Œè€Œä½ åšçš„æœ€æ— åŠ›çš„æŠ—æ‹’ï¼Œå°±æ˜¯åœ¨è¯¾ä¸Šçœ‹è‡ªå·±æ„Ÿå…´è¶£çš„ä¸œè¥¿ï¼Œåœ¨å®¿èˆå¬æ­Œï¼Œçœ‹ç”µå½±ï¼Œæ‰“æ¸¸æˆï¼Œä¸€æ—¥ä¸‰é¤ï¼Œå—æ¥åŒ—å¾€ã€‚æ¸æ¸ï¼Œè¿™æˆäº†ä¸€ä¸ªå¸ç©ºè§æƒ¯çš„äº‹æƒ…ã€‚å¤±è½çš„æ—¶å€™ç»ƒä¸‹å‰ä»–ï¼Œä½ ä¹Ÿæ›¾æƒ³æ´»åœ¨éŸ³ä¹çš„å°ä¸–ç•Œé‡Œæ— äººé—®æ´¥â€¦\næ¯å¤©åšæŒåƒæ—©é¥­ï¼Œå¤©æ°”æš–å’Œä¼šå»æ“åœºè·‘æ­¥ï¼Œä¸­åˆå¾ˆéš¾ç¡ç€ï¼Œæ™šä¸Šç²¾åŠ›æ—ºç››åˆ°è¿å¼€ç©ç¬‘éƒ½å°¤å…¶è®¤çœŸï¼Œæ¯ä¸€æ¬¡èµ¶ä½œä¸šéƒ½æ˜¯ä¸€åœºå’Œæ—¶é—´èµ›è·‘çš„ç‰¹æ®Šè¡ŒåŠ¨ï¼Œå½“ç„¶ä½ è¿˜å¯ä»¥åœ¨æœŸæœ«çš„æ—¶å€™å®Œæˆä¸€äº›æ„Ÿè§‰æƒŠå¤©åŠ¨åœ°çš„äº‹æƒ…ï»¿â€¦\nä½ æ…¢æ…¢ç–è¿œä¹¦æœ¬ç†è®ºé‡Œé¢çš„æˆå°±æ„Ÿï¼Œå¼€å§‹åŒå€¦ä¼—å£ä¸€è¯çš„æœ€ä½³ç­”æ¡ˆï¼Œé€ƒé¿ä¸€æ¬¡åˆä¸€æ¬¡é€‰æ‹©ä¸­çš„å”¯å”¯è¯ºè¯ºï¼Œæ²‰é†‰åœ¨è‡ªå·±å¯¹äºå„¿æ—¶æ¢¦å¢ƒçš„ç¾å¥½æƒ³å¾€é‡Œâ€¦\nä½ ä¸æ˜¯å­¦éœ¸ä¹Ÿæ²¡è¿›å­¦ç”Ÿä¼šï¼Œä½ æ€»æ˜¯åº†å¹¸åœ°ä»¥ä¸ºä½åˆ†é€šè¿‡å°±æ˜¯æ¯”é‚£ä¸ªæŒ‚äº†ç§‘çš„å®¤å‹å¼ºï¼Œä½ ç”šè‡³æƒ³ç€åœ¨å­¦æ ¡å¾…ä¸Šå››å¹´ç„¶åå‘è´¢ï¼Œæ…¢æ…¢åœ°ï¼Œä½ å˜å¾—ä¸æ„¿æ„å‚åŠ å¸¦ç€åˆ©ç›Šæ€§è´¨ç‚«è€€å˜²è®½çš„ç¤¾å›¢æ´»åŠ¨ï¼Œæ²¡æœ‰èƒ½åŠ›å»ç¾åŒ–äººå®¶çš„æ¸¸æˆä½“éªŒâ€¦\nè¿™æ˜¯ä¸€ä¸ªè®°å¿†ç¨çºµå³é€çš„å¹´çºªï¼Œä½ è¯»çš„é‚£äº›æ„Ÿè§‰æŒºæœ‰æ„æ€çš„ä¹¦ï¼Œéšç€æ—‹è½¬çš„æ—¶é—´è½´å¿˜å¾—æ‰€å‰©æ— å‡ ã€‚ä½ åšäº†ä¸€äº›å…¼èŒï¼ŒæŒ£äº†ä¸€ç‚¹å°é’±ï¼Œåœ¨åŒå­¦é¢å‰è¿‡å¾—æ´‹æ´‹æ´’æ´’ã€‚ä½ å»è¿‡å‡ ä¸ªåœ°æ–¹ï¼Œè®¤è¯†äº†å¥½å°‘å¥½å°‘å¯ä»¥äº¤å¿ƒçš„äººï¼Œæ¯æ¬¡åƒé¥­æƒ³è¯´å¿ƒé‡Œè¯çš„æ—¶å€™ï¼Œä½ æ€»å®³æ€•åˆ«äººæŠ“ä½ä½ çš„è½¯è‚‹è€Œæ¬²è¨€åˆæ­¢ã€‚ä½ è¿˜è€ƒäº†å‡ ä¸ªå¸Œæœ›èƒ½ç»™æœªæ¥ç”Ÿæ´»å¸¦æ¥æƒŠå–œçš„è¯ä¹¦â€¦â€¦\nåšåˆ°è¿™äº›ï¼Œå¹³æ·¡çš„åº¦è¿‡å¤§å­¦ï¼Œä½ ä¹Ÿå¾ˆå®³æ€•å¹³å‡¡çš„ä½ ä¸€æ— æ‰€æˆã€‚ï»¿ï»¿\nâ€”3â€”\nè¿™æ˜¯ä¸€ä¸ªèŠ±é‡Œèƒ¡å“¨çš„æ—¶ä»£ï¼Œä½ å¯èƒ½æ°¸è¿œéƒ½ä¸ä¼šçŸ¥é“ï¼Œé‚£ä¸ªåœ¨æœ‹å‹åœˆé‡Œé«˜å¤§ä¸Šçš„é™Œç”Ÿäººï¼Œåœ¨çœŸå®é‡Œï¼Œç©¶ç«Ÿæ˜¯æ€æ ·çš„é™…é‡ã€‚ï»¿ï»¿\nä½ å°½å¯èƒ½çš„åœ¨äººå‰æŠŠè‡ªå·±è£…ç‚¹å¾—å…‰é²œäº®ä¸½ï¼Œç»…å£«èˆ¬çš„æ¥å—æ‰€æœ‰çš„ç¼˜è¡Œæ¸è¿œã€‚ä½ å˜å¾—å®³æ€•æ‰¿è¯ºï¼Œèº²é¿çˆ±æƒ…ï¼Œå´åˆä¸æ„¿æ„äº«å—å­¤ç‹¬ï¼Œç‹¬å½“ä¸€é¢â€¦ï»¿ï»¿\nä½ è§è¯†åˆ°çš„ä¸–ç•Œçš„ç¡®æ¯”çˆ¶è¾ˆè¦å¤§ï¼Œå¯æ˜¯å¯¹è‡ªæˆ‘çš„è®¤çŸ¥å´å¾ˆæµ…ã€‚\nä½ æ¯å¤©åœ¨çˆ†ç‚¸çš„ä¿¡æ¯ä¸­å­¦ä¹ å„ç§é“ç†ï¼Œé€šè¿‡ç½‘ç»œä½ çŸ¥é“äº†èº«è¾¹å¥½å¤šäººèµ¢ï¼Œäºæ˜¯ä½ å˜å¾—æ›´åŠ ä¸ç”˜å¹³å‡¡ï¼Œæ—¶è€Œå‡ç¥èšæ°”çš„ç¬ƒå®šï¼Œæ—¶è€Œäº‘æ·¡é£è½»çš„éšæ„ï¼Œåœ¨å¯¹æ¯”ä¸­æ¸æ¸è¿·å¤±ï»¿â€¦ï»¿ï»¿\nï»¿ä½ æ„Ÿè§‰è‡ªå·±å˜æˆäº†ä¸€å°æœºå™¨ï¼Œå¯ä»¥ä¸å¯¹ç”Ÿæ´»ä»˜è¯¸ä»»ä½•æƒ…æ„Ÿï¼Œä»–èƒ½ä¸€ç›´å·¥ä½œï¼Œåªæ˜¯ä¼šè¶Šæ¥è¶Šæ…¢ã€‚ï»¿ï»¿\nå¦‚æœç°åœ¨æœ‰ä¸€ä¸ªå¯ä»¥çœ‹åˆ°çš„å†³å®šï¼Œæœªæ¥ä½ ä¼šåœ¨ä¸–ç•Œçš„æŸä¸€ä¸ªè§’è½ï¼Œä»äº‹ä¸€ä»½ç§°å¿ƒå¦‚æ„çš„èŒä¸šï¼Œå¯èƒ½ä½ å°±ä¸ä¼šåœ¨é”™è¿‡ä¸€èŠ‚ä¸“ä¸šè¯¾çš„æ—¶å€™åç«‹ä¸å®‰ï¼Œæ›´ä¸ä¼šå› ä¸ºèº«è¾¹çš„äººæ´»çš„ä½“é¢æ½‡æ´’è€Œå¿ƒæƒŠèƒ†æˆ˜äº†ã€‚ï»¿ï»¿\nä¹Ÿè®¸æ­£æ˜¯å› ä¸ºè¿™ç§äººç”Ÿçš„ä¸ç¡®å®šæ€§ï¼Œæ‰æ„ˆåŠ å¢å¤§äº†äººä»¬å¯¹æœªæ¥äº”å½©ç¼¤çº·çš„æ„æƒ³å§ã€‚ï»¿ï»¿\nå…‹è±é¡¿åœ¨ã€Šä½ è¦å¦‚ä½•è¡¡é‡ä½ çš„äººç”Ÿã€‹ä¸­æåˆ°ï¼Œäººå¯¹è‡ªå·±ä¸€ç”Ÿçš„è§„åˆ’ï¼Œæ— éæ˜¯å‘¨å¯†æˆ˜ç•¥å’Œæ„å¤–æœºé‡ç›¸ç»“åˆçš„äº§ç‰©ï¼Œå…³é”®æ˜¯è¦èµ°å‡ºå»ï¼Œå¹¶è¡ŒåŠ¨èµ·æ¥ï¼Œç›´åˆ°ä½ æ˜ç™½åº”è¯¥å°†è‡ªå·±çš„èªæ˜æ‰æ™ºï¼Œå…´è¶£å’Œé‡ç‚¹æ”¾åœ¨å“ªé‡Œï¼Œå†å°†åº”æ€¥æˆ˜ç•¥è½¬åŒ–ä¸ºå‘¨å¯†æˆ˜ç•¥ã€‚\næˆ‘å¸Œæœ›ä½ ï¼Œåœ¨è¯•å›¾è·³å‡ºè§„åˆ™ä¹‹å‰ï¼Œèƒ½åšå‡ºå…³äºè‡ªå·±æœ¬å¿ƒçš„é€‰æ‹©ï¼Œæ„¿ä½ å¼ºå¤§åˆ°èƒ½å†²ç ´ç¤¾ä¼šçš„æ¡æ¢ï¼Œä»¥è‡ªå·±æ„¿æ„çš„å§¿æ€ç”Ÿæ´»ä¸‹å»ã€‚ï»¿ï»¿ï»¿\n","slug":"å¤§å­¦é‡Œï¼Œæœ€ä¸§çš„æ—¶å€™","date":"2018-10-18T03:12:12.000Z","categories_index":"","tags_index":"æˆé•¿ï¼Œæ—§æ—¶å…‰","author_index":"Aurora"}]