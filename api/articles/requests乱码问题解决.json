{"title":"pythonä¸­requestsä½¿ç”¨ä¸­æ–‡ä¹±ç çš„è§£å†³æ–¹æ¡ˆ","uid":"8a288770ed82450aa993ccbeacfd0367","slug":"requestsä¹±ç é—®é¢˜è§£å†³","date":"2021-12-02T15:30:02.000Z","updated":"2022-05-29T15:36:46.176Z","comments":true,"path":"api/articles/requestsä¹±ç é—®é¢˜è§£å†³.json","keywords":null,"cover":null,"content":"<ul>\n<li> ä¸­æ–‡ä¹±ç å¤„ç†<pre class=\"line-numbers language-none\"><code class=\"language-none\">import requests\n\nurl &#x3D; &quot;http:&#x2F;&#x2F;www.baidu.com&quot;\nr &#x3D; requests.get(url)\n# è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ç¼–ç æ–¹å¼\nr.encoding &#x3D; r.apparent_encoding\nprint(r.text)</code></pre>\nä¸­æ–‡ä¹±ç æ˜¾ç¤ºæ­£å¸¸äº†ï¼ï¼</li>\n</ul>\n<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜ä¼šé‡åˆ°é€šè¿‡è¿™ä¸ªæ“ä½œåæ— æ³•è§£å†³çš„æƒ…å†µï¼Œæ¯”å¦‚æ–°æµªé¦–é¡µçš„è¡¨ç°ï¼š<br>å‡ºç°è¿™ç§æƒ…å†µï¼Œæ®è¯´æ˜¯ä½¿ç”¨gzipå°†ç½‘é¡µå‹ç¼©äº†ï¼Œå¿…é¡»å…ˆå¯¹å…¶è§£ç ï¼Œä½¿ç”¨r.contentä¼šè‡ªåŠ¨è§£ç ï¼š</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">import requests\n\nurl &#x3D; &quot;http:&#x2F;&#x2F;www.sina.com.cn&#x2F;&quot;\nr &#x3D; requests.get(url)\n# æŒ‡å®šç¼–ç è§£ç æ–¹å¼\nhtml &#x3D; r.content.decode(&#39;UTF-8&#39;)\n# r.encoding &#x3D; &#39;utf-8&#39;</code></pre>\n<p>å…¶å®å§ï¼Œå¤„ç†çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œå¤§å®¶æ³¨æ„ä¸€ç‚¹ï¼Œé‚£å°±æ˜¯çœ‹è¯·æ±‚çš„htmlæ•°æ®ä¸­æœ€å‰é¢å¯¹çš„charsetè®¾ç½®çš„æ˜¯å•¥ï¼ï¼</p>\n<ul>\n<li><p> htmlå®ä½“ç¼–ç è§£æ</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">In [1]: s &#x3D; &#39;ç›®å‰ç©çš„æŒºå¥½çš„ï¼Œå°±&amp;hellip;&amp;hellip;&lt;br&gt;ç»™å››æ˜Ÿæ˜¯å› ä¸ºä¸ºä»€ä¹ˆä¸æ˜¯åŒä¸€ä¸ªæœçš„å°±ä¸èƒ½è¿›ç¤¾å›¢ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬&#39;\n#å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸ª&#39;&amp;hellip;&#39;ï¼Œè¿™ç©æ„æ˜¯htmlå®ä½“è¡¨ç¤ºçœç•¥å·&#39;...&#39;ï¼Œå› æ­¤éœ€è¦è¿›è¡Œå¤„ç†ï¼\nIn [2]: import html\n\nIn [3]: html.unescape(s)\nOut[3]: &#39;ç›®å‰ç©çš„æŒºå¥½çš„ï¼Œå°±â€¦â€¦&lt;br&gt;ç»™å››æ˜Ÿæ˜¯å› ä¸ºä¸ºä»€ä¹ˆä¸æ˜¯åŒä¸€ä¸ªæœçš„å°±ä¸èƒ½è¿›ç¤¾å›¢ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬ğŸ˜¬&#39;</code></pre></li>\n<li><p>ä¹Ÿæ˜¯ä¸€ç§æƒ…å†µå§~</p>\n</li>\n</ul>\n<p><a href=\"https://www.cnblogs.com/xieqiankun/p/lxmlencoding.html\">https://www.cnblogs.com/xieqiankun/p/lxmlencoding.html</a></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">æ˜¾ç„¶è¿™åº”è¯¥æ˜¯ç¼–ç çš„é—®é¢˜ï¼Œåœ¨ä½¿ç”¨:\netree.HTML(r)\nå¤„ç†æºæ–‡ä»¶çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰æŒ‡å®šç¼–ç ï¼Œæ‰€ä»¥å®ƒä½¿ç”¨äº†ä¸€ä¸ªé»˜è®¤ç¼–ç ï¼Œä»è€Œå¯¼è‡´å’ŒUTF-8å†²çªï¼Œäº§ç”Ÿä¹±ç ã€‚\n\nç»è¿‡æŸ¥é˜…lxml.etree.HTMLçš„æ–‡æ¡£ï¼Œæˆ‘å‘ç°etree.HTMLæœ‰ä¸€ä¸ªå‚æ•°æ˜¯parser,è¿™ä¸ªå‚æ•°ä¸æ˜¯å¿…é¡»çš„ï¼Œå› æ­¤çœç•¥ä»¥åå®ƒå°±ä¼šè‡ªåŠ¨ä½¿ç”¨ä¸€ä¸ªé»˜è®¤çš„parserã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æˆ‘æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªï¼š\ncontentTree &#x3D; etree.HTML(r, parser&#x3D;etree.HTMLParser(encoding&#x3D;&#39;utf-8&#39;))\nè¿™é‡Œæˆ‘æŒ‡å®šäº†etree.HTMLParseræ¥ä½œä¸ºä¸€ä¸ªparser,åŒæ—¶ï¼Œetree.HTMLParserå¯ä»¥æ¥å—ç¼–ç ä½œä¸ºå‚æ•°ã€‚äºæ˜¯æˆ‘æŒ‡å®šä¸ºUTF-8ã€‚</code></pre>\n\n<pre class=\"line-numbers language-powershell\" data-language=\"powershell\"><code class=\"language-powershell\">import requests\nfrom lxml import etree\nimport sys\nreload(sys)\nsys.setdefaultencoding(&quot;utf-8&quot;)\n\nr &#x3D; requests.get(url&#x3D;&#39;http:&#x2F;&#x2F;sports.sina.cn&#x2F;nba&#x2F;rockets&#x2F;2015-10-07&#x2F;detail-ifximrxn8235561.d.html?vt&#x3D;4&amp;pos&#x3D;10&#39;)# æœ€åŸºæœ¬çš„GETè¯·æ±‚\nr.encoding &#x3D; &#39;utf-8&#39;\nr &#x3D; r.content\nprint r</code></pre>","text":" ä¸­æ–‡ä¹±ç å¤„ç†import requests url &#x3D; &quot;http:&#x2F;&#x2F;www.baidu.com&quot; r &#x3D; requests.get(url) # è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ç¼–ç æ–¹å¼ r.encoding &#x3D; r.ap...","link":"","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[{"name":"python","slug":"python","count":18,"path":"api/categories/python.json"}],"tags":[{"name":"æ•°æ®åˆ†æ","slug":"æ•°æ®åˆ†æ","count":15,"path":"api/tags/æ•°æ®åˆ†æ.json"}],"toc":"","author":{"name":"å¼¦å¥½æƒ³æ–­","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"å¤„å¥³åº§ç”·ç”Ÿï¼Œçƒ­çˆ±æŠ€æœ¯ã€å‰ä»–ã€æ—…è¡Œã€‚","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼šæ“ä½œexcel","uid":"7df2c9f61f81e14813ba612502b886c1","slug":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼šæ“ä½œexcel","date":"2021-12-08T14:28:43.000Z","updated":"2022-05-29T15:35:39.998Z","comments":true,"path":"api/articles/pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼šæ“ä½œexcel.json","keywords":null,"cover":null,"text":"#python ä½¿ç”¨ openpyxl æ“ä½œ excel openpyxl æœ€å¥½ç”¨çš„ python æ“ä½œ excel è¡¨æ ¼åº“ï¼Œä¸æ¥å—åé©³ï¼ˆæƒ³åé©³è‡ªå·±å»å­¦å…¶ä»–çš„ï¼‰ openpyxl å®˜ç½‘é“¾æ¥ï¼šhttps://openpyxl.readthedocs.io/en/stable/ ht...","link":"","photos":[],"count_time":{"symbolsCount":"10k","symbolsTime":"9 mins."},"categories":[{"name":"python","slug":"python","count":18,"path":"api/categories/python.json"}],"tags":[{"name":"è‡ªåŠ¨åŒ–","slug":"è‡ªåŠ¨åŒ–","count":6,"path":"api/tags/è‡ªåŠ¨åŒ–.json"}],"author":{"name":"å¼¦å¥½æƒ³æ–­","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"å¤„å¥³åº§ç”·ç”Ÿï¼Œçƒ­çˆ±æŠ€æœ¯ã€å‰ä»–ã€æ—…è¡Œã€‚","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼špdfå’Œword","uid":"3cd7e57c6f854790d628f23694417fc5","slug":"pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼špdfå’Œword","date":"2021-08-26T06:16:31.000Z","updated":"2022-05-29T15:35:52.717Z","comments":true,"path":"api/articles/pythonåŠå…¬è‡ªåŠ¨åŒ–ï¼špdfå’Œword.json","keywords":null,"cover":[],"text":"python ä½¿ç”¨ PyPDF2 å’Œ pdfplumber æ“ä½œpdf PyPDF2 å®˜ç½‘ï¼šhttps://pythonhosted.org/PyPDF2/ PyPDF2 å¯ä»¥æ›´å¥½çš„è¯»å–ã€å†™å…¥ã€åˆ†å‰²ã€åˆå¹¶ PDF æ–‡ä»¶ï¼› pdfplumber å®˜ç½‘ï¼šhttps://github....","link":"","photos":[],"count_time":{"symbolsCount":"7.5k","symbolsTime":"7 mins."},"categories":[{"name":"python","slug":"python","count":18,"path":"api/categories/python.json"}],"tags":[{"name":"è‡ªåŠ¨åŒ–","slug":"è‡ªåŠ¨åŒ–","count":6,"path":"api/tags/è‡ªåŠ¨åŒ–.json"}],"author":{"name":"å¼¦å¥½æƒ³æ–­","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"å¤„å¥³åº§ç”·ç”Ÿï¼Œçƒ­çˆ±æŠ€æœ¯ã€å‰ä»–ã€æ—…è¡Œã€‚","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}